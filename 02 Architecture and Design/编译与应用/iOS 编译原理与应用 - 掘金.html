<!DOCTYPE html>
<!-- saved from url=(0042)https://juejin.cn/post/6844903896230395918 -->
<html lang="zh" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22zh%22%7D%7D"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>iOS 编译原理与应用 - 掘金</title><meta data-n-head="ssr" name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover"><meta data-n-head="ssr" name="apple-itunes-app" content="app-id=987739104"><meta data-n-head="ssr" name="theme-color" content="#ffffff"><meta data-n-head="ssr" name="msapplication-TileColor" content="#da532c"><meta data-n-head="ssr" vmid="description" name="description" content="在Xcode中，当我们按下command + B进行build操作后发生了那些事情，这是一个将代码编译的过程。Xcode现在使用的编译器是LLVM，Xcode 早期使用的是GCC编译器，由于一些历史原因，从Xcode5开始正式过渡到使用LLVM编译器。下文将着重介绍LLVM。 …"><meta data-n-head="ssr" vmid="keywords" name="keywords" content="编译原理"><link data-n-head="ssr" rel="preconnect" href="https://unpkg.byted-static.com/" crossorigin="anonymous"><link data-n-head="ssr" rel="preconnect" href="https://lf3-cdn-tos.bytescm.com/" crossorigin="anonymous"><link data-n-head="ssr" rel="preconnect" href="https://mcs.snssdk.com/" crossorigin="anonymous"><link data-n-head="ssr" rel="preconnect" href="https://i.snssdk.com/" crossorigin="anonymous"><link data-n-head="ssr" rel="dns-prefetch" href="https://lf3-short.ibytedapm.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://lf3-cdn-tos.bytescm.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://api.juejin.cn/"><link data-n-head="ssr" rel="dns-prefetch" href="https://lf-cdn-tos.bytescm.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://unpkg.byted-static.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p1-juejin.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p3-juejin.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p6-juejin.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p9-juejin.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p1-jj.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p2-jj.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p6-jj.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p9-jj.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://mcs.snssdk.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://i.snssdk.com/"><link data-n-head="ssr" rel="apple-touch-icon" sizes="180x180" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/apple-touch-icon.png"><link data-n-head="ssr" rel="icon" type="image/png" sizes="32x32" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/favicon-32x32.png"><link data-n-head="ssr" rel="icon" type="image/png" sizes="16x16" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/favicon-16x16.png"><link data-n-head="ssr" rel="mask-icon" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/safari-pinned-tab.svg" color="#1E80FF"><link data-n-head="ssr" rel="manifest" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/site.webmanifest"><link data-n-head="ssr" rel="search" title="掘金" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/search.xml" type="application/opensearchdescription+xml"><link data-n-head="ssr" rel="stylesheet" href="./iOS 编译原理与应用 - 掘金_files/bytedesign.min.css"><link data-n-head="ssr" rel="canonical" href="https://juejin.cn/post/6844903896230395918"><script data-n-head="ssr" type="text/javascript" src="./iOS 编译原理与应用 - 掘金_files/acrawler.js"></script><script data-n-head="ssr" vmid="slardar" type="text/javascript" crossorigin="anonymous">;(function (w, d, u, b, n, pc, ga, ae, po, s, p, e, t, pp) {pc = 'precollect';ga = 'getAttribute';ae = 'addEventListener';po = 'PerformanceObserver';s = function (m) {p = [].slice.call(arguments);p.push(Date.now(), location.href);(m == pc ? s.p.a : s.q).push(p)};s.q = [];s.p = { a: [] };w[n] = s;e = document.createElement('script');e.src = u + '?bid=' + b + '&globalName=' + n;e.crossOrigin = u.indexOf('sdk-web') > 0 ? 'anonymous' : 'use-credentials';d.getElementsByTagName('head')[0].appendChild(e);if (ae in w) {s.pcErr = function (e) {e = e || w.event;t = e.target || e.srcElement;if (t instanceof Element || t instanceof HTMLElement) {if (t[ga]('integrity')) {w[n](pc, 'sri', t[ga]('href') || t[ga]('src'))} else {w[n](pc, 'st', { tagName: t.tagName, url: t[ga]('href') || t[ga]('src') })}} else {w[n](pc, 'err', e.error || e.message)}};s.pcRej = function (e) {e = e || w.event;w[n](pc, 'err', e.reason || (e.detail && e.detail.reason))};w[ae]('error', s.pcErr, true);w[ae]('unhandledrejection', s.pcRej, true);};if('PerformanceLongTaskTiming' in w) {pp = s.pp = { entries: [] };pp.observer = new PerformanceObserver(function (l) {pp.entries = pp.entries.concat(l.getEntries())});pp.observer.observe({ entryTypes: ['longtask', 'largest-contentful-paint','layout-shift'] })}})(window,document,'https://lf3-short.ibytedapm.com/slardar/fe/sdk-web/browser.cn.js','2608','SlardarWeb')</script><script src="./iOS 编译原理与应用 - 掘金_files/browser.cn.js" crossorigin="anonymous"></script><script data-n-head="ssr" type="text/javascript" src="./iOS 编译原理与应用 - 掘金_files/imageReport.js"></script><script data-n-head="ssr" type="application/ld+json">[{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://juejin.cn/post/6844903896230395918"},"headline":"iOS 编译原理与应用","description":"在Xcode中，当我们按下command + B进行build操作后发生了那些事情，这是一个将代码编译的过程。Xcode现在使用的编译器是LLVM，Xcode 早期使用的是GCC编译器，由于一些历史原因，从Xcode5开始正式过渡到使用LLVM编译器。下文将着重介绍LLVM。 …","image":["https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/7/24/16c232419ecaaecc~tplv-t2oaga2asx-image.image"],"author":{"@type":"Organization","name":"民生Fintech"},"publisher":{"@type":"Organization","name":"掘金","logo":{"@type":"ImageObject","url":"//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/e08da34488b114bd4c665ba2fa520a31.svg"}},"datePublished":"2019年07月24日","dateModified":"2020年09月13日"},{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","name":"稀土掘金","position":1,"item":"https://juejin.cn"},{"@type":"ListItem","name":"iOS","position":2,"item":"https://juejin.cn/ios"},{"@type":"ListItem","name":"文章","position":3}]}]</script><link rel="preload" href="./iOS 编译原理与应用 - 掘金_files/6ccc1bf.js" as="script"><link rel="preload" href="./iOS 编译原理与应用 - 掘金_files/83d184c.js" as="script"><link rel="preload" href="./iOS 编译原理与应用 - 掘金_files/6a0af43.js" as="script"><link rel="preload" href="./iOS 编译原理与应用 - 掘金_files/app.c95707c.css" as="style"><link rel="preload" href="./iOS 编译原理与应用 - 掘金_files/6e787e2.js" as="script"><link rel="preload" href="./iOS 编译原理与应用 - 掘金_files/default.c3d25dd.css" as="style"><link rel="preload" href="./iOS 编译原理与应用 - 掘金_files/c68ae6a.js" as="script"><link rel="preload" href="./iOS 编译原理与应用 - 掘金_files/52.39cb9d6.css" as="style"><link rel="preload" href="./iOS 编译原理与应用 - 掘金_files/607e9aa.js" as="script"><link rel="preload" href="./iOS 编译原理与应用 - 掘金_files/197.8de3951.css" as="style"><link rel="preload" href="./iOS 编译原理与应用 - 掘金_files/fe8610f.js" as="script"><link rel="preload" href="./iOS 编译原理与应用 - 掘金_files/198.adcadde.css" as="style"><link rel="preload" href="./iOS 编译原理与应用 - 掘金_files/37aab1f.js" as="script"><link rel="stylesheet" href="./iOS 编译原理与应用 - 掘金_files/app.c95707c.css"><link rel="stylesheet" href="./iOS 编译原理与应用 - 掘金_files/default.c3d25dd.css"><link rel="stylesheet" href="./iOS 编译原理与应用 - 掘金_files/52.39cb9d6.css"><link rel="stylesheet" href="./iOS 编译原理与应用 - 掘金_files/197.8de3951.css"><link rel="stylesheet" href="./iOS 编译原理与应用 - 掘金_files/198.adcadde.css">
  <script charset="utf-8" src="./iOS 编译原理与应用 - 掘金_files/3f2c049.js"></script><script charset="utf-8" src="./iOS 编译原理与应用 - 掘金_files/e5d3ec2.js"></script><script charset="utf-8" src="./iOS 编译原理与应用 - 掘金_files/41b8609.js"></script><link rel="preload" as="style" href="./iOS 编译原理与应用 - 掘金_files/4.4ebc7e8.css"><script charset="utf-8" src="./iOS 编译原理与应用 - 掘金_files/929f319.js"></script><link rel="preload" as="style" href="./iOS 编译原理与应用 - 掘金_files/139.9ccface.css"><script charset="utf-8" src="./iOS 编译原理与应用 - 掘金_files/45c0ab1.js"></script><link rel="preload" as="style" href="./iOS 编译原理与应用 - 掘金_files/181.1b801b1.css"><script charset="utf-8" src="./iOS 编译原理与应用 - 掘金_files/37ac484.js"></script><link rel="preload" as="style" href="./iOS 编译原理与应用 - 掘金_files/192.1dc0908.css"><script charset="utf-8" src="./iOS 编译原理与应用 - 掘金_files/7745e43.js"></script><script charset="utf-8" src="./iOS 编译原理与应用 - 掘金_files/452761f.js"></script><link rel="preload" as="style" href="./iOS 编译原理与应用 - 掘金_files/158.cb7fed2.css"><script charset="utf-8" src="./iOS 编译原理与应用 - 掘金_files/a217112.js"></script><script charset="utf-8" src="./iOS 编译原理与应用 - 掘金_files/228a585.js"></script><script charset="utf-8" src="./iOS 编译原理与应用 - 掘金_files/16a9736.js"></script><script charset="utf-8" src="./iOS 编译原理与应用 - 掘金_files/7183dda.js"></script><script charset="utf-8" src="./iOS 编译原理与应用 - 掘金_files/e0132cd.js"></script><script charset="utf-8" src="./iOS 编译原理与应用 - 掘金_files/fea69cf.js"></script><style type="text/css">.code-editor-container{display:block;position:relative;overflow:hidden;box-sizing:border-box;}iframe.code-editor-frame{width:100%;height:100%;border:none;border-radius:8px;box-sizing:border-box;border:0.5px solid rgba(128,128,128,0.4);}</style><script charset="utf-8" src="./iOS 编译原理与应用 - 掘金_files/25dbe16.js"></script><style type="text/css">.medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}</style><script src="./iOS 编译原理与应用 - 掘金_files/common-monitors.1.5.1.js" crossorigin="anonymous"></script><link rel="preload" as="style" href="./iOS 编译原理与应用 - 掘金_files/100.b5554a0.css"><script charset="utf-8" src="./iOS 编译原理与应用 - 掘金_files/c51d9f0.js"></script><link rel="preload" as="style" href="./iOS 编译原理与应用 - 掘金_files/155.cc4a86e.css"><script charset="utf-8" src="./iOS 编译原理与应用 - 掘金_files/385b17a.js"></script><link rel="preload" as="style" href="./iOS 编译原理与应用 - 掘金_files/9.b3ecb8a.css"><script charset="utf-8" src="./iOS 编译原理与应用 - 掘金_files/5a9f17f.js"></script><link rel="preload" as="style" href="./iOS 编译原理与应用 - 掘金_files/88.9843b4c.css"><script charset="utf-8" src="./iOS 编译原理与应用 - 掘金_files/9ba0270.js"></script></head>
  <body data-new-gr-c-s-check-loaded="14.1098.0" data-gr-ext-installed="">
    <div id="__nuxt"><div id="__layout"><div id="juejin"><!----> <div class="view-container" data-v-4b9f9746="" data-v-1c9ebbff=""><div class="main-header-box" data-v-4b9f9746=""><header data-fetch-key="0" class="main-header main-header visible" data-v-ec958a82="" data-v-4b9f9746="" visible="visible"><div class="container" data-v-ec958a82=""><a href="https://juejin.cn/" class="logo" data-v-ec958a82=""><img src="./iOS 编译原理与应用 - 掘金_files/e08da34488b114bd4c665ba2fa520a31.svg" alt="稀土掘金" class="logo-img" data-v-ec958a82=""> <img src="./iOS 编译原理与应用 - 掘金_files/6c61ae65d1c41ae8221a670fa32d05aa.svg" alt="稀土掘金" class="mobile" data-v-ec958a82=""></a> <!----> <!----> <nav role="navigation" class="main-nav" data-v-ec958a82=""><ul class="nav-list" data-v-ec958a82=""><!----> <li class="main-nav-list" data-v-ec958a82=""><div class="phone-show-menu isResourceVisible" data-v-ec958a82=""><span data-v-ec958a82="">首页</span> <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="unfold16-icon" data-v-ec958a82=""><path d="M2.45025 4.82431C2.17422 4.49957 2.40501 4.00049 2.83122 4.00049H9.16878C9.59498 4.00049 9.82578 4.49957 9.54975 4.82431L6.38097 8.55229C6.1813 8.78719 5.8187 8.78719 5.61903 8.55229L2.45025 4.82431Z" data-v-ec958a82=""></path></svg></div> <ul class="phone-hide isResourceVisible" data-v-ec958a82=""><li class="nav-item link-item route-active" data-v-ec958a82=""><a href="https://juejin.cn/" data-v-ec958a82="">首页</a></li> <li class="nav-item link-item activities" data-v-ec958a82=""><a href="https://juejin.cn/pins" data-v-ec958a82=""><span class="text" data-v-ec958a82="">
                  沸点
                  </span></a></li> <li class="nav-item link-item book" data-v-ec958a82=""><a href="https://juejin.cn/course" data-v-ec958a82="">
                课程
                <span data-v-ec958a82="" class="tablead">
                    上新
                  </span></a></li> <li class="nav-item link-item" data-v-ec958a82=""><a href="https://juejin.cn/live" data-v-ec958a82="">直播</a></li> <li class="nav-item link-item" data-v-ec958a82=""><a href="https://juejin.cn/events/all" data-v-ec958a82="">活动</a></li> <li class="nav-item link-item" data-v-ec958a82=""><a href="https://juejin.cn/challenge" data-v-ec958a82="">
                竞赛
                </a></li> <nav class="nav-item link-item" data-v-ec958a82=""><a href="https://detail.youzan.com/show/goods/newest?kdt_id=104340304" target="_blank" rel="nofollow noopener noreferrer" class="nav-item link-item no-border" data-v-ec958a82=""><span data-v-ec958a82="">商城</span></a> <!----></nav> <nav class="nav-item link-item download-icon isResourceVisible" data-v-ec958a82=""><a href="https://juejin.cn/app?utm_source=jj_nav" target="_blank" class="download-app no-border" data-v-ec958a82="">
                APP
              </a> <span data-v-ec958a82="" class="tablead">邀请有礼</span></nav> <nav class="nav-item link-item extension-icon" data-v-ec958a82=""><a href="https://juejin.cn/extension?utm_source=jj_nav" target="_blank" rel="nofollow noopener noreferrer" class="broswer-extension no-border isResourceVisible" data-v-ec958a82=""><span data-v-ec958a82="">插件</span></a></nav> <li tag="li" class="nav-item link-item" data-v-ec958a82=""><a target="_blank" href="https://juejin.cn/vip?utm_source=web_nav" class="activity no-hover special-activity" data-v-ec958a82=""><img data-v-248050e4="" data-v-ec958a82="" src="./iOS 编译原理与应用 - 掘金_files/7482b3ad2cd14edda31f05399c2ae759_tplv-k3u1fbpfcp-no-mark_288_288_288_0.awebp" alt="image" class="lazy" loading="lazy" style="max-width: 115px; vertical-align: middle;"></a></li></ul></li> <ul class="right-side-nav" data-v-ec958a82=""><li class="search-add" data-v-ec958a82=""><ul class="search-add-ul isResourceVisible" data-v-ec958a82=""><li class="nav-item search" data-v-ec958a82=""><form role="search" class="search-form isResourceVisible" data-v-ec958a82=""><input type="search" maxlength="32" placeholder="探索稀土掘金" value="" class="search-input isResourceVisible" data-v-ec958a82=""> <div class="seach-icon-container" data-v-ec958a82=""><img src="./iOS 编译原理与应用 - 掘金_files/1e8ab9a22f0ddc36349f60b38900d0bd.svg" alt="搜索" class="search-icon" data-v-ec958a82=""></div> <div class="typehead" style="display:none;" data-v-ec958a82=""><!----> <div class="title" data-v-ec958a82=""><span data-v-ec958a82="">搜索历史</span> <span class="clear" data-v-ec958a82="">
                        清空
                      </span></div> <div class="list" data-v-ec958a82=""><div data-v-ec958a82="">
                        iOS 图片的优化
                      </div><div data-v-ec958a82="">
                        图片的优化
                      </div></div></div></form></li> <li class="nav-item add creator-item" data-v-ec958a82=""><div class="add-group" data-v-0a54c80a="" data-v-ec958a82=""><svg data-v-0a54c80a="" width="38" height="20" viewBox="0 0 38 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="update-icon"><rect data-v-0a54c80a="" y="1" width="38" height="16" rx="8" fill="#F53F3F"></rect><path data-v-0a54c80a="" d="M7.5 7.93H11.47V9.02H7.5V7.93ZM11.47 9.65V10.71H7.5V9.65H11.47ZM11.47 11.34V12.48C11.47 12.72 11.34 12.84 11.08 12.84C10.75 12.84 10.39 12.82 10.01 12.8L10.19 13.46H11.31C11.87 13.44 12.15 13.19 12.15 12.7V7.3H7.51C7.75 6.93 7.96 6.54 8.16 6.14H13.43V5.44H8.46C8.6 5.09 8.72 4.73 8.84 4.36L8.11 4.27C7.99 4.66 7.84 5.05 7.67 5.44H4.69V6.14H7.34C6.65 7.43 5.68 8.57 4.42 9.57L4.89 10.18C5.61 9.6 6.26 8.95 6.82 8.25V13.48H7.5V11.34H11.47ZM14.72 4.73V5.4H18.64V6.27H15.58V10.23H18.51C18.41 10.75 18.23 11.18 17.99 11.52C17.43 11.23 16.91 10.89 16.44 10.5L15.89 10.88C16.38 11.3 16.92 11.67 17.5 11.99C16.86 12.45 15.84 12.73 14.45 12.84L14.76 13.5C16.35 13.32 17.5 12.94 18.2 12.34C19.69 13.02 21.44 13.41 23.45 13.49L23.63 12.8C21.71 12.74 20.05 12.41 18.65 11.82C18.93 11.42 19.12 10.89 19.24 10.23H22.46V6.27H19.36V5.4H23.29V4.73H14.72ZM21.75 9.6H19.33L19.36 8.89V8.54H21.75V9.6ZM18.61 9.6H16.29V8.54H18.64V8.89C18.64 9.13 18.63 9.37 18.61 9.6ZM16.29 7.94V6.89H18.64V7.94H16.29ZM19.36 6.89H21.75V7.94H19.36V6.89ZM32.94 4.43C31.97 4.85 30.88 5.08 29.67 5.1V9.38C29.62 10.9 29.3 12.09 28.71 12.95L29.22 13.49C29.94 12.47 30.32 11.1 30.37 9.38V8.19H31.85V13.53H32.56V8.19H33.6V7.5H30.37V5.68C31.45 5.62 32.42 5.41 33.3 5.07L32.94 4.43ZM24.61 5.2V5.86H29.12V5.2H27.23C27.09 4.84 26.95 4.51 26.8 4.21L26.06 4.33C26.23 4.59 26.38 4.88 26.52 5.2H24.61ZM24.51 7.47V8.12H26.53V9.24H24.67V9.9H26.53V12.56C26.53 12.8 26.4 12.92 26.14 12.92C26 12.92 25.85 12.9 25.69 12.87L25.84 13.54H26.38C26.96 13.54 27.25 13.27 27.25 12.73V9.9H29.01V9.24H27.25V8.12H29.18V7.47H28.05C28.24 7.13 28.41 6.74 28.57 6.31L27.92 6.09C27.77 6.57 27.6 7.03 27.4 7.47H26.3C26.14 6.93 25.96 6.48 25.77 6.11L25.13 6.34C25.33 6.69 25.51 7.07 25.66 7.47H24.51ZM25.37 10.44C25.15 11.32 24.81 12.12 24.34 12.84L24.94 13.22C25.4 12.47 25.77 11.59 26.03 10.58L25.37 10.44ZM28.24 10.37L27.64 10.53C27.92 11.13 28.15 11.75 28.34 12.38L28.94 12.15C28.78 11.61 28.54 11.02 28.24 10.37Z" fill="white"></path><path data-v-0a54c80a="" d="M18.8284 14L21.6568 16.8284L19.1112 19.374C18.955 19.5302 18.7017 19.5302 18.5455 19.374L15.9999 16.8284L18.8284 14Z" fill="#F53F3F"></path></svg> <button class="add-btn" data-v-0a54c80a="">
    创作者中心
  </button> <div class="more" data-v-0a54c80a=""><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="unfold12-icon" data-v-0a54c80a=""><path d="M2.45025 4.82383C2.17422 4.49908 2.40501 4 2.83122 4H9.16878C9.59499 4 9.82578 4.49908 9.54975 4.82382L6.38097 8.5518C6.1813 8.7867 5.8187 8.7867 5.61903 8.5518L2.45025 4.82383Z" fill="white" data-v-0a54c80a=""></path></svg></div> <ul class="more-list" data-v-0a54c80a=""><li class="item" data-v-0a54c80a=""><span class="icon write-article" data-v-0a54c80a="">写文章</span></li><li class="item" data-v-0a54c80a=""><span class="icon issue-points" data-v-0a54c80a="">发沸点</span></li><li class="item" data-v-0a54c80a=""><span class="icon write-note" data-v-0a54c80a="">写笔记</span></li><li class="item" data-v-0a54c80a=""><span class="icon create-jcode" data-v-0a54c80a="">写代码</span></li><li class="item" data-v-0a54c80a=""><span class="icon drafts" data-v-0a54c80a="">草稿箱</span></li></ul> <!----></div></li></ul></li> <!----> <li class="nav-item vip-entry" data-v-ec958a82=""><div class="vip-title" data-v-ec958a82=""><div class="vip-entry-img" data-v-ec958a82=""><img src="./iOS 编译原理与应用 - 掘金_files/24127194d5b158d7eaf8f09a256c5d01.svg" alt="vip" class="vip-img" data-v-ec958a82=""> </div> <div class="vip-words" data-v-ec958a82="">会员</div></div></li> <li class="nav-item notification" data-v-ec958a82=""><a class="app-link notification-a" data-v-ec958a82="" href="https://juejin.cn/notification"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="notification-icon" data-v-ec958a82=""><path d="M6.01132 10.2856C6.28115 6.54234 8.68619 4.28564 11.9999 4.28564C15.3136 4.28564 17.7186 6.54234 17.9885 10.2856C18.1219 12.1363 18.4093 13.708 19.9473 15.8848C20.1889 16.2267 19.953 16.7142 19.5343 16.7142H4.46546C4.04679 16.7142 3.81092 16.2267 4.05252 15.8848C5.59053 13.708 5.87793 12.1363 6.01132 10.2856Z" stroke-width="1.5" stroke-linecap="round" data-v-ec958a82=""></path><path d="M11.9573 3.21436V4.28578" stroke-width="3" stroke-linecap="round" data-v-ec958a82=""></path><path d="M9.57495 18.8569C9.92795 19.8557 10.8804 20.5712 12.0001 20.5712C13.1197 20.5712 14.0722 19.8557 14.4252 18.8569H9.57495Z" stroke-linecap="round" stroke-linejoin="round" data-v-ec958a82=""></path></svg> <!----></a> <ul class="menu-list notification-dropdown-menu" data-v-4e288a04="" data-v-ec958a82=""><li class="menu-item" data-v-4e288a04=""><a href="https://juejin.cn/notification" class="item-link" data-v-4e288a04=""><span class="item-name" data-v-4e288a04="">评论</span> <!----></a></li><li class="menu-item" data-v-4e288a04=""><a href="https://juejin.cn/notification/digg" class="item-link" data-v-4e288a04=""><span class="item-name" data-v-4e288a04="">点赞</span> <!----></a></li><li class="menu-item" data-v-4e288a04=""><a href="https://juejin.cn/notification/follow" class="item-link" data-v-4e288a04=""><span class="item-name" data-v-4e288a04="">关注</span> <!----></a></li><li class="menu-item" data-v-4e288a04=""><a href="https://juejin.cn/notification/im" class="item-link" data-v-4e288a04=""><span class="item-name" data-v-4e288a04="">私信</span> <!----></a></li><li class="menu-item" data-v-4e288a04=""><a href="https://juejin.cn/notification/system" class="item-link" data-v-4e288a04=""><span class="item-name" data-v-4e288a04="">系统消息</span> <!----></a></li></ul></li>  <li class="nav-item menu" data-v-ec958a82=""><div class="avatar-wrapper" data-v-ec958a82=""><img src="./iOS 编译原理与应用 - 掘金_files/3044413937_100x100.awebp" alt="Leon0206的头像" class="lazy avatar avatar immediate" data-v-248050e4="" data-v-0b45085c="" data-v-ec958a82="" loading="lazy"> <!----></div> <!----></li> <!----></ul></ul></nav></div> <!----></header></div>  <main class="container main-container" style="max-width:1140px;" data-v-4b9f9746=""><div class="view column-view" data-v-4b9f9746="" data-v-1c9ebbff=""><div class="main-area article-area" data-v-4b9f9746="" data-v-1c9ebbff=""><article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="6844903896230395918" data-draft-id="6845076386260975623" data-original-type="0" class="article" data-v-1c9ebbff="" data-v-4b9f9746=""><meta itemprop="url" content="https://juejin.im/post/6844903896230395918"> <meta itemprop="headline" content="iOS 编译原理与应用"> <meta itemprop="keywords" content="编译原理"> <meta itemprop="datePublished" content="2019-07-24T08:43:51.000Z"> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="民生Fintech"> <meta itemprop="url" content="https://juejin.cn/user/501033033824039"></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="掘金"> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"> <meta itemprop="width" content="180"> <meta itemprop="height" content="180"></div></div> <h1 class="article-title" data-v-1c9ebbff="">
            iOS 编译原理与应用
            <!----></h1> <div class="author-info-block" data-v-1c9ebbff=""><a href="https://juejin.cn/user/501033033824039" target="_blank" rel="" class="avatar-link" data-v-1c9ebbff=""><img loading="eager" src="./iOS 编译原理与应用 - 掘金_files/16ad978742e404ba_tplv-t2oaga2asx-no-mark_100_100_100_100.awebp" alt="" class="lazy avatar avatar" data-v-248050e4="" data-v-0b45085c="" data-v-1c9ebbff=""></a> <div class="author-info-box" data-v-1c9ebbff=""><div class="author-name" data-v-1c9ebbff=""><a href="https://juejin.cn/user/501033033824039" target="_blank" rel="" class="username username ellipsis" data-v-68a20f0a="" data-v-1c9ebbff=""><span class="name" style="max-width:128px;" data-v-68a20f0a="">
    民生Fintech
  </span> <span blank="true" class="rank" data-v-3c1a13dc="" data-v-68a20f0a=""><img src="./iOS 编译原理与应用 - 掘金_files/05be64d75fee4dbdb290ba23afd21fcf_tplv-k3u1fbpfcp-no-mark_0_0_0_0.awebp" alt="lv-4" title="创作等级" class="lazy" style="aspect-ratio:NaN;" data-v-248050e4="" data-v-3c1a13dc="" loading="lazy"></span> <!----> <!----> </a> <!----></div> <div class="meta-box" data-v-1c9ebbff=""><time datetime="2019-07-24T08:43:51.000Z" title="Wed Jul 24 2019 16:43:51 GMT+0800 (China Standard Time)" class="time" data-v-1c9ebbff="">
                    2019年07月24日 16:43
                  </time> <span class="views-count" data-v-1c9ebbff="">
                    ·&nbsp;&nbsp;阅读 5331
                  </span> <!----></div></div> <button class="follow-button follow" data-v-0ed911bc="" data-v-1c9ebbff=""><span class="icon icon-follow" data-v-0ed911bc=""></span> <span data-text="取消关注" class="text" data-v-0ed911bc="">关注</span></button></div> <!----> <img loading="eager" src="./iOS 编译原理与应用 - 掘金_files/16c232419ecaaecc_tplv-t2oaga2asx-zoom-crop-mark_1890_1890_1890_1064.awebp" alt="iOS 编译原理与应用" class="lazy article-hero" data-v-248050e4="" data-v-1c9ebbff=""> <!----> <!----> <div itemprop="articleBody" class="article-content" data-v-1c9ebbff=""><div class="markdown-body cache html"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre>code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote>p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><h1 data-id="heading-0">引言</h1>
<p>在Xcode中，当我们按下command + B进行build操作后发生了那些事情，这是一个将代码编译的过程。Xcode现在使用的编译器是LLVM，Xcode 早期使用的是GCC编译器，由于一些历史原因，从Xcode5开始正式过渡到使用LLVM编译器。下文将着重介绍LLVM。</p>
<h1 data-id="heading-1">编译原理</h1>
<h2 data-id="heading-2">LLVM简介</h2>
<p></p><figure><img src="./iOS 编译原理与应用 - 掘金_files/16c22fea55748d58_tplv-t2oaga2asx-zoom-in-crop-mark_4536_0_0_0.image" loading="lazy" class="medium-zoom-image"><figcaption></figcaption></figure><p></p>
<ul>
<li>
<p>LLVM项目是模块化、可重用的编译器以及工具链技术的集合。</p>
</li>
<li>
<p>美国计算机协会（ACM）将其 2012 年软件系统奖颁给了LLVM，之前曾获得此奖项的软件和技术包括：Java、Apache、Mosaic、the World Wide Web、SmallTalk、UNIX、Eclipse等等。</p>
</li>
<li>
<p>LLVM项目的发展起源于2000年伊利诺伊大学厄巴纳-香槟分校维克拉姆·艾夫（Vikram Adve）与克里斯·拉特纳（Chris Lattner）的研究，他们想要为所有静态及动态语言创造出动态的编译技术。LLVM是以BSD授权来发展的开源软件。2005年，苹果电脑雇用了克里斯·拉特纳及他的团队为苹果电脑开发应用程序系统，LLVM为现今Mac OS X及iOS开发工具的一部分。</p>
</li>
<li>
<p>LLVM的命名最早源自于底层虚拟机（Low Level Virtual Machine）的首字母缩写，由于这个项目的范围并不局限于创建一个虚拟机，这个缩写导致了广泛的疑惑。官方描述如下：The name “LLVM” itself is not an acronym；it is the full name of the project。LLVM这个名称并不是首字母缩略词，它是项目的全名。</p>
</li>
<li>
<p>LLVM开始成长之后，成为众多编译工具及低级工具技术的统称，使得这个名字变得更不贴切，开发者因而决定放弃这个缩写的意涵，现今LLVM已单纯成为一个品牌，适用于LLVM下的所有项目，包含LLVM中介码（LLVM IR）、LLVM除错工具、LLVM C++标准库等。</p>
</li>
<li>
<p>目前NDK/Xcode均采用LLVM作为默认的编译器。</p>
</li>
</ul>
<h2 data-id="heading-3">传统的编译器架构</h2>
<p></p><figure><img src="./iOS 编译原理与应用 - 掘金_files/16c2301ada5faae3_tplv-t2oaga2asx-zoom-in-crop-mark_4536_0_0_0.image" loading="lazy" class="medium-zoom-image"><figcaption></figcaption></figure><p></p>
<ul>
<li>Frontend：前端，对源码做词法分析、语法分析、语义分析、生成中间代码</li>
<li>Optimizer：优化器，用于中间代码优化</li>
<li>Backend：后端，用于生成机器码</li>
</ul>
<h2 data-id="heading-4">LLVM架构</h2>
<p></p><figure><img src="./iOS 编译原理与应用 - 掘金_files/16c230372fc40295_tplv-t2oaga2asx-zoom-in-crop-mark_4536_0_0_0.image" loading="lazy" class="medium-zoom-image"><figcaption></figcaption></figure><p></p>
<ul>
<li>
<p>前端将各种类型的源代码编译为中间代码，也就是bitcode，在LLVM体系内，不同的语言有不同的编译器前端，常见的如clang负责 c/c++/oc的编译，flang负责fortran的编译，swiftc负责swift的编译等等。</p>
</li>
<li>
<p>不同的前后端使用统一的中间代码LLVM Intermediate Representation(LLVM IR)。</p>
</li>
<li>
<p>优化阶段是一个通用的阶段，针对的是统一的LLVM IR，无论是新的编程语言，还是支持新的硬件设备，都不需要对优化阶段做修改，具体是对bitcode进行各种类型的优化，将bitcode代码进行一些逻辑的转换，使得代码效率更高，体积更小，比如DeadStrip/SimplifyCFG。</p>
</li>
<li>
<p>后端，也叫CodeGenerator，负责把优化后的bitcode编译为指定目标架构的机器码，比如 X86Backend负责把bitcode编译为x86指令集的机器码。</p>
</li>
<li>
<p>GCC相比之下，前后端耦合在了一起。所以，GCC支持一门新的语言，或是为了支持一个新的平台，就变得异常困难。</p>
</li>
<li>
<p>LLVM现在被作为实现各种静态和运行时编译语言通用基础架构（GCC 家族、Java、.Net、Python、Ruby、Scheme、Haskell、D等）。</p>
</li>
<li>
<p>LLVM体系中，不同语言源代码将会被转化为统一的bitcode格式，三个模块相互独立，可以充分复用。比如，如果开发一门新的语言，只要制造一个该语言的前端，将源码编译为bitcode，优化和后端不用管。同理，如果新的芯片架构问世，只需基于LLVM重新编写一套目标平台的后端即可。</p>
</li>
</ul>
<h2 data-id="heading-5">Clang</h2>
<ul>
<li>
<p>LLVM项目的一个子项目。</p>
</li>
<li>
<p>基于LLVM架构的C/C++/Objective-C/Objective-C++编译器前端。</p>
</li>
<li>
<p>相比于 GCC，Clang具有如下优点：</p>
</li>
<li>
<p>编译速度快：在某些平台上，Clang的编译速度显著的快过GCC（Debug 模式下编译 OC 速度比 GCC 快 3 倍）；</p>
</li>
<li>
<p>占用内存小：Clang生成的AST所占用的内存是GCC的五分之一左右；</p>
</li>
<li>
<p>模块化设计：Clang采用基于库的模块化设计，易于IDE集成及其他用途的重用；</p>
</li>
<li>
<p>诊断信息可读性强：在编译过程中，Clang创建并保留了大量详细的元数据（metadata），有利于调试和错误报告；</p>
</li>
<li>
<p>设计清晰简单，容易理解，易于扩展增强。</p>
</li>
</ul>
<p>客观的说GCC也有很多优点：例如支持多平台，基于C无需 C++编译器即可编译。这个优点到苹果那里反而成了缺点，苹果需要的是快。</p>
<h2 data-id="heading-6">Clang与LLVM</h2>
<p></p><figure><img src="./iOS 编译原理与应用 - 掘金_files/16c2308b0b439c74_tplv-t2oaga2asx-zoom-in-crop-mark_4536_0_0_0.image" loading="lazy" class="medium-zoom-image"><figcaption></figcaption></figure><p></p>
<ul>
<li>广义的LLVM：整个LLVM架构</li>
<li>狭义的LLVM：LLVM后端（代码优化、目标代码生成等）</li>
</ul>
<p></p><figure><img src="./iOS 编译原理与应用 - 掘金_files/16c2308efb88f492_tplv-t2oaga2asx-zoom-in-crop-mark_4536_0_0_0.image" loading="lazy" class="medium-zoom-image"><figcaption></figcaption></figure><p></p>
<h2 data-id="heading-7">OC源文件的编译过程</h2>
<ul>
<li>命令行查看编译的过程：</li>
</ul>
<pre><code lang="arduino" class="hljs language-arduino copyable">clang -ccc-print-phases main.m
<span class="copy-code-btn">复制代码</span></code></pre><p></p><figure><img src="./iOS 编译原理与应用 - 掘金_files/16c2309eafbce5c5_tplv-t2oaga2asx-zoom-in-crop-mark_4536_0_0_0.image" loading="lazy" class="medium-zoom-image"><figcaption></figcaption></figure><p></p>
<ul>
<li>查看preprocessor（预处理）的结果：</li>
</ul>
<pre><code lang="bash" class="hljs language-bash copyable">clang -E main.m -F /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks 
<span class="copy-code-btn">复制代码</span></code></pre><p></p><figure><img src="./iOS 编译原理与应用 - 掘金_files/16c230a84fef3488_tplv-t2oaga2asx-zoom-in-crop-mark_4536_0_0_0.image" loading="lazy" class="medium-zoom-image"><figcaption></figcaption></figure><p></p>
<h3 data-id="heading-8">1. 词法分析</h3>
<p>词法分析，生成Token</p>
<pre><code lang="arduino" class="hljs language-arduino copyable"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">sum</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b)</span></span>{
    <span class="hljs-type">int</span> c = a + b;
    <span class="hljs-keyword">return</span> c;
}
<span class="copy-code-btn">复制代码</span></code></pre><pre><code lang="css" class="hljs language-css copyable">clang -fmodules -E -Xclang -dump-tokens <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.m</span>
<span class="copy-code-btn">复制代码</span></code></pre><p></p><figure><img src="./iOS 编译原理与应用 - 掘金_files/16c230bcff1b9eb8_tplv-t2oaga2asx-zoom-in-crop-mark_4536_0_0_0.image" loading="lazy" class="medium-zoom-image"><figcaption></figcaption></figure><p></p>
<p>这个命令的作用是，显示每个Token的类型、值，以及位置。参考该链接，可以看到Clang定义的所有Token类型。
可以分为下面这4类：</p>
<ul>
<li>关键字：语法中的关键字，比如 if、else、while、for 等；</li>
<li>标识符：变量名；</li>
<li>字面量：值、数字、字符串；</li>
<li>特殊符号：加减乘除等符号。</li>
</ul>
<h3 data-id="heading-9">2. 语法分析</h3>
<p>利用上面输出的Token先按照语法组合成语义，生成类似VarDecl这样的节点，然后将这些节点按照层级关系构成抽象语法树（AST）。</p>
<ul>
<li>语法分析，生成语法树（AST，Abstract Syntax Tree）</li>
</ul>
<pre><code lang="css" class="hljs language-css copyable">clang -fmodules -fsyntax-only -Xclang -ast-dump <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.m</span>
<span class="copy-code-btn">复制代码</span></code></pre><p>TranslationUnitDecl是根节点，表示一个编译单元；Decl表示一个声明；Expr表示的是表达式；Literal表示字面量，是一个特殊的Expr；Stmt表示陈述。</p>
<p>除此之外，Clang还有众多种类的节点类型。Clang里，节点主要分成Type类型、Decl声明、Stmt陈述这三种，其他的都是这三种的派生。通过扩展这三类节点，就能够将无限的代码形态用有限的形式来表现出来。</p>
<p></p><figure><img src="./iOS 编译原理与应用 - 掘金_files/16c230e733a442bc_tplv-t2oaga2asx-zoom-in-crop-mark_4536_0_0_0.image" loading="lazy" class="medium-zoom-image"><figcaption></figcaption></figure><p></p>
<p></p><figure><img src="./iOS 编译原理与应用 - 掘金_files/16c230ee06a7b486_tplv-t2oaga2asx-zoom-in-crop-mark_4536_0_0_0.image" loading="lazy" class="medium-zoom-image"><figcaption></figcaption></figure><p></p>
<h3 data-id="heading-10">3. LLVM IR</h3>
<p>LLVM IR有3种表示形式，但本质上是等价的。</p>
<ul>
<li>text：便于阅读的文本格式，类似于汇编语言，拓展名 .ll</li>
</ul>
<pre><code lang="css" class="hljs language-css copyable">clang -S -emit-llvm <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.m</span>
<span class="copy-code-btn">复制代码</span></code></pre><ul>
<li>memory：内存格式</li>
<li>bitcode：二进制格式，拓展名 .bc</li>
</ul>
<pre><code lang="css" class="hljs language-css copyable">clang -c -emit-llvm <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.m</span>
<span class="copy-code-btn">复制代码</span></code></pre><h3 data-id="heading-11">4. IR基本语法</h3>
<p>.ll 文件部分内容，如下：</p>
<p></p><figure><img src="./iOS 编译原理与应用 - 掘金_files/16c2310ae9387652_tplv-t2oaga2asx-zoom-in-crop-mark_4536_0_0_0.image" loading="lazy" class="medium-zoom-image"><figcaption></figcaption></figure><p></p>
<ul>
<li>注释以分号 ; 开头</li>
<li>全局标识符以@开头，局部标示符以%开头</li>
<li>alloca，在当前函数栈帧中分配内存</li>
<li>i32 ，32bit，4 个字节</li>
<li>align，内存对齐</li>
<li>store，写入数据</li>
<li>load，读取数据</li>
</ul>
<h1 data-id="heading-12">应用与实践</h1>
<p>基于LLVM 、Clang可以做很多实践，如下：</p>
<ul>
<li>LibClang、LibTooling、Clang Plugin</li>
</ul>
<p>官方参考：</p>
<p><a target="_blank" href="https://link.juejin.cn/?target=https%3A%2F%2Fclang.llvm.org%2Fdocs%2FTooling.html" title="https://clang.llvm.org/docs/Tooling.html" ref="nofollow noopener noreferrer">clang.llvm.org/docs/Toolin…</a></p>
<p>应用：语法树分析、语言转换等</p>
<ul>
<li>
<p>OCLint、Clang静态分析器（Clang Static Analyzer）</p>
</li>
<li>
<p>Clang插件开发</p>
</li>
</ul>
<p>官方参考：</p>
<p><a target="_blank" href="https://link.juejin.cn/?target=https%3A%2F%2Fclang.llvm.org%2Fdocs%2FClangPlugins.html" title="https://clang.llvm.org/docs/ClangPlugins.html" ref="nofollow noopener noreferrer">clang.llvm.org/docs/ClangP…</a></p>
<p><a target="_blank" href="https://link.juejin.cn/?target=https%3A%2F%2Fclang.llvm.org%2Fdocs%2FExternalClangExamples.html" title="https://clang.llvm.org/docs/ExternalClangExamples.html" ref="nofollow noopener noreferrer">clang.llvm.org/docs/Extern…</a></p>
<p><a target="_blank" href="https://link.juejin.cn/?target=https%3A%2F%2Fclang.llvm.org%2Fdocs%2FRAVFrontendAction.html" title="https://clang.llvm.org/docs/RAVFrontendAction.html" ref="nofollow noopener noreferrer">clang.llvm.org/docs/RAVFro…</a></p>
<p>应用：代码检查（命名规范、代码规范）等</p>
<ul>
<li>Pass开发</li>
</ul>
<p>官方参考：</p>
<p><a target="_blank" href="https://link.juejin.cn/?target=https%3A%2F%2Fllvm.org%2Fdocs%2FWritingAnLLVMPass.html" title="https://llvm.org/docs/WritingAnLLVMPass.html" ref="nofollow noopener noreferrer">llvm.org/docs/Writin…</a></p>
<p>应用：中间代码优化、代码混淆等</p>
<ul>
<li>开发新的编程语言</li>
</ul>
<p><a target="_blank" href="https://link.juejin.cn/?target=https%3A%2F%2Fllvm-tutorial-cn.readthedocs.io%2Fen%2Flatest%2Findex.html" title="https://llvm-tutorial-cn.readthedocs.io/en/latest/index.html" ref="nofollow noopener noreferrer">llvm-tutorial-cn.readthedocs.io/en/latest/i…</a></p>
<p><a target="_blank" href="https://link.juejin.cn/?target=https%3A%2F%2Fkaleidoscope-llvm-tutorial-zh-cn.readthedocs.io%2Fzh_CN%2Flatest%2F" title="https://kaleidoscope-llvm-tutorial-zh-cn.readthedocs.io/zh_CN/latest/" ref="nofollow noopener noreferrer">kaleidoscope-llvm-tutorial-zh-cn.readthedocs.io/zh_CN/lates…</a></p>
<h2 data-id="heading-13">编写及运行Clang插件</h2>
<p>Clang使用模块化设计，可以将自身功能以库的方式来供上层应用来调用。比如，编码规范检查、IDE 中的语法高亮、语法检查等上层应用，都是使用Clang库的接口开发出来的。Clang有三个接口库可以供上层应用调用，分别是LibClang、Clang Plugin、LibTooling。</p>
<p>LibClang为了兼容更多Clang版本，相比Clang少了很多功能；Clang Plugin和LibTooling具备Clang 的全量能力。Clang Plugin编写代码的方式，和LibTooling几乎一样，不同的是Clang Plugin还能够控制编译过程，可以加warning或者直接中断编译提示错误。另外，编写好的LibTooling能够非常方便地转成Clang Plugin。
因此，Clang Plugin在功能上是最全的。</p>
<h3 data-id="heading-14">1. 源码下载</h3>
<p>下载 LLVM Project</p>
<pre><code lang="bash" class="hljs language-bash copyable"> git <span class="hljs-built_in">clone</span> https://github.com/llvm/llvm-project.git
<span class="copy-code-btn">复制代码</span></code></pre><p></p><figure><img src="./iOS 编译原理与应用 - 掘金_files/16c2316ccda46f08_tplv-t2oaga2asx-zoom-in-crop-mark_4536_0_0_0.image" loading="lazy" class="medium-zoom-image"><figcaption></figcaption></figure><p></p>
<p>上图中，clang目录就是类C语言编译器的代码目录；llvm目录的代码包含两部分，一部分是对源码进行平台 无关优化的优化器代码，另一部分是生成平台相关汇编代码的生成器代码；lldb目录里是调试器的代码；lld里是链接器代码。</p>
<h3 data-id="heading-15">2. 源码编译</h3>
<p>macOS属于类UNIX平台，因此既可以生成Makefile文件来编译，也可以生成Xcode工程来编译。</p>
<p>进入llvm-project文件目录，生成Makefile文件：</p>
<ul>
<li>在llvm同级目录下新建一个llvm_make目录</li>
<li>在llvm_make中利用CMake进行编译</li>
</ul>
<pre><code lang="ini" class="hljs language-ini copyable">cmake <span class="hljs-attr">-DLLVM_ENABLE_PROJECTS</span>=clang -G <span class="hljs-string">"Unix Makefiles"</span> ../llvm
<span class="copy-code-btn">复制代码</span></code></pre><p>生成Xcode工程，可以使用如下命令</p>
<ul>
<li>安装CMake工具</li>
<li>在llvm同级目录下新建一个llvm_xcode目录</li>
<li>在llvm_xcode中利用CMake进行编译</li>
</ul>
<pre><code lang="ini" class="hljs language-ini copyable">cmake -G Xcode <span class="hljs-attr">-DLLVM_ENABLE_PROJECTS</span>=clang ../llvm
<span class="copy-code-btn">复制代码</span></code></pre><p>想要更多地了解CMake的语法和功能，你可以查看官方文档。</p>
<p>执行cmake命令时，你可能会遇到下面的提示：</p>
<pre><code lang="swift" class="hljs language-swift copyable"><span class="hljs-operator">--</span> <span class="hljs-type">The</span> <span class="hljs-type">C</span> compiler identification <span class="hljs-keyword">is</span> unknown <span class="hljs-operator">--</span> <span class="hljs-type">The</span> <span class="hljs-type">CXX</span> compiler identification <span class="hljs-keyword">is</span> unknown <span class="hljs-type">CMake</span> <span class="hljs-type">Error</span> at <span class="hljs-type">CMakeLists</span>.txt:<span class="hljs-number">39</span> (project):

<span class="hljs-type">No</span> <span class="hljs-type">CMAKE_C_COMPILER</span> could be found. 

<span class="hljs-type">CMake</span> <span class="hljs-type">Error</span> at <span class="hljs-type">CMakeLists</span>.txt:<span class="hljs-number">39</span> (project):

<span class="hljs-type">No</span> <span class="hljs-type">CMAKE_CXX_COMPILER</span> could be found.
<span class="copy-code-btn">复制代码</span></code></pre><p>这表明cmake没有找到代码编译器的命令行工具。分两种情况处理：</p>
<ul>
<li>如果没有安装Xcode Commandline Tools的话，可以执行如下命令安装：</li>
</ul>
<pre><code lang="lua" class="hljs language-lua copyable">xcode-<span class="hljs-built_in">select</span> <span class="hljs-comment">--install</span>
<span class="copy-code-btn">复制代码</span></code></pre><ul>
<li>如果你已经安装了Xcode Commandline Tools的话，直接reset即可</li>
</ul>
<pre><code lang="lua" class="hljs language-lua copyable">sudo xcode-<span class="hljs-built_in">select</span> <span class="hljs-comment">--reset</span>
<span class="copy-code-btn">复制代码</span></code></pre><p>生成Xcode工程后，打开生成的LLVM.xcodeproj文件，选择Automatically Create Schemes。</p>
<p>生成Xcode项目后再利用Xcode进行编译，但是速度很慢</p>
<p></p><figure><img src="./iOS 编译原理与应用 - 掘金_files/16c231a211d11607_tplv-t2oaga2asx-zoom-in-crop-mark_4536_0_0_0.image" loading="lazy" class="medium-zoom-image"><figcaption></figcaption></figure><p></p>
<h3 data-id="heading-16">3. 插件目录</h3>
<ul>
<li>在clang/tools源码目录下新建一个插件目录，比如叫做mskj_plugin，添加MSKJPlugin.cpp文件和 CMakeLists.txt文件。其中，CMake编译需要通过CMakeLists.txt文件来指导编译，cpp是源文件。</li>
</ul>
<p></p><figure><img src="./iOS 编译原理与应用 - 掘金_files/16c231ae4015671f_tplv-t2oaga2asx-zoom-in-crop-mark_4536_0_0_0.image" loading="lazy" class="medium-zoom-image"><figcaption></figcaption></figure><p></p>
<ul>
<li>在clang/tools目录下的CMakeList.txt文件当中最后一行加入：</li>
</ul>
<pre><code lang="scss" class="hljs language-scss copyable"><span class="hljs-built_in">add_clang_subdirectory</span>(mskj-plugin)
<span class="copy-code-btn">复制代码</span></code></pre><ul>
<li>使用如下代码编写clang/tools/mskj-plugin/CMakeLists.txt文件，来定制编译流程：</li>
</ul>
<pre><code lang="scss" class="hljs language-scss copyable"><span class="hljs-built_in">add_llvm_library</span>(MSKJPlugin MODULE MSKJPlugin.cpp PLUGIN_TOOL clang)
<span class="copy-code-btn">复制代码</span></code></pre><p>MSKJPlugin是插件名，MSKJPlugin.cpp是源代码文件，这段代码是指，要将Clang插件代码集成到LLVM的Xcode工程中，并作为一个模块进行编写调试。添加了Clang插件的目录和文件后，再次用cmake命令生成Xcode工程，里面就能够集成MSKJPlugin.cpp文件。</p>
<h3 data-id="heading-17">4. 编写插件源码</h3>
<p>① 编写PluginASTAction代码</p>
<p>由于Clang插件是没有main函数的，入口是PluginASTAction的ParseArgs函数。所以，编写Clang插件还要实现ParseArgs来处理入口参数。代码如下所示：</p>
<pre><code lang="arduino" class="hljs language-arduino copyable"> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MSKJASTAction</span>: <span class="hljs-keyword">public</span> PluginASTAction {
    <span class="hljs-keyword">public</span>:
        <span class="hljs-function">unique_ptr&lt;ASTConsumer&gt; <span class="hljs-title">CreateASTConsumer</span><span class="hljs-params">(CompilerInstance &amp;ci, StringRef iFile)</span> </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">unique_ptr</span>&lt;MSKJASTConsumer&gt; (<span class="hljs-keyword">new</span> <span class="hljs-built_in">MSKJASTConsumer</span>(ci));
        }
        
        <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">ParseArgs</span><span class="hljs-params">(<span class="hljs-type">const</span> CompilerInstance &amp;ci, <span class="hljs-type">const</span> vector&lt;string&gt; &amp;args)</span> </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
    };
<span class="copy-code-btn">复制代码</span></code></pre><p>② 编写ASTConsumer</p>
<p>FrontActions是编写Clang插件的入口，也是一个接口，是基于ASTFrontendAction的抽象基类。FrontActions为接下来基于AST操作的函数提供了一个入口和工作环境。</p>
<p>通过这个接口，你可以编写在编译过程中自定义的操作，具体方式是：通过ASTFrontendAction在 AST上自定义操作，重载CreateASTConsumer函数返回你自己的Consumer，以获取AST上的 ASTConsumer单元。ASTConsumer可以提供很多入口，是一个可以访问AST的抽象基类，可以重载 HandleTopLevelDecl()和 HandleTranslationUnit()两个函数，以接收访问AST时的回调。其中，HandleTopLevelDecl()函数是在访问到全局变量、函数定义这样最上层声明时进行回调，HandleTranslationUnit()函数会在接收每个节点访问时的回调。</p>
<pre><code lang="scss" class="hljs language-scss copyable">class MSKJASTConsumer: public ASTConsumer {
    private:
        MatchFinder matcher;
        MSKJHandler handler;
        
    public:
        MSKJASTConsumer(CompilerInstance &amp;ci) :handler(ci) {
            matcher<span class="hljs-selector-class">.addMatcher</span>(objcInterfaceDecl()<span class="hljs-selector-class">.bind</span>("ObjCInterfaceDecl"), &amp;handler);
        }
        
        void <span class="hljs-built_in">HandleTranslationUnit</span>(ASTContext &amp;context) {
            matcher<span class="hljs-selector-class">.matchAST</span>(context);
        }    
};
<span class="copy-code-btn">复制代码</span></code></pre><p>③ 处理节点</p>
<pre><code lang="ini" class="hljs language-ini copyable"> class MSKJHandler : public MatchFinder::MatchCallback {
    private:
        CompilerInstance &amp;ci<span class="hljs-comment">;</span>
     
    public:
        MSKJHandler(CompilerInstance &amp;ci) :ci(ci) {}
        
        void run(const MatchFinder::MatchResult &amp;Result) {
            if (const ObjCInterfaceDecl *<span class="hljs-attr">decl</span> = Result.Nodes.getNodeAs&lt;ObjCInterfaceDecl&gt;(<span class="hljs-string">"ObjCInterfaceDecl"</span>)) {
                size_t <span class="hljs-attr">pos</span> = decl-&gt;getName().find(<span class="hljs-string">'_'</span>)<span class="hljs-comment">;</span>
                if (pos != StringRef::npos) {
                    DiagnosticsEngine &amp;<span class="hljs-attr">D</span> = ci.getDiagnostics()<span class="hljs-comment">;</span>
                    SourceLocation <span class="hljs-attr">loc</span> = decl-&gt;getLocation().getLocWith<span class="hljs-literal">Off</span>set(pos)<span class="hljs-comment">;</span>
                    D.Report(loc, D.getCustomDiagID(DiagnosticsEngine::Error, "MSKJ：类名中不能带有下划线"))<span class="hljs-comment">;</span>
                }
            }
        }
    }<span class="hljs-comment">;</span>
<span class="copy-code-btn">复制代码</span></code></pre><h3 data-id="heading-18">5. 注册Clang插件</h3>
<p>在Clang插件源码中编写注册代码。编译器会在编译过程中从动态库加载Clang插件。使用FrontendPluginRegistry::Add&lt;&gt;在库中注册插件。注册Clang插件的代码如下：</p>
<pre><code lang="php" class="hljs language-php copyable"><span class="hljs-built_in">static</span> <span class="hljs-title class_">FrontendPluginRegistry</span>::<span class="hljs-variable constant_">Add</span>&lt;<span class="hljs-title class_">MSKJPlugin</span>::<span class="hljs-variable constant_">MSKJASTAction</span>&gt; <span class="hljs-title function_ invoke__">X</span>(<span class="hljs-string">"MSKJPlugin"</span>, <span class="hljs-string">"The MSKJPlugin is my first clang-plugin."</span>);
<span class="copy-code-btn">复制代码</span></code></pre><p>在Clang插件代码的最下面，定义的MSKJPlugin字符串是命令行字符串，供以后调用时使用，The MSKJPlugin is my first clang-plugin是对Clang插件的描述。</p>
<h3 data-id="heading-19">6. 使用clang 插件</h3>
<p>利用CMake命令重新生成Xcode工程，可在Loadable modules下看到MSKJPlugin：</p>
<p></p><figure><img src="./iOS 编译原理与应用 - 掘金_files/16c2321405ed2a03_tplv-t2oaga2asx-zoom-in-crop-mark_4536_0_0_0.image" loading="lazy" class="medium-zoom-image"><figcaption></figcaption></figure><p></p>
<p>选择MSKJPlugin这个target进行编译，编译完会生成一个动态库文件。</p>
<p>LLVM官方有一个完整可用的Clang插件示例，可以帮我们打印出最上层函数的名字。</p>
<p>通过学习这个插件示例，看看如何使用Clang插件。</p>
<p>使用Clang插件可以通过-load命令行选项加载包含插件注册表的动态库，-load命令行会加载已经注册了的所有Clang插件。使用-plugin选项选择要运行的Clang插件。Clang插件的其他参数通过-plugin-arg-来传递。</p>
<p>cc1进程类似一种预处理，这种预处理会发生在编译之前。cc1和Clang driver是两个单独的实体，cc1负责前端预处理，Clang driver则主要负责管理编译任务调度，每个编译任务都会接受cc1前端预处理的参数，然后进行调整。</p>
<p>有两个方法可以让-load 和-plugin等选项到Clang的cc1进程中：</p>
<ul>
<li>直接使用-cc1选项，缺点是要在命令行上指定完整的系统路径配置；</li>
<li>使用-Xclang来为cc1进程添加这些选项。-Xclang参数只运行预处理器，直接将后面参数传递给cc1进程，而不影响clang driver的工作。</li>
</ul>
<p>下面是一个编译Clang插件，然后使用-Xclang加载使用Clang插件的例子：</p>
<pre><code lang="bash" class="hljs language-bash copyable">$ <span class="hljs-built_in">export</span> BD=/path/to/build/directory 
$ (<span class="hljs-built_in">cd</span> <span class="hljs-variable">$BD</span> &amp;&amp; make PrintFunctionNames ) 
$ clang++ -D_GNU_SOURCE -D_DEBUG -D__STDC_CONSTANT_MACROS \
          -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -D_GNU_SOURCE \ 
          -I<span class="hljs-variable">$BD</span>/tools/clang/include -Itools/clang/include -I<span class="hljs-variable">$BD</span>/include -Iinclude \                                        tools/clang/tools/clang-check/ClangCheck.cpp -fsyntax-only \
          -Xclang -load -Xclang <span class="hljs-variable">$BD</span>/lib/PrintFunctionNames.so -Xclang \
          -plugin -Xclang print-fns
<span class="copy-code-btn">复制代码</span></code></pre><p>上面命令中，先设置构建的路径，再通过make命令进行编译生成PrintFunctionNames.so，最后使用clang命令配合-Xclang参数加载使用Clang插件。</p>
<p>你也可以直接使用-cc1参数，但是就需要按照下面的方式来指定完整的文件路径：</p>
<pre><code lang="lua" class="hljs language-lua copyable">$ clang -cc1 -<span class="hljs-built_in">load</span> ../../Debug+Asserts/lib/libPrintFunctionNames.dylib -plugin <span class="hljs-built_in">print</span>-fns some-<span class="hljs-built_in">input</span>-file.c
<span class="copy-code-btn">复制代码</span></code></pre><h3 data-id="heading-20">7. 更多</h3>
<p>实现更复杂的插件功能，可以利用clang的API对语法树进行相应的分析与处理。</p>
<p>关于AST的资料：</p>
<p><a target="_blank" href="https://link.juejin.cn/?target=https%3A%2F%2Fclang.llvm.org%2Fdoxygen%2Fnamespaceclang.html" title="https://clang.llvm.org/doxygen/namespaceclang.html" ref="nofollow noopener noreferrer">clang.llvm.org/doxygen/nam…</a></p>
<p><a target="_blank" href="https://link.juejin.cn/?target=https%3A%2F%2Fclang.llvm.org%2Fdoxygen%2Fclassclang11Decl.html" title="https://clang.llvm.org/doxygen/classclang11Decl.html" ref="nofollow noopener noreferrer">clang.llvm.org/doxygen/cla…</a></p>
<p><a target="_blank" href="https://link.juejin.cn/?target=https%3A%2F%2Fclang.llvm.org%2Fdoxygen%2Fclassclang11Stmt.html" title="https://clang.llvm.org/doxygen/classclang11Stmt.html" ref="nofollow noopener noreferrer">clang.llvm.org/doxygen/cla…</a></p>
<p>Clang插件本身的编写和使用并不复杂，关键是如何更好地应用到工作中，通过Clang插件不光能够检查代 码规范，还能够进行无用代码分析、自动埋点打桩、线下测试分析、方法名混淆等。</p>
<h1 data-id="heading-21">结语</h1>
<p>理解iOS的编译原理，有利于我们更加深层次的理解程序，让我们从底层的角度去看待问题和思考问题的解决方案。</p>
<h1 data-id="heading-22">作者简介</h1>
<p>范冲冲，民生科技有限公司 用户体验技术部 移动金融开发平台开发工程师</p>
<p></p><figure><img src="./iOS 编译原理与应用 - 掘金_files/16cae0d838f2c878_tplv-t2oaga2asx-zoom-in-crop-mark_4536_0_0_0.image" loading="lazy" class="medium-zoom-image"><figcaption></figcaption></figure><p></p>
<p>Thanks!</p>
</div><style>.markdown-body pre,.markdown-body pre>code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style></div></article> <!----> <div class="article-end" data-v-4b9f9746="" data-v-1c9ebbff=""><div class="tag-list-box" data-v-4b9f9746="" data-v-1c9ebbff=""><div class="tag-list" data-v-4b9f9746="" data-v-1c9ebbff=""><div class="tag-list-title" data-v-4b9f9746="" data-v-1c9ebbff="">分类：</div> <a href="https://juejin.cn/ios" target="_blank" rel="" class="item category-item" data-v-1c9ebbff="" data-v-4b9f9746=""><span class="tag-title" data-v-1c9ebbff="">iOS</span></a></div> <div class="tag-list" data-v-4b9f9746="" data-v-1c9ebbff=""><div class="tag-list-title" data-v-4b9f9746="" data-v-1c9ebbff="">标签：</div> <div class="tag-list-container" data-v-4b9f9746="" data-v-1c9ebbff=""><a href="https://juejin.cn/tag/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86" target="_blank" rel="" class="item tag-item" data-v-1c9ebbff="" data-v-4b9f9746=""><span class="tag-title" data-v-1c9ebbff="">编译原理</span></a></div></div></div> <!----> <div data-fetch-key="1" class="extension-banner" data-v-224127ff="" data-v-1c9ebbff="" data-v-4b9f9746=""><span class="banner-icon" data-v-224127ff=""></span> <div class="banner-wrapper" data-v-224127ff=""><a class="banner-title" data-v-224127ff="" href="https://juejin.cn/extension/?utm_source=standalone&amp;utm_medium=post&amp;utm_campaign=extension_promotion" target="_blank">
      安装掘金浏览器插件
    </a> <div class="banner-content" data-v-224127ff="">多内容聚合浏览、多引擎快捷搜索、多工具便捷提效、多模式随心畅享，你想要的，这里都有！</div></div> <a class="banner-action" data-v-224127ff="" href="https://juejin.cn/extension/?utm_source=standalone&amp;utm_medium=post&amp;utm_campaign=extension_promotion" target="_blank">前往安装</a></div></div> <!----> <!----> <div data-v-33dabfcc="" data-v-1c9ebbff="" data-jj-helper="comment-container" class="container comment-list-box" id="comment-box" data-v-4b9f9746=""><div data-v-14a3249a="" data-v-33dabfcc="" class="comment-form"><div data-v-14a3249a="" class="header"><span data-v-14a3249a="" class="header-title">评论</span></div><div data-v-14a3249a="" class="content"><div data-v-14a3249a="" class="avatar-box"><img data-v-248050e4="" data-v-0b45085c="" data-v-14a3249a="" src="./iOS 编译原理与应用 - 掘金_files/3044413937_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></div><div data-v-14a3249a="" class="form-box"><div data-v-7c7c7498="" data-v-14a3249a="" class="auth-card"><!----> <div data-v-14a3249a="" data-v-7c7c7498="" class="input-box"><div data-v-14a3249a="" data-v-7c7c7498="" contenteditable="true" spellcheck="false" placeholder="输入评论（Enter换行，⌘ + Enter发送）" disabled="disabled" class="rich-input empty"></div><!----><!----></div></div><div data-v-14a3249a="" class="action-box"><div data-v-33ab0a29="" data-v-14a3249a="" class="emoji-container emoji-btn" style="display: none;"><div data-v-33ab0a29="" class="emoji-box"><svg data-v-33ab0a29="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon"><path data-v-33ab0a29="" fill-rule="evenodd" clip-rule="evenodd" d="M8.00002 0.666504C12.0501 0.666504 15.3334 3.94975 15.3334 7.99984C15.3334 12.0499 12.0501 15.3332 8.00002 15.3332C3.94993 15.3332 0.666687 12.0499 0.666687 7.99984C0.666687 3.94975 3.94993 0.666504 8.00002 0.666504ZM8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2ZM10.6667 5.66667V7.66667H9.33333V5.66667H10.6667ZM6.66667 5.66667V7.66667H5.33333V5.66667H6.66667ZM10.0767 9.33333H11.0495C11.1804 9.33333 11.2866 9.43951 11.2866 9.57048C11.2866 9.60754 11.2779 9.64409 11.2612 9.67718L11.244 9.71053C10.6294 10.8739 9.40726 11.6667 7.99998 11.6667C6.61523 11.6667 5.40977 10.8991 4.7859 9.76612L4.73786 9.67593C4.67845 9.56052 4.72385 9.4188 4.83926 9.35939C4.87253 9.34226 4.90941 9.33333 4.94683 9.33333H5.92347C6.02396 9.33332 6.11908 9.37865 6.18238 9.4567C6.26207 9.55496 6.32833 9.62955 6.38117 9.68046C6.80074 10.0847 7.37133 10.3333 7.99998 10.3333C8.63289 10.3333 9.20694 10.0814 9.62728 9.67224C9.67791 9.62296 9.74135 9.55121 9.8176 9.45698C9.88089 9.37877 9.97611 9.33333 10.0767 9.33333Z"></path></svg> <span data-v-33ab0a29="">表情</span></div> <!----></div><div data-v-14a3249a="" class="image-btn" style="display: none;"><svg data-v-14a3249a="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon"><path data-v-14a3249a="" fill-rule="evenodd" clip-rule="evenodd" d="M14 1.3335C14.3514 1.3335 14.6394 1.60546 14.6648 1.95041L14.6666 2.00016V14.0002C14.6666 14.3516 14.3947 14.6396 14.0497 14.665L14 14.6668H1.99998C1.64853 14.6668 1.36059 14.3949 1.33514 14.0499L1.33331 14.0002V2.00016C1.33331 1.64871 1.60527 1.36077 1.95023 1.33532L1.99998 1.3335H14ZM13.3333 2.66618H2.66664V13.3328H13.3333V2.66618ZM11.9219 6.7879C11.9719 6.83791 12 6.90574 12 6.97647V11.7993C12 11.9098 11.9104 11.9993 11.8 11.9993H6.81615C6.7975 11.9993 6.77945 11.9968 6.76232 11.992L3.91042 11.9847C3.79996 11.9844 3.71063 11.8947 3.7109 11.7842C3.71102 11.7313 3.73209 11.6807 3.76948 11.6433L6.52468 8.88807C6.62882 8.78393 6.79766 8.78393 6.9018 8.88807L8.17297 10.1593L11.5447 6.7879C11.6489 6.68376 11.8177 6.68376 11.9219 6.7879ZM5.99997 3.99951V5.99951H3.99997V3.99951H5.99997Z"></path></svg><span data-v-14a3249a="">图片</span></div><div data-v-14a3249a="" class="submit" style="display: none;"><span data-v-14a3249a="">⌘ + Enter</span><button data-v-14a3249a="" disabled="disabled" class="submit-btn">发表评论</button></div></div></div><input data-v-14a3249a="" type="file" class="hidden"></div></div> <!----> <!----></div> <div data-v-1b688d7c="" data-v-1c9ebbff="" class="action-box action-bar" data-v-4b9f9746=""><div data-v-1b688d7c="" class="praise-action action"><div data-v-1b688d7c="" class="action-title-box"><img data-v-1b688d7c="" src="./iOS 编译原理与应用 - 掘金_files/00ba359ecd0075e59ffbc3d810af551d.svg"> <span data-v-1b688d7c="" class="action-title">
          62
        </span></div></div> <div data-v-1b688d7c="" class="comment-action action"><div data-v-1b688d7c="" class="action-title-box"><img data-v-1b688d7c="" src="./iOS 编译原理与应用 - 掘金_files/336af4d1fafabcca3b770c8ad7a50781.svg"> <span data-v-1b688d7c="" class="action-title">
          1
        </span></div></div> <div data-v-1b688d7c="" class="collect-action action"><div data-v-1b688d7c="" class="action-title-box"><img data-v-1b688d7c="" src="./iOS 编译原理与应用 - 掘金_files/3d482c7a948bac826e155953b2a28a9e.svg"> <span data-v-1b688d7c="" class="action-title">收藏</span></div></div> <!----></div></div> <div data-v-1c9ebbff="" data-v-4b9f9746="" class="main-area recommended-area shadow"><div data-v-1c9ebbff="" data-v-4b9f9746="" class="recommended-list-title-wrapper"><div data-v-1c9ebbff="" data-v-4b9f9746="" class="title"><span data-v-1c9ebbff="" data-v-4b9f9746="" class="title-content">相关推荐</span></div></div> <div data-v-3ff8f708="" data-v-57c9777c="" data-v-1c9ebbff="" name="entry-list" tag="div" class="entry-list list recommended-entry-list" data-v-4b9f9746=""><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="7062687356402270244" data-original-type="0" data-draft-id="7062337142827171853" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/307518987049112" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        19组清风
      </div></a> <div data-v-5380cbb8="" class="date">1年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E5%89%8D%E7%AB%AF" target="_blank" rel="" class="tag">
        前端
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86" target="_blank" rel="" class="tag">
        编译原理
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/7062687356402270244" target="_blank" rel="" title="前端工程师的编译原理指南-「编译器工作流程」" class="title">前端工程师的编译原理指南-「编译器工作流程」</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/7062687356402270244" target="_blank" rel=""><div data-v-5380cbb8="">无论是对于任何语言框架来说，编译部分的知识往往是隐藏在代码内部不为认知但又非常重要的知识。 大部分前端工程师对于编译原理方面的内容或许仅仅停留在表象层面的理解，仅仅”知其然而不知其所以然“。</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">1941</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            41
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            6
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-5380cbb8="" src="./iOS 编译原理与应用 - 掘金_files/35262742f381416095ff4d33a6ef752a_tplv-k3u1fbpfcp-no-mark_300_300_300_200.awebp" alt="前端工程师的编译原理指南-「编译器工作流程」" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6934554272142983181" data-original-type="0" data-draft-id="6934553142998614029" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/3509296845313741" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        美团技术团队
      </div></a> <div data-v-5380cbb8="" class="date">2年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E5%89%8D%E7%AB%AF" target="_blank" rel="" class="tag">
        前端
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6934554272142983181" target="_blank" rel="" title="一款可以让大型iOS工程编译速度提升50%的工具" class="title">一款可以让大型iOS工程编译速度提升50%的工具</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6934554272142983181" target="_blank" rel=""><div data-v-5380cbb8="">cocoapods-hmap-prebuilt 是美团平台迭代组自研的一款 cocoapods 插件，以 Header Map 技术 为基础，进一步提升代码的编译速度，完善头文件的搜索机制。 虽然以二进制组件的方式构建 App 是 HPX （美团移动端统一持续集成/交付平台）的…</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">3052</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            46
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            13
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-5380cbb8="" src="./iOS 编译原理与应用 - 掘金_files/b503d25ac7b947d487a904f9389e8db9_tplv-k3u1fbpfcp-no-mark_300_300_300_200.awebp" alt="一款可以让大型iOS工程编译速度提升50%的工具" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="7048999137588543518" data-original-type="0" data-draft-id="7048642201693192200" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/3957854362672798" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        samstring
      </div></a> <div data-v-5380cbb8="" class="date">1年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/7048999137588543518" target="_blank" rel="" title="理解iOS app的编译，运行过程" class="title">理解iOS app的编译，运行过程</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/7048999137588543518" target="_blank" rel=""><div data-v-5380cbb8="">前言 一年都没怎么写iOS的文章。最近有一些知识学习了完以后总觉得零零散散的，打算以这一篇文章作为开篇，系统地记录一些所学习的iOS知识。 本篇文章的基础框架已经初步确定了，不会提及到特别深入的知识点</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">2318</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            36
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            4
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-5380cbb8="" src="./iOS 编译原理与应用 - 掘金_files/d48f3865f8754a5fae382728812ae128_tplv-k3u1fbpfcp-no-mark_300_300_300_200.awebp" alt="理解iOS app的编译，运行过程" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="7032186886047154212" data-original-type="0" data-draft-id="7032181936533536798" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/3589280541719383" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        iOS小王
      </div></a> <div data-v-5380cbb8="" class="date">1年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/7032186886047154212" target="_blank" rel="" title="iOS自动编译。简化测试与开发。" class="title">iOS自动编译。简化测试与开发。</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/7032186886047154212" target="_blank" rel=""><div data-v-5380cbb8="">前言 学如逆水行舟，不进则退。共勉！！！ 最近研究了一下iOS的自动化编译，目的是为了简化测试和开发的同学沟通协调的次数，实现测试同学可以随时从网页操作编译SVN最新源码并打包ipa进行测试。 具体思</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">3128</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            18
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            3
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-5380cbb8="" src="./iOS 编译原理与应用 - 掘金_files/1ddb61a1677d480fb93f2acb4dab53dd_tplv-k3u1fbpfcp-no-mark_300_300_300_200.awebp" alt="iOS自动编译。简化测试与开发。" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="7004643380214890503" data-original-type="0" data-draft-id="7002418367752011812" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/2780000020340279" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        SSL
      </div></a> <div data-v-5380cbb8="" class="date">1年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/LLVM" target="_blank" rel="" class="tag">
        LLVM
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/7004643380214890503" target="_blank" rel="" title="iOS 底层原理：LLVM编译流程" class="title">iOS 底层原理：LLVM编译流程</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/7004643380214890503" target="_blank" rel=""><div data-v-5380cbb8="">LLVM是架构编译器的框架系统，以C++编写而成，用于优化以任意程序语言编写的程序的编译时间、链接时间、运行时间，对开发者保持开放。</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">967</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            1
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            评论
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="7082016344765366280" data-original-type="0" data-draft-id="7082015602881232933" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/1134351728250568" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        轻口味
      </div></a> <div data-v-5380cbb8="" class="date">11月前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/C++" target="_blank" rel="" class="tag">
        C++
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/7082016344765366280" target="_blank" rel="" title="iOS编译openssl实践" class="title">iOS编译openssl实践</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/7082016344765366280" target="_blank" rel=""><div data-v-5380cbb8="">本文介绍了编译iOS平台openssl库遇到的各种问题及最终解决方案，最终提供了同时编译openssl、nghttp2以及libcurl库脚本。</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">912</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            点赞
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            评论
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-5380cbb8="" src="./iOS 编译原理与应用 - 掘金_files/46de85b9fc5a4d4f9a19099ca7f9c67f_tplv-k3u1fbpfcp-no-mark_300_300_300_200.awebp" alt="iOS编译openssl实践" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6844903896482070541" data-original-type="0" data-draft-id="6845076387036921863" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/1838039173436055" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        泡泡花生
      </div></a> <div data-v-5380cbb8="" class="date">3年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6844903896482070541" target="_blank" rel="" title="iOS Swift工程优化编译速度" class="title">iOS Swift工程优化编译速度</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6844903896482070541" target="_blank" rel=""><div data-v-5380cbb8="">日志一般都有数十万行，可阅读性极差。GitHub上有个工具可以方便的统计展示这些日志信息，链接如下： https://github.com/fastred/Optimizing-Swift-Build-Times，用起来很简单就不赘述了。 使用flag和对应的工具可以定位到具体…</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">2568</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            5
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            1
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6871508742068764679" data-original-type="0" data-draft-id="6871508610543779853" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/1899557248829438" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        在做开发的信哥
      </div></a> <div data-v-5380cbb8="" class="date">2年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6871508742068764679" target="_blank" rel="" title="App iOS 工程编译优化实践" class="title">App iOS 工程编译优化实践</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6871508742068764679" target="_blank" rel=""><div data-v-5380cbb8="">引言开发效率的提升，是开发者关注的一个永恒的话题。对于iOS而言，编译速度一直是影响iOS开发和集成测试效率关键的一环。携程旅行AppiOS工程编译，经历了从全源码编译到工程组件化，细分Bundle，</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">1966</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            9
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            4
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6847902217887105032" data-original-type="0" data-draft-id="6850424845596491783" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/2999123453949223" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        Jackie_Gan
      </div></a> <div data-v-5380cbb8="" class="date">2年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86" target="_blank" rel="" class="tag">
        编译原理
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6847902217887105032" target="_blank" rel="" title="用JS来解释JS：简易实现JS解释器" class="title">用JS来解释JS：简易实现JS解释器</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6847902217887105032" target="_blank" rel=""><div data-v-5380cbb8="">处理二元运算表达式节点，需要首先将left和right两个表达式，然后根据operator执行相应的计算，最后返回处理结果。</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">2411</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            6
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            2
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="7166918033708056589" data-original-type="0" data-draft-id="7166875747515105288" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/3360557084189016" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        EthanTeng
      </div></a> <div data-v-5380cbb8="" class="date">3月前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E7%BC%96%E8%AF%91%E5%99%A8" target="_blank" rel="" class="tag">
        编译器
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86" target="_blank" rel="" class="tag">
        编译原理
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/Rust" target="_blank" rel="" class="tag">
        Rust
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/7166918033708056589" target="_blank" rel="" title="Rust 实现一个表达式 Parser(4) DFA 实现" class="title">Rust 实现一个表达式 Parser(4) DFA 实现</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/7166918033708056589" target="_blank" rel=""><div data-v-5380cbb8="">本文将正式实现一个DFA进行词法分析,文章中希望尽量避开枯燥的理论,从实践的角度出发,以此来介绍词法分析相关内容</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">1685</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            点赞
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            评论
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-5380cbb8="" src="./iOS 编译原理与应用 - 掘金_files/2066b3ddcf714c77918de42cdcec63fe_tplv-k3u1fbpfcp-no-mark_300_300_300_200.awebp" alt="Rust 实现一个表达式 Parser(4) DFA 实现" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="7185101900303728695" data-original-type="0" data-draft-id="7185072236322095164" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/3359704427793181" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        移动端小伙伴
      </div></a> <div data-v-5380cbb8="" class="date">1月前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/7185101900303728695" target="_blank" rel="" title="iOS 包体积优化5 - 编译优化" class="title">iOS 包体积优化5 - 编译优化</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/7185101900303728695" target="_blank" rel=""><div data-v-5380cbb8="">iOS包体积优化的系列文章，其中包括： iOS 包体积优化1 - 总览 iOS 包体积优化2 - 如何分析ipa包？ iOS 包体积优化3 - 代码管理 iOS 包体积优化4 - 资源管理 iOS 包</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">7696</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            16
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            评论
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-5380cbb8="" src="./iOS 编译原理与应用 - 掘金_files/e97abb88cf044d16b59ed1d539943ac9_tplv-k3u1fbpfcp-no-mark_300_300_300_200.awebp" alt="iOS 包体积优化5 - 编译优化" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="7071436772898504712" data-original-type="0" data-draft-id="7071438346643308580" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/3650034335488664" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        假装自己很用心
      </div></a> <div data-v-5380cbb8="" class="date">12月前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/7071436772898504712" target="_blank" rel="" title="OC项目创建iOS 14 Widget 时编译报错" class="title">OC项目创建iOS 14 Widget 时编译报错</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/7071436772898504712" target="_blank" rel=""><div data-v-5380cbb8="">起因 最近产品要做一个Widget小组件，产品的要求必须安排。于是我新创建了一个OC项目，然后创建了一个Widget Extension。直接运行编译，发编译器报以下错误： ld: Assertion</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">2780</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            2
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            评论
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6946134879524356126" data-original-type="0" data-draft-id="6946080743462273054" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/3694798609327822" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        加油撸码人
      </div></a> <div data-v-5380cbb8="" class="date">1年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6946134879524356126" target="_blank" rel="" title="iOS-从汇编分析switch在编译时的实现" class="title">iOS-从汇编分析switch在编译时的实现</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6946134879524356126" target="_blank" rel=""><div data-v-5380cbb8="">通过switch汇编代码分析，在编码中更高效的使用判断条件，读者需要一些arm64汇编基础。 在开发过程中不少有对一个变量的判断跳转不同的分支或者方法的场景例如以下。 第15行: b.hi指令比较结果是无符号大于，执行标号，否则不跳转，如果成立跳转到0x100f3de64执行代…</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">804</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            3
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            评论
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6844903694048182286" data-original-type="0" data-draft-id="6845075632271917063" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/2189882891965096" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        aaayia
      </div></a> <div data-v-5380cbb8="" class="date">4年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/Objective-C" target="_blank" rel="" class="tag">
        Objective-C
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="" class="tag">
        设计模式
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6844903694048182286" target="_blank" rel="" title="高性能iOS应用开发(一)" class="title">高性能iOS应用开发(一)</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6844903694048182286" target="_blank" rel=""><div data-v-5380cbb8="">自动释放池块是允许你放弃对一个对象的持有关系， 但可以避免它立即被回收的一个工具，它确保在块内创建的对象会在块完成时被回收， 本地的块可以用来尽早的释放其中的对象。 在创建很对临时对象的循环时。在循环中使用autoreleasepool块可以为每个迭代释放内存。 属性声明有两个…</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">490</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            点赞
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            评论
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="7140400045920092196" data-original-type="0" data-draft-id="7140398895263121439" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/835284565229597" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        crossoverJie
      </div></a> <div data-v-5380cbb8="" class="date">5月前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E5%90%8E%E7%AB%AF" target="_blank" rel="" class="tag">
        后端
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86" target="_blank" rel="" class="tag">
        编译原理
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/Go" target="_blank" rel="" class="tag">
        Go
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/7140400045920092196" target="_blank" rel="" title="终于实现了一门属于自己的编程语言" class="title">终于实现了一门属于自己的编程语言</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/7140400045920092196" target="_blank" rel=""><div data-v-5380cbb8="">都说程序员的三大浪漫是：操作系统、编译原理、图形学；最后的图形学确实是特定的专业领域，我们几乎接触不到，所以对</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">1626</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            11
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            8
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-5380cbb8="" src="./iOS 编译原理与应用 - 掘金_files/2da3ee2904c94af1adc731abbcc30bee_tplv-k3u1fbpfcp-no-mark_300_300_300_200.awebp" alt="终于实现了一门属于自己的编程语言" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6844903423268093966" data-original-type="1" data-draft-id="0" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/3051900006051287" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        宇朋Look
      </div></a> <div data-v-5380cbb8="" class="date">7年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/MVVM" target="_blank" rel="" class="tag">
        MVVM
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6844903423268093966" target="_blank" rel="" title="iOS 代码实践总结" class="title">iOS 代码实践总结</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6844903423268093966" target="_blank" rel=""><div data-v-5380cbb8="">作者总结了iOS开发的一些经验，例如减少对象属性，减少和模块化对象消息，以及MVVM &amp;&amp; RAC 该如何选择，以及UI开发的一些心得。</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">5279</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            185
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            14
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-5380cbb8="" src="./iOS 编译原理与应用 - 掘金_files/0784744cc2b9617c00da.jpg_tplv-t2oaga2asx-no-mark_300_300_300_200.awebp" alt="iOS 代码实践总结" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6933136467497746439" data-original-type="0" data-draft-id="6933134826941710350" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/756100906359789" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        SmallYu
      </div></a> <div data-v-5380cbb8="" class="date">2年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E9%80%86%E5%90%91" target="_blank" rel="" class="tag">
        逆向
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6933136467497746439" target="_blank" rel="" title="如何反编译一个ReactNative框架的iOS应用" class="title">如何反编译一个ReactNative框架的iOS应用</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6933136467497746439" target="_blank" rel=""><div data-v-5380cbb8="">之前用RN写过一个iOS应用，只留了一个ipa，因为签名过期装不上，服务器也换了，装上也没法用，所以想自己搞搞，让这个软件在手机上跑起来。 这篇文章里，SmartNote.ipa为我要修改的ipa，Test是我们通过Xcode新建出来的项目，后面提取embedded.mobil…</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">2547</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            1
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            1
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6844903597189152776" data-original-type="0" data-draft-id="6845075414717562888" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/624178334009096" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        小Ping平
      </div></a> <div data-v-5380cbb8="" class="date">4年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E5%AE%89%E5%85%A8" target="_blank" rel="" class="tag">
        安全
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E7%BC%96%E8%AF%91%E5%99%A8" target="_blank" rel="" class="tag">
        编译器
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6844903597189152776" target="_blank" rel="" title="iOS底层(一)-初识汇编" class="title">iOS底层(一)-初识汇编</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6844903597189152776" target="_blank" rel=""><div data-v-5380cbb8="">我们在学习逆向开发之前,我们要了解一个基本的逆向原理.首先我们是逆向iOS系统上面的APP.那么我们知道,一个APP安装在手机上面的可执行文件本质上是二进制文件.因为iPhone手机本质上执行的指令是二进制.是由手机上的CPU执行的.所以逆向开发是建立在分析二进制上面.所以今天…</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">457</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            1
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            评论
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="7026986124971081735" data-original-type="0" data-draft-id="7026958589935763486" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/624178334802030" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        Icebear
      </div></a> <div data-v-5380cbb8="" class="date">1年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/7026986124971081735" target="_blank" rel="" title="iOS-CCache提升编译和打包速度" class="title">iOS-CCache提升编译和打包速度</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/7026986124971081735" target="_blank" rel=""><div data-v-5380cbb8="">安装 制作脚本文件（注意：脚本代码很多文章是有个if else的，但是我使用了代码命中率为0，所以删除了），带有c++文件的再写一份ccache-clang++文件，里面的clang也改成clang+</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">1747</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            8
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            1
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-5380cbb8="" src="./iOS 编译原理与应用 - 掘金_files/80fa5063c5c74849a271363111a0d2e7_tplv-k3u1fbpfcp-no-mark_300_300_300_200.awebp" alt="iOS-CCache提升编译和打包速度" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6844904030980964365" data-original-type="0" data-draft-id="6845076588447563783" class="entry" style="margin-bottom: 20px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/1345457965002477" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        miracle洛洛
      </div></a> <div data-v-5380cbb8="" class="date">3年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 0px;"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6844904030980964365" target="_blank" rel="" title="iOS逆向工程初探一" class="title">iOS逆向工程初探一</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6844904030980964365" target="_blank" rel=""><div data-v-5380cbb8="">OpenSSL：SSL的开源实现，绝大部分HTTPS请求等价于：HTTP+OpenSSL。 可以使用ssh-copy-id将客户端的公钥内容自动追加到服务器的授权文件尾部，也可以手动操作。复制客户端的公钥到服务器某路径 sh、bash：当前shell环境会启动一个子进程来执行脚…</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">337</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            点赞
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            评论
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li></div></div> <div data-v-65e9deb8="" data-v-1c9ebbff="" class="recommended-links main-area" data-v-4b9f9746=""><p data-v-65e9deb8="">友情链接：</p> <ul data-v-65e9deb8=""><li data-v-65e9deb8=""><a data-v-65e9deb8="" href="https://www.douyin.com/downloadpage/chat" title="抖音聊天" target="_blank" rel="noopener noreferrer">
        抖音聊天
      </a></li><li data-v-65e9deb8=""><a data-v-65e9deb8="" href="https://frontend.devrank.cn/traffic-aggregation/244556" title="extjs图片居中显示图片" target="_blank" rel="noopener noreferrer">
        extjs图片居中显示图片
      </a></li><li data-v-65e9deb8=""><a data-v-65e9deb8="" href="https://frontend.devrank.cn/traffic-aggregation/244557" title="typescript reduce list of objects" target="_blank" rel="noopener noreferrer">
        typescript reduce list of objects
      </a></li><li data-v-65e9deb8=""><a data-v-65e9deb8="" href="https://frontend.devrank.cn/traffic-aggregation/244558" title="hmacsha1 js做戏" target="_blank" rel="noopener noreferrer">
        hmacsha1 js做戏
      </a></li><li data-v-65e9deb8=""><a data-v-65e9deb8="" href="https://frontend.devrank.cn/traffic-aggregation/244559" title="js取消转义字符串" target="_blank" rel="noopener noreferrer">
        js取消转义字符串
      </a></li><li data-v-65e9deb8=""><a data-v-65e9deb8="" href="https://frontend.devrank.cn/traffic-aggregation/244560" title="js脚本编写工具手机版" target="_blank" rel="noopener noreferrer">
        js脚本编写工具手机版
      </a></li><li data-v-65e9deb8=""><a data-v-65e9deb8="" href="https://frontend.devrank.cn/traffic-aggregation/244561" title="js 动态执行方法" target="_blank" rel="noopener noreferrer">
        js 动态执行方法
      </a></li></ul></div> <div data-v-65597ac0="" data-v-1c9ebbff="" st:block="sidebar" class="sidebar sidebar" data-v-4b9f9746=""><div data-v-71f2d09e="" data-v-bdf6e7fa="" data-v-65597ac0="" class="sidebar-block author-block pure"><a data-v-bdf6e7fa="" href="https://juejin.cn/user/501033033824039" target="_blank" rel="" class="user-item item" data-v-71f2d09e=""><img data-v-248050e4="" data-v-0b45085c="" data-v-bdf6e7fa="" src="./iOS 编译原理与应用 - 掘金_files/16ad978742e404ba_tplv-t2oaga2asx-no-mark_100_100_100_100.awebp" alt="" class="lazy avatar avatar" loading="lazy"> <div data-v-bdf6e7fa="" class="info-box"><a data-v-68a20f0a="" data-v-bdf6e7fa="" href="https://juejin.cn/user/501033033824039" target="_blank" rel="" class="username"><span data-v-68a20f0a="" class="name" style="max-width: 128px;">
      民生Fintech
    </span> <span data-v-3c1a13dc="" data-v-68a20f0a="" blank="true" class="rank"><img data-v-248050e4="" data-v-3c1a13dc="" src="./iOS 编译原理与应用 - 掘金_files/05be64d75fee4dbdb290ba23afd21fcf_tplv-k3u1fbpfcp-no-mark_0_0_0_0.awebp" alt="lv-4" class="lazy" title="创作等级" loading="lazy"></span> <!----> <!----> </a> <div data-v-bdf6e7fa="" title="Fintech Researcher @ 民生&amp;科技" class="position">
        Fintech Researcher @ 民生&amp;科技
      </div></div></a> <div data-v-bdf6e7fa="" data-v-71f2d09e="" class="operate-btn"><button data-v-2afc21b6="" data-v-bdf6e7fa="" class="ui-btn follow-btn primary large default attention" st:name="followBtn" data-v-71f2d09e=""><!----> 
    关注
  </button> <a data-v-11443840="" data-v-bdf6e7fa="" href="https://juejin.cn/notification/im?participantId=501033033824039" class="im-button im-btn" data-v-71f2d09e=""><!----> <div data-v-11443840="">私信</div></a></div> <div data-v-bdf6e7fa="" data-v-71f2d09e="" class="cut-off"></div>  <div data-v-bdf6e7fa="" data-v-71f2d09e="" class="stat-item item"><svg data-v-bdf6e7fa="" data-v-71f2d09e="" xmlns="http://www.w3.org/2000/svg" width="25" height="26" viewBox="0 0 25 26" class="zan"><g data-v-bdf6e7fa="" data-v-71f2d09e="" fill="none" fill-rule="evenodd" transform="translate(0 .57)"><ellipse data-v-bdf6e7fa="" data-v-71f2d09e="" cx="12.5" cy="12.57" fill="#E1EFFF" rx="12.5" ry="12.57"></ellipse><path data-v-bdf6e7fa="" data-v-71f2d09e="" fill="#7BB9FF" d="M8.596 11.238V19H7.033C6.463 19 6 18.465 6 17.807v-5.282c0-.685.483-1.287 1.033-1.287h1.563zm4.275-4.156A1.284 1.284 0 0 1 14.156 6c.885.016 1.412.722 1.595 1.07.334.638.343 1.687.114 2.361-.207.61-.687 1.412-.687 1.412h3.596c.38 0 .733.178.969.488.239.317.318.728.21 1.102l-1.628 5.645a1.245 1.245 0 0 1-1.192.922h-7.068v-7.889c1.624-.336 2.623-2.866 2.806-4.029z"></path></g></svg> <span data-v-bdf6e7fa="" data-v-71f2d09e="" class="content">
      获得点赞
      <span data-v-bdf6e7fa="" data-v-71f2d09e="" class="count">&nbsp;443</span></span></div> <div data-v-bdf6e7fa="" data-v-71f2d09e="" class="stat-item item"><svg data-v-bdf6e7fa="" data-v-71f2d09e="" width="25" height="25" viewBox="0 0 25 25" class="icon stat-view-icon"><g data-v-bdf6e7fa="" data-v-71f2d09e="" fill="none" fill-rule="evenodd"><circle data-v-bdf6e7fa="" data-v-71f2d09e="" cx="12.5" cy="12.5" r="12.5" fill="#E1EFFF"></circle><path data-v-bdf6e7fa="" data-v-71f2d09e="" fill="#7BB9FF" d="M4 12.5S6.917 7 12.75 7s8.75 5.5 8.75 5.5-2.917 5.5-8.75 5.5S4 12.5 4 12.5zm8.75 2.292c1.208 0 2.188-1.026 2.188-2.292 0-1.266-.98-2.292-2.188-2.292-1.208 0-2.188 1.026-2.188 2.292 0 1.266.98 2.292 2.188 2.292z"></path></g></svg> <span data-v-bdf6e7fa="" data-v-71f2d09e="" class="content">
      文章被阅读
      <span data-v-bdf6e7fa="" data-v-71f2d09e="" class="count">&nbsp;61,176</span></span></div> <!----></div> <!----> <a data-v-65597ac0="" href="https://juejin.cn/user/center/signin?from=item" target="" rel=""></a> <div data-v-71f2d09e="" data-v-7571c026="" data-v-65597ac0="" class="sidebar-block wechat-sidebar-block pure"><div data-v-19814543="" data-v-7571c026="" class="wechat-banner" data-v-71f2d09e=""><img data-v-19814543="" src="./iOS 编译原理与应用 - 掘金_files/default.640d9a7.png" loading="lazy" class="wechat-img square"></div> <div data-v-7571c026="" data-v-71f2d09e="" title="关闭" class="close-btn"><i data-v-7571c026="" class="byte-icon byte-icon--close-circle" data-v-71f2d09e=""><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path fill="none" d="M0 0h48v48H0z"></path><path d="M24 2c12.2 0 22 9.8 22 22s-9.8 22-22 22S2 36.2 2 24 11.8 2 24 2zm0 4C14.1 6 6 14.1 6 24s8.1 18 18 18 18-8.1 18-18S33.9 6 24 6zm-4.9 10.2l4.9 4.9 5-4.9c.4-.4 1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4l-5 4.9 5 5c.4.4.4 1 0 1.4l-1.4 1.4c-.4.4-1 .4-1.4 0l-5-5-4.9 5c-.4.4-1 .4-1.4 0l-1.4-1.4c-.4-.4-.4-1 0-1.4l4.9-5-4.9-4.9c-.4-.4-.4-1 0-1.4l1.4-1.4c.3-.4 1-.4 1.4 0z"></path></svg></i></div></div> <div data-v-71f2d09e="" data-v-17139de4="" data-v-65597ac0="" class="sidebar-block related-entry-sidebar-block shadow" st:block="relatedEntrySidebarBlock"><div data-v-71f2d09e="" class="block-title">相关文章</div> <div data-v-71f2d09e="" class="block-body"><div data-v-17139de4="" data-v-71f2d09e="" class="entry-list"><a data-v-17139de4="" href="https://juejin.cn/post/6844903982083604487" target="_blank" rel="" st:name="link" title="Mybatis中的设计模式运用" class="item" data-v-71f2d09e=""><div data-v-17139de4="" class="entry-title">Mybatis中的设计模式运用</div> <div data-v-17139de4="" class="entry-meta-box"><div data-v-17139de4="" class="entry-meta">6点赞</div> <div data-v-17139de4="" class="entry-meta">&nbsp;·&nbsp;</div> <div data-v-17139de4="" class="entry-meta">0评论</div></div></a><a data-v-17139de4="" href="https://juejin.cn/post/6844903988601552904" target="_blank" rel="" st:name="link" title="AFNetworking底层源码解析" class="item" data-v-71f2d09e=""><div data-v-17139de4="" class="entry-title">AFNetworking底层源码解析</div> <div data-v-17139de4="" class="entry-meta-box"><div data-v-17139de4="" class="entry-meta">52点赞</div> <div data-v-17139de4="" class="entry-meta">&nbsp;·&nbsp;</div> <div data-v-17139de4="" class="entry-meta">3评论</div></div></a><a data-v-17139de4="" href="https://juejin.cn/post/7004471000104435749" target="_blank" rel="" st:name="link" title="iOS 客户端编译优化实践" class="item" data-v-71f2d09e=""><div data-v-17139de4="" class="entry-title">iOS 客户端编译优化实践</div> <div data-v-17139de4="" class="entry-meta-box"><div data-v-17139de4="" class="entry-meta">78点赞</div> <div data-v-17139de4="" class="entry-meta">&nbsp;·&nbsp;</div> <div data-v-17139de4="" class="entry-meta">8评论</div></div></a><a data-v-17139de4="" href="https://juejin.cn/post/6958347736924192782" target="_blank" rel="" st:name="link" title="写给前端的编译原理科普" class="item" data-v-71f2d09e=""><div data-v-17139de4="" class="entry-title">写给前端的编译原理科普</div> <div data-v-17139de4="" class="entry-meta-box"><div data-v-17139de4="" class="entry-meta">563点赞</div> <div data-v-17139de4="" class="entry-meta">&nbsp;·&nbsp;</div> <div data-v-17139de4="" class="entry-meta">34评论</div></div></a><a data-v-17139de4="" href="https://juejin.cn/post/6844903811207659527" target="_blank" rel="" st:name="link" title="小程序渲染架构设计" class="item" data-v-71f2d09e=""><div data-v-17139de4="" class="entry-title">小程序渲染架构设计</div> <div data-v-17139de4="" class="entry-meta-box"><div data-v-17139de4="" class="entry-meta">44点赞</div> <div data-v-17139de4="" class="entry-meta">&nbsp;·&nbsp;</div> <div data-v-17139de4="" class="entry-meta">4评论</div></div></a></div></div></div> <div data-v-65597ac0="" class="sticky-block-box"><div data-v-71f2d09e="" data-v-65597ac0="" class="sidebar-block catalog-block catalog-block pure isExpand" style=""><nav data-v-21dfbf50="" class="article-catalog" data-v-71f2d09e="" style=""><div data-v-21dfbf50="" class="catalog-title">目录</div> <div data-v-21dfbf50="" class="catalog-body"><ul data-v-21dfbf50="" class="catalog-list" style="margin-top: 0px;"><li data-v-21dfbf50="" class="item d1"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-0" title="引言" class="catalog-aTag">
      引言
    </a></div> <!----></li><li data-v-21dfbf50="" class="item d1 active"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-1" title="编译原理" class="catalog-aTag">
      编译原理
    </a></div> <ul class="sub-list"><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-2" title="LLVM简介" class="catalog-aTag">
      LLVM简介
    </a></div> <!----></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-3" title="传统的编译器架构" class="catalog-aTag">
      传统的编译器架构
    </a></div> <!----></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-4" title="LLVM架构" class="catalog-aTag">
      LLVM架构
    </a></div> <!----></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-5" title="Clang" class="catalog-aTag">
      Clang
    </a></div> <!----></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-6" title="Clang与LLVM" class="catalog-aTag">
      Clang与LLVM
    </a></div> <!----></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-7" title="OC源文件的编译过程" class="catalog-aTag">
      OC源文件的编译过程
    </a></div> <ul class="sub-list"><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-8" title="1. 词法分析" class="catalog-aTag">
      1. 词法分析
    </a></div> <!----></li><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-9" title="2. 语法分析" class="catalog-aTag">
      2. 语法分析
    </a></div> <!----></li><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-10" title="3. LLVM IR" class="catalog-aTag">
      3. LLVM IR
    </a></div> <!----></li><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-11" title="4. IR基本语法" class="catalog-aTag">
      4. IR基本语法
    </a></div> <!----></li></ul></li></ul></li><li data-v-21dfbf50="" class="item d1"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-12" title="应用与实践" class="catalog-aTag">
      应用与实践
    </a></div> <ul class="sub-list"><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-13" title="编写及运行Clang插件" class="catalog-aTag">
      编写及运行Clang插件
    </a></div> <ul class="sub-list"><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-14" title="1. 源码下载" class="catalog-aTag">
      1. 源码下载
    </a></div> <!----></li><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-15" title="2. 源码编译" class="catalog-aTag">
      2. 源码编译
    </a></div> <!----></li><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-16" title="3. 插件目录" class="catalog-aTag">
      3. 插件目录
    </a></div> <!----></li><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-17" title="4. 编写插件源码" class="catalog-aTag">
      4. 编写插件源码
    </a></div> <!----></li><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-18" title="5. 注册Clang插件" class="catalog-aTag">
      5. 注册Clang插件
    </a></div> <!----></li><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-19" title="6. 使用clang 插件" class="catalog-aTag">
      6. 使用clang 插件
    </a></div> <!----></li><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-20" title="7. 更多" class="catalog-aTag">
      7. 更多
    </a></div> <!----></li></ul></li></ul></li><li data-v-21dfbf50="" class="item d1"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-21" title="结语" class="catalog-aTag">
      结语
    </a></div> <!----></li><li data-v-21dfbf50="" class="item d1"><div class="a-container"><a href="https://juejin.cn/post/6844903896230395918#heading-22" title="作者简介" class="catalog-aTag">
      作者简介
    </a></div> <!----></li></ul></div></nav></div> <!----></div></div> <div data-v-fe76cb40="" data-v-1c9ebbff="" class="article-suspended-panel article-suspended-panel"><svg data-v-fe76cb40="" xmlns="http://www.w3.org/2000/svg" class="" style="display: none;"><symbol data-v-fe76cb40="" id="icon-collect" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path data-v-fe76cb40="" fill-rule="evenodd" clip-rule="evenodd" d="M5.24287 18.3845C4.89724 18.5507 4.48229 18.4053 4.31605 18.0596C4.26029 17.9437 4.23783 17.8146 4.25117 17.6866L4.75725 12.8332C4.77762 12.6379 4.71431 12.443 4.583 12.297L1.29207 8.63594C1.03567 8.35071 1.05905 7.91164 1.34428 7.65524C1.43464 7.574 1.54475 7.5179 1.66358 7.49254L6.47789 6.46509C6.66998 6.42409 6.83572 6.30367 6.93407 6.13365L9.39894 1.87248C9.59098 1.54049 10.0158 1.42704 10.3478 1.61907C10.453 1.67992 10.5403 1.76729 10.6012 1.87248L13.0661 6.13365C13.1644 6.30367 13.3301 6.42409 13.5222 6.46509L18.3365 7.49254C18.7116 7.57259 18.9508 7.94155 18.8707 8.31664C18.8454 8.43547 18.7893 8.54557 18.708 8.63594L15.4171 12.297C15.2858 12.443 15.2225 12.6379 15.2429 12.8332L15.7489 17.6866C15.7887 18.0681 15.5117 18.4096 15.1303 18.4493C15.0023 18.4627 14.8732 18.4402 14.7572 18.3845L10.3011 16.2412C10.1108 16.1497 9.8893 16.1497 9.69906 16.2412L5.24287 18.3845Z"></path></symbol><symbol data-v-fe76cb40="" id="icon-comment" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path data-v-fe76cb40="" fill-rule="evenodd" clip-rule="evenodd" d="M4.62739 1.25C2.9347 1.25 1.5625 2.6222 1.5625 4.31489L1.56396 12.643C1.56403 14.3356 2.9362 15.7078 4.62885 15.7078H6.48326L6.93691 17.6869L6.93884 17.6948C7.16894 18.6441 8.28598 19.0599 9.08073 18.4921L12.7965 15.7078H15.5001C17.1928 15.7078 18.565 14.3355 18.565 12.6428L18.5635 4.31477C18.5635 2.62213 17.1913 1.25 15.4986 1.25H4.62739ZM5.98265 9.89255C6.68783 9.89255 7.2595 9.32089 7.2595 8.61571C7.2595 7.91053 6.68783 7.33887 5.98265 7.33887C5.27747 7.33887 4.70581 7.91053 4.70581 8.61571C4.70581 9.32089 5.27747 9.89255 5.98265 9.89255ZM9.95604 9.89255C10.6612 9.89255 11.2329 9.32089 11.2329 8.61571C11.2329 7.91053 10.6612 7.33887 9.95604 7.33887C9.25086 7.33887 8.6792 7.91053 8.6792 8.61571C8.6792 9.32089 9.25086 9.89255 9.95604 9.89255ZM15.2124 8.61571C15.2124 9.32089 14.6407 9.89255 13.9355 9.89255C13.2304 9.89255 12.6587 9.32089 12.6587 8.61571C12.6587 7.91053 13.2304 7.33887 13.9355 7.33887C14.6407 7.33887 15.2124 7.91053 15.2124 8.61571Z"></path></symbol><symbol data-v-fe76cb40="" id="icon-zan" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path data-v-fe76cb40="" fill-rule="evenodd" clip-rule="evenodd" d="M13.0651 3.25923C12.6654 2.21523 12.1276 1.60359 11.4633 1.40559C10.8071 1.21 10.2539 1.48626 9.97848 1.67918C9.43962 2.05668 9.17297 2.64897 9.0009 3.12662C8.93522 3.30893 8.87504 3.50032 8.82077 3.67291L8.82077 3.67292C8.80276 3.73019 8.78541 3.78539 8.76872 3.8375C8.6974 4.06017 8.63455 4.23905 8.56561 4.38315C8.07104 5.41687 7.64014 6.034 7.2617 6.43277C6.89154 6.8228 6.5498 7.0275 6.18413 7.21038C5.8887 7.35813 5.69369 7.66144 5.69365 8.00211L5.69237 17.3908C5.6923 17.8783 6.08754 18.2736 6.57511 18.2736H14.8382C15.2621 18.2736 15.5829 18.1393 15.8149 17.9421C15.9234 17.8497 15.9985 17.7554 16.0484 17.6856C16.0695 17.6561 16.088 17.6282 16.0983 17.6126L16.1017 17.6075L16.1033 17.6051L16.1194 17.5857L16.1428 17.5478C16.913 16.3019 17.4472 15.3088 17.8659 14.1183C18.3431 12.7613 18.5849 11.5853 18.6874 10.6685C18.7871 9.77617 18.7612 9.07318 18.6558 8.68779C18.5062 8.14118 18.138 7.82653 17.7668 7.66617C17.4231 7.51771 17.0763 7.49836 16.8785 7.49807L13.1134 7.44551C13.662 5.19751 13.31 3.89889 13.0651 3.25923ZM1.251 8.0848C1.22726 7.5815 1.62891 7.16046 2.13277 7.16046H3.4408C3.92832 7.16046 4.32354 7.55568 4.32354 8.04321V17.4303C4.32354 17.9178 3.92832 18.313 3.4408 18.313H2.57554C2.10419 18.313 1.71599 17.9427 1.69378 17.4718L1.251 8.0848Z"></path></symbol><symbol data-v-fe76cb40="" id="icon-share" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path data-v-fe76cb40="" fill-rule="evenodd" clip-rule="evenodd" d="M10.4167 6.40399C5.35406 6.40399 1.25 10.5675 1.25 15.7035C1.25 16.0225 1.28448 16.4512 1.35344 16.9898C1.36807 17.1039 1.47243 17.1846 1.58655 17.17C1.6483 17.1621 1.70328 17.127 1.73643 17.0743L1.86865 16.8676C1.99553 16.6731 2.10644 16.5147 2.20137 16.3925C3.69554 14.4692 6.13777 13.3823 9.35515 13.3378L10.4167 13.3364V17.0757C10.4167 17.3101 10.6086 17.5 10.8453 17.5C10.959 17.5 11.068 17.4553 11.1483 17.3757L18.145 10.45C18.3961 10.2015 18.3961 9.79853 18.145 9.55L11.1483 2.62426C10.981 2.45858 10.7096 2.45858 10.5422 2.62426C10.4618 2.70383 10.4167 2.81174 10.4167 2.92426V6.40399Z"></path></symbol><symbol data-v-fe76cb40="" id="icon-report" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path data-v-fe76cb40="" fill-rule="evenodd" clip-rule="evenodd" d="M10.8389 1.89381C11.0873 2.03868 11.2939 2.24532 11.4388 2.49366L18.9369 15.0065C19.4007 15.8015 19.1322 16.8221 18.3371 17.2859C18.0822 17.4346 17.7924 17.5129 17.4973 17.5129H2.50041C1.57993 17.5129 0.83374 16.7667 0.83374 15.8462C0.83374 15.5512 0.912088 15.2614 1.06078 15.0065L8.5595 2.49366C9.0233 1.69857 10.0438 1.43001 10.8389 1.89381ZM10.3118 13.3459C10.6283 13.3459 10.8848 13.6025 10.8848 13.9189V14.4918C10.8848 14.8082 10.6283 15.0647 10.3118 15.0647H9.73893C9.42252 15.0647 9.16602 14.8082 9.16602 14.4918V13.9189C9.16602 13.6025 9.42252 13.3459 9.73893 13.3459H10.3118ZM10.8356 7.09513C10.8356 6.86502 10.6491 6.67847 10.419 6.67847H9.58512C9.35501 6.67847 9.16846 6.86502 9.16846 7.09513V12.0956C9.16846 12.3257 9.35501 12.5123 9.58512 12.5123H10.419C10.6491 12.5123 10.8356 12.3257 10.8356 12.0956V7.09513Z"></path></symbol><symbol data-v-fe76cb40="" id="icon-immerse" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path data-v-fe76cb40="" fill-rule="evenodd" clip-rule="evenodd" d="M0.25 1C0.25 0.585786 0.585786 0.25 1 0.25H4C4.41421 0.25 4.75 0.585786 4.75 1C4.75 1.41421 4.41421 1.75 4 1.75H1.75V4C1.75 4.41421 1.41421 4.75 1 4.75C0.585786 4.75 0.25 4.41421 0.25 4V1ZM0.25 19C0.25 19.4142 0.585786 19.75 1 19.75H4C4.41421 19.75 4.75 19.4142 4.75 19C4.75 18.5858 4.41421 18.25 4 18.25H1.75V16C1.75 15.5858 1.41421 15.25 1 15.25C0.585786 15.25 0.25 15.5858 0.25 16V19ZM19 0.25C19.4142 0.25 19.75 0.585786 19.75 1V4C19.75 4.41421 19.4142 4.75 19 4.75C18.5858 4.75 18.25 4.41421 18.25 4V1.75H16C15.5858 1.75 15.25 1.41421 15.25 1C15.25 0.585786 15.5858 0.25 16 0.25H19ZM19.75 19C19.75 19.4142 19.4142 19.75 19 19.75H16C15.5858 19.75 15.25 19.4142 15.25 19C15.25 18.5858 15.5858 18.25 16 18.25H18.25V16C18.25 15.5858 18.5858 15.25 19 15.25C19.4142 15.25 19.75 15.5858 19.75 16V19ZM7 5C5.89543 5 5 5.89543 5 7V13C5 14.1046 5.89543 15 7 15H13C14.1046 15 15 14.1046 15 13V7C15 5.89543 14.1046 5 13 5H7Z"></path></symbol><symbol data-v-fe76cb40="" id="icon-wechat" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path data-v-fe76cb40="" fill-rule="evenodd" clip-rule="evenodd" d="M13.5578 5.34061C12.0476 2.85722 8.90911 1.73257 6.11813 2.05358C4.56413 2.23231 3.0449 2.85861 1.88463 3.92471C1.00689 4.72863 0.354462 5.78486 0.109889 6.95889C-0.187864 8.37395 0.125815 9.85314 0.957723 11.0298C1.28982 11.4994 1.68479 11.9193 2.11951 12.2941C2.25136 12.4079 2.38694 12.5172 2.52543 12.6228C2.59301 12.6742 2.66115 12.7249 2.73011 12.7745C2.74195 12.7831 2.75392 12.7902 2.76512 12.7969C2.80389 12.8201 2.83351 12.8378 2.81653 12.8887L2.67458 13.3177C2.53986 13.7252 2.40492 14.1325 2.26998 14.5399C2.22084 14.6883 2.17169 14.8366 2.12256 14.985L2.61572 14.7368C2.85714 14.6151 3.09863 14.4935 3.34012 14.3719C3.58099 14.2507 3.82186 14.1294 4.06266 14.0081L4.40902 13.8337C4.42474 13.8257 4.44104 13.8164 4.45775 13.8069C4.51759 13.7728 4.58265 13.7356 4.64501 13.7481C4.76613 13.7723 4.88708 13.7972 5.00801 13.8221C5.08094 13.8372 5.15386 13.8522 5.22681 13.867C6.06287 14.0373 6.88508 14.1348 7.73859 14.0675C7.4486 13.0669 7.44915 12.0016 7.7559 11.0045C8.09853 9.88624 8.81438 8.89831 9.74448 8.19773C11.0171 7.23915 12.6431 6.81493 14.2212 6.99199C14.0895 6.4081 13.8688 5.85148 13.5578 5.34061ZM4.77922 5.02147C4.28094 5.02147 3.71299 5.35514 3.71299 5.90829C3.71299 6.46088 4.28066 6.79844 4.77922 6.79844C5.29233 6.79844 5.66293 6.42291 5.66293 5.90829C5.66293 5.39311 5.29205 5.02147 4.77922 5.02147ZM10.6158 5.90829C10.6158 6.42444 10.2434 6.79844 9.7296 6.79844C9.23076 6.79844 8.66641 6.46032 8.66641 5.90829C8.66641 5.3557 9.23104 5.02147 9.7296 5.02147C10.2431 5.02147 10.6158 5.39158 10.6158 5.90829ZM17.7911 8.53846C15.3552 6.80489 11.734 6.93368 9.53048 9.01108C8.77779 9.72181 8.22909 10.6485 8.04061 11.6744C7.78288 13.0799 8.22536 14.5441 9.17304 15.605C10.0674 16.6063 11.2889 17.2564 12.5986 17.5166C13.4216 17.6806 14.2559 17.6931 15.0799 17.5344C15.2863 17.4948 15.4911 17.4481 15.6954 17.3986C15.7826 17.3774 15.8697 17.3559 15.9568 17.334C15.9655 17.3319 15.9784 17.3272 15.9934 17.3219C16.0359 17.3068 16.0949 17.2858 16.118 17.2984C16.2476 17.3695 16.3771 17.4408 16.5066 17.5122L17.0557 17.8142L17.0577 17.8153L17.0598 17.8164C17.3912 17.9986 17.7227 18.1809 18.054 18.3634C17.9748 18.0977 17.895 17.832 17.8153 17.5664L17.8146 17.5641L17.6749 17.0981L17.5814 16.7863L17.5332 16.6257C17.5159 16.5675 17.5927 16.5183 17.6556 16.4779C17.6753 16.4653 17.6937 16.4535 17.7073 16.4426C18.0608 16.1622 18.3952 15.8558 18.6963 15.5191C19.1832 14.9747 19.5895 14.3498 19.8161 13.6505C20.0122 13.039 20.0488 12.392 19.9377 11.7604C19.7098 10.438 18.8643 9.30511 17.7911 8.53846ZM15.2396 11.0049C15.1595 10.6088 15.5334 10.1787 15.931 10.1787C16.3063 10.1787 16.7409 10.3931 16.8096 10.7989C16.8724 11.1695 16.556 11.4696 16.227 11.5617C15.8032 11.6802 15.3326 11.4649 15.2396 11.0049ZM12.0348 10.1787C11.6369 10.1787 11.2573 10.6064 11.3385 11.0049C11.4325 11.4667 11.9081 11.68 12.3327 11.5617C12.6626 11.4696 12.9753 11.1695 12.9134 10.7989C12.8453 10.3914 12.4112 10.1787 12.0348 10.1787Z"></path></symbol><symbol data-v-fe76cb40="" id="icon-weibo" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path data-v-fe76cb40="" fill-rule="evenodd" clip-rule="evenodd" d="M-0.000244141 13.0984C-0.000244141 8.70757 6.6145 3.5004 9.18008 4.57052C10.1717 4.98415 9.97381 6.1693 9.85415 6.88576C9.8069 7.16863 9.77186 7.37844 9.82705 7.43887C9.92921 7.55074 10.2955 7.42054 10.7994 7.2414C11.8362 6.87286 13.4557 6.2972 14.5566 7.19617C15.2665 7.77576 14.9657 8.72382 14.7905 9.27603C14.7289 9.4701 14.6829 9.61528 14.7017 9.6784C14.741 9.81053 14.9858 9.91133 15.317 10.0477C15.926 10.2984 16.8269 10.6692 17.2784 11.5759C18.3716 13.7713 15.2036 18.2504 8.62234 18.2504C3.25024 18.2504 -0.000244141 15.6688 -0.000244141 13.0984ZM8.45309 17.057C11.7733 16.7393 14.2944 14.7397 14.0842 12.5908C13.874 10.4418 11.012 8.95732 7.69179 9.27503C4.37159 9.59274 1.85045 11.5924 2.06068 13.7413C2.2709 15.8902 5.13288 17.3747 8.45309 17.057Z"></path><path data-v-fe76cb40="" fill-rule="evenodd" clip-rule="evenodd" d="M10.7098 12.7012C11.1162 14.1374 10.0604 15.6852 8.35157 16.1581C6.64275 16.6311 4.92801 15.8502 4.5216 14.4139C4.11518 12.9777 5.171 11.4299 6.87982 10.957C8.58865 10.484 10.3034 11.2649 10.7098 12.7012ZM7.67026 13.6265C7.89619 14.1072 7.61751 14.7092 7.04779 14.9711C6.47808 15.2331 5.83308 15.0558 5.60715 14.5751C5.38122 14.0945 5.6599 13.4925 6.22962 13.2306C6.79933 12.9686 7.44433 13.1459 7.67026 13.6265ZM8.41746 13.3766C8.63945 13.2745 8.74804 13.0399 8.66001 12.8526C8.57197 12.6654 8.32065 12.5963 8.09866 12.6984C7.87667 12.8004 7.76808 13.035 7.85612 13.2223C7.94415 13.4095 8.19547 13.4786 8.41746 13.3766Z"></path><path data-v-fe76cb40="" d="M13.648 3.54836C13.9523 3.47388 14.2712 3.43418 14.6004 3.43418C16.7813 3.43418 18.5492 5.18267 18.5492 7.33955C18.5492 7.81593 18.4633 8.27085 18.3066 8.69104C18.168 9.06261 18.3602 9.47493 18.7359 9.61199C19.1116 9.74904 19.5285 9.55894 19.6671 9.18737C19.8822 8.61063 19.9993 7.98781 19.9993 7.33955C19.9993 4.3906 17.5822 2 14.6004 2C14.1528 2 13.717 2.05403 13.2996 2.15619C12.9109 2.25133 12.6738 2.64011 12.77 3.02455C12.8662 3.40899 13.2593 3.6435 13.648 3.54836Z"></path><path data-v-fe76cb40="" d="M14.2887 6.05162C14.388 6.02824 14.4923 6.01569 14.6004 6.01569C15.3397 6.01569 15.939 6.6084 15.939 7.33955C15.939 7.49914 15.9108 7.65062 15.8596 7.7904C15.7232 8.16277 15.9179 8.57396 16.2944 8.70881C16.6709 8.84366 17.0867 8.65112 17.2231 8.27875C17.3307 7.98466 17.3891 7.66805 17.3891 7.33955C17.3891 5.81633 16.1406 4.58152 14.6004 4.58152C14.3784 4.58152 14.1614 4.60734 13.9529 4.65643C13.5633 4.74813 13.3227 5.1348 13.4154 5.52008C13.5082 5.90535 13.8991 6.14333 14.2887 6.05162Z"></path></symbol><symbol data-v-fe76cb40="" id="icon-qq" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path data-v-fe76cb40="" d="M11.8841 17.1943C11.1815 17.1943 10.5625 17.2136 10.0541 17.26C9.44625 17.2112 8.8365 17.1898 8.22671 17.1956C6.20498 17.1956 4.40588 17.9613 4.40588 18.5263C4.40588 19.0681 5.89998 19.0076 7.91657 18.987C8.64426 18.985 9.3699 18.9096 10.0824 18.7618C10.6796 18.8879 11.4079 18.9677 12.193 18.9741C14.2095 18.9947 15.7024 19.0552 15.7024 18.5173C15.7024 17.9549 13.9045 17.1943 11.8841 17.1943V17.1943Z"></path><path data-v-fe76cb40="" d="M16.9138 11.6311C16.5346 10.6112 16.1212 9.60428 15.6745 8.61206C15.6951 8.37141 15.7054 8.12818 15.7054 7.8811C15.7054 4.08086 13.7622 1 10.0649 1C6.36759 1 4.42307 4.08086 4.42307 7.8811C4.42307 8.11274 4.43208 8.34052 4.45138 8.56573C3.99804 9.5756 3.57913 10.6006 3.19536 11.6389C2.41678 13.7494 2.38203 15.6566 2.65357 15.7982C2.84661 15.8985 3.54797 15.1611 4.21845 13.9669C4.66115 16.7801 6.53102 18.8842 10.0649 18.8842C13.5871 18.8842 15.457 16.7916 15.9074 13.99C16.5728 15.1611 17.2664 15.8818 17.4569 15.7814C17.7284 15.6399 17.6937 13.7365 16.9138 11.6311V11.6311Z"></path><path data-v-fe76cb40="" d="M8.5542 3.2522C8.00598 3.26507 7.57358 3.90981 7.58902 4.69739C7.60447 5.48369 8.06132 6.11299 8.60954 6.1027C9.15776 6.0924 9.59016 5.44637 9.57472 4.65879C9.56056 3.87249 9.10243 3.24319 8.5542 3.25348V3.2522ZM11.5862 3.26764C11.0315 3.25734 10.5695 3.88278 10.5541 4.66651C10.5386 5.44895 10.9749 6.0924 11.5308 6.1027C12.0842 6.11299 12.5475 5.48755 12.5629 4.70512C12.5784 3.92139 12.1408 3.27794 11.5862 3.26764V3.26764Z"></path><path data-v-fe76cb40="" d="M13.6704 9.57861C12.5971 9.76521 11.354 9.87074 10.0285 9.87074C8.7287 9.87074 7.50742 9.76779 6.44959 9.58762C5.71605 10.4962 5.65942 11.8307 5.65942 13.3184C5.65942 16.0505 7.20371 18.2665 10.0645 18.2665C12.924 18.2665 14.4696 16.0505 14.4696 13.3184C14.4696 11.8243 14.4104 10.4859 13.6704 9.57861V9.57861Z"></path><path data-v-fe76cb40="" d="M10.0628 6.56616C8.14273 6.56616 6.58557 6.95223 6.58557 7.26238C6.58557 7.57124 8.62146 8.42188 10.0641 8.42188C11.5054 8.42188 13.5413 7.55065 13.5413 7.26238C13.5413 6.97411 11.9842 6.56745 10.0641 6.56745L10.0628 6.56616Z"></path><path data-v-fe76cb40="" d="M15.6744 8.6121L15.6757 8.59151C14.264 9.05866 12.2718 9.35078 10.0648 9.35078C7.8513 9.35078 5.85402 9.05737 4.441 8.58765C4.14115 9.25684 3.85546 9.93375 3.58521 10.6171C4.45644 10.9054 5.43192 11.1357 6.48332 11.2992V13.8858C6.48332 13.8858 7.22715 14.0235 7.92981 14.0531C8.42784 14.0737 8.95676 13.9888 8.95676 13.9888V11.5398C9.32095 11.5565 9.6903 11.5656 10.0635 11.5656C12.4919 11.5656 14.7311 11.2142 16.5251 10.6222C16.2566 9.94593 15.9729 9.27571 15.6744 8.6121V8.6121Z"></path><path data-v-fe76cb40="" d="M8.87981 4.24829C8.63787 4.24829 8.44226 4.53656 8.44226 4.89174C8.44226 5.24693 8.63787 5.5352 8.87981 5.5352C9.12046 5.5352 9.31736 5.24693 9.31736 4.89174C9.31736 4.53656 9.12046 4.24829 8.87981 4.24829V4.24829ZM12.0997 4.65624C12.0997 4.65624 11.9246 4.41816 11.4819 4.48122C11.0444 4.54428 10.8745 4.83126 10.8423 4.86215C10.8423 4.86215 10.7381 5.0243 10.8115 5.12467C10.8848 5.22505 11.0174 5.06676 11.0174 5.06676C11.0174 5.06676 11.2194 4.78364 11.4806 4.77335C11.6273 4.76349 11.7729 4.80489 11.8925 4.89046C11.8925 4.89046 12.0211 4.99856 12.0984 4.89046C12.1769 4.78364 12.0997 4.65624 12.0997 4.65624V4.65624Z"></path></symbol></svg> <div data-v-fe76cb40="" badge="62" class="panel-btn with-badge"><svg data-v-0f838daa="" data-v-fe76cb40="" class="sprite-icon icon-zan"><use data-v-0f838daa="" xlink:href="#icon-zan"></use></svg></div> <div data-v-fe76cb40="" badge="1" class="panel-btn with-badge"><svg data-v-0f838daa="" data-v-fe76cb40="" class="sprite-icon icon-comment"><use data-v-0f838daa="" xlink:href="#icon-comment"></use></svg></div> <div data-v-fe76cb40="" class="panel-btn"><svg data-v-0f838daa="" data-v-fe76cb40="" class="sprite-icon icon-collect"><use data-v-0f838daa="" xlink:href="#icon-collect"></use></svg> <div data-v-d0b73df6="" data-v-fe76cb40="" class="collect-popover"><div data-v-d0b73df6="" class="title">收藏成功！</div> <div data-v-d0b73df6="" class="sub-title">
    已添加到「」，
    <span data-v-d0b73df6="" class="modify-btn">点击更改</span></div></div> <!----> <!----></div> <div data-v-fe76cb40="" class="share-btn panel-btn"><svg data-v-0f838daa="" data-v-fe76cb40="" class="sprite-icon icon-share"><use data-v-0f838daa="" xlink:href="#icon-share"></use></svg> <div data-v-fe76cb40="" class="share-popup"><ul data-v-fe76cb40=""><li data-v-fe76cb40="" class="share-item wechat"><svg data-v-0f838daa="" data-v-fe76cb40="" class="sprite-icon share-icon icon-wechat"><use data-v-0f838daa="" xlink:href="#icon-wechat"></use></svg> <span data-v-fe76cb40="" class="share-item-title">微信</span> <div data-v-fe76cb40="" class="wechat-qrcode"><img data-v-fe76cb40="" src="https://juejin.cn/post/6844903896230395918" class="wechat-qrcode-img" style="display: none;"> <span data-v-fe76cb40="" class="wechat-qrcode-title">微信扫码分享</span></div></li> <li data-v-fe76cb40="" class="share-item weibo"><svg data-v-0f838daa="" data-v-fe76cb40="" class="sprite-icon share-icon icon-weibo"><use data-v-0f838daa="" xlink:href="#icon-weibo"></use></svg> <span data-v-fe76cb40="" class="share-item-title">新浪微博</span></li> <li data-v-fe76cb40="" class="share-item qq"><svg data-v-0f838daa="" data-v-fe76cb40="" class="sprite-icon share-icon icon-qq"><use data-v-0f838daa="" xlink:href="#icon-qq"></use></svg> <span data-v-fe76cb40="" class="share-item-title">QQ</span></li></ul></div></div> <div data-v-fe76cb40="" class="divider"></div> <div data-v-fe76cb40="" class="panel-btn"><svg data-v-0f838daa="" data-v-fe76cb40="" class="sprite-icon icon-report"><use data-v-0f838daa="" xlink:href="#icon-report"></use></svg></div> <span data-v-fe76cb40="" class="tooltip"><span class="byte-tooltip__wrapper"><div data-v-fe76cb40="" class="panel-btn"><svg data-v-0f838daa="" data-v-fe76cb40="" class="sprite-icon icon-immerse"><use data-v-0f838daa="" xlink:href="#icon-immerse"></use></svg></div></span></span></div></div> <!----></main> <!----></div> <!----> <div class="global-component-box"><div data-v-262fe4c6="" class="alert-list alert-list"></div> <div data-v-0b2d23d8="" class="suspension-panel suspension-panel"><!----> <button data-v-0b2d23d8="" title="回到顶部" class="btn to-top-btn" style="display: none;"><svg data-v-0b2d23d8="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-0b2d23d8="" fill-rule="evenodd" clip-rule="evenodd" d="M2.75 1C2.33579 1 2 1.33579 2 1.75C2 2.16421 2.33579 2.5 2.75 2.5H13.25C13.6642 2.5 14 2.16421 14 1.75C14 1.33579 13.6642 1 13.25 1H2.75ZM7.24407 3.87287C7.64284 3.41241 8.35716 3.41241 8.75593 3.87287L13.0622 8.84535C13.6231 9.49299 13.163 10.5 12.3063 10.5H10V14C10 14.5523 9.55228 15 9 15H7C6.44772 15 6 14.5523 6 14V10.5H3.69371C2.83696 10.5 2.37691 9.49299 2.93778 8.84535L7.24407 3.87287Z" fill="#8A919F"></path></svg></button> <button data-v-0b2d23d8="" title="建议反馈" class="btn meiqia-btn" style=""><svg data-v-0b2d23d8="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-feedback"><path data-v-0b2d23d8="" fill-rule="evenodd" clip-rule="evenodd" d="M1.8252 4.002C1.8252 2.80032 2.79935 1.82617 4.00102 1.82617H12.001C13.2027 1.82617 14.1768 2.80032 14.1768 4.002V9.71628C14.1768 10.918 13.2027 11.8921 12.001 11.8921H9.43308L6.92709 14.1281C6.4455 14.5578 5.68234 14.216 5.68234 13.5706V11.8921H4.00102C2.79934 11.8921 1.8252 10.918 1.8252 9.71628V4.002ZM11.2414 7.86753C11.3826 7.65526 11.3249 7.36878 11.1126 7.22764C10.9004 7.08651 10.6139 7.14417 10.4728 7.35643C9.94042 8.15705 9.03153 8.68309 7.99997 8.68309C6.96841 8.68309 6.05952 8.15705 5.52719 7.35643C5.38605 7.14417 5.09957 7.08651 4.88731 7.22764C4.67504 7.36878 4.61738 7.65526 4.75852 7.86753C5.45467 8.91452 6.64645 9.60617 7.99997 9.60617C9.35349 9.60617 10.5453 8.91452 11.2414 7.86753Z" fill="#1E80FF"></path></svg></button></div> <!----> <!----> <!----> <!----> <!----></div> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----></div></div></div><script>window.__NUXT__=(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F){q.loading=a;q.skeleton=b;q.cursor=f;q.data=[];q.total=d;q.hasMore=b;return {layout:"default",data:[{renderPost:b,additionalDataUseCSR:b}],fetch:[{bdPageUrlForNav:"https:\u002F\u002Fbd.juejin.cn?utm_campaign=bd&utm_source=web&utm_medium=nav",queryString:e,isShowUserDropdownList:a,isShowAddMoreList:a,isFocus:a,isPhoneMenuShow:a,visibleBadge:a,placeholder:e,hiddenProperty:"hidden",searchHistoryVisible:a,searchHistoryItems:[],tabBadge:c,isChangePlaceholder:b,showMallBridge:a},{articleBanner:{url:"https:\u002F\u002Fjuejin.cn\u002Fextension\u002F?utm_source=standalone&utm_medium=post&utm_campaign=extension_promotion",title:"安装掘金浏览器插件",content:"多内容聚合浏览、多引擎快捷搜索、多工具便捷提效、多模式随心畅享，你想要的，这里都有！"},showExtension:b}],error:c,state:{view:{activityIndex:{activityList:[],pageInfo:{hasNextPage:a,endCursor:e},afterPosition:e,activityListIsLoading:b,activityListIsError:a,userActivityList:[],placeholder:e,actionType:{FETCH:"@\u002Fview\u002Factivity-index\u002FFETCH",FETCH_RECOMMEND_LIST:"@\u002Fview\u002Factivity-index\u002FFETCH_RECOMMEND_LIST",RESET_ACTIVITY_LIST:"@\u002Fview\u002Factivity-index\u002FRESET_ACTIVITY_LIST",FETCH_USER_ACTIVITY_LIST:"@\u002Fview\u002Factivity-index\u002FFETCH_USER_ACTIVITY_LIST",FETCH_NEW_COUNT:"@\u002Fview\u002Factivity-index\u002FFETCH_NEW_COUNT",DELETE_ACTIVITY:"@\u002Fview\u002Factivity-index\u002FDELETE_ACTIVITY",TOGGLE_FOLLOW_USER:"@\u002Fview\u002Factivity-index\u002FTOGGLE_FOLLOW_USER",FETCH_ENTRY_COMMENT_LIST:"@\u002Fview\u002Factivity-index\u002FFETCH_ENTRY_COMMENT_LIST",UPDATE_LIST_LOADING:"@\u002Fview\u002Factivity-index\u002FUPDATE_LIST_LOADING",RESET:"@\u002Fview\u002Factivity-index\u002FRESET"},hotList:{list:[],after:e,loading:a,hasNextPage:a,actionType:{UPDATE_STATE:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FFETCH",RESET:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FRESET"}},sidebar:{bannerList:[],actionType:{RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002FRESET",UPDATE_STATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002FUPDATE_STATE",FETCH_BANNER:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002FFETCH_BANNER"},recommend:{pageSize:h,page:d,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FUPDATE",FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FFETCH_MORE",RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FRESET"},after:d},followed:{pageSize:h,page:d,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FUPDATE",FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FFETCH_MORE",RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FRESET"},after:d},recommendPin:{list:[],after:e,loading:a,hasNextPage:b,actionType:{UPDATE_STATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FFETCH",RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FRESET"}}},topicPinList:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FUPDATE",FETCH:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FFETCH_MORE",RESET:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FRESET"},topicId:e,navList:[{type:k,name:k,title:"推荐 ",id:k},{type:m,name:m,title:"热门 ",id:m},{type:o,name:o,title:"关注 ",id:o},{type:i,name:"opensource",title:"开源推荐 ",id:"5c09ea2b092dcb42c740fe73"},{type:i,name:"recruitment",title:"内推招聘",id:"5abb61e1092dcb4620ca3322"},{type:i,name:"dating",title:"掘金相亲",id:"5abcaa67092dcb4620ca335c"},{type:i,name:"slacking",title:"上班摸鱼",id:"5c106be9092dcb2cc5de7257"},{type:i,name:"app",title:"应用安利",id:"5b514af1092dcb61bd72800d"},{type:i,name:"tool",title:"开发工具",id:"5abb67d2092dcb4620ca3324"},{type:i,name:"news",title:"New资讯",id:"5c46a17f092dcb4737217152"}],sortType:p}},search:{search_result_from:d,query:e,list:[],linkList:[],loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fsearch\u002FFETCH",FETCH_MORE:"@\u002Fview\u002Fsearch\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fsearch\u002FRESET"}},columnIndex:{list:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FRESET"},sort:n,category:"all"},hotList:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FUPDATE",FETCH:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FFETCH_MORE",RESET:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FRESET"}}},timelineIndex:{tdkTemplates:[],categoryNavList:[],tagNavList:[],splitTagList:[],timelineAdList:[],list:[],sort:p,category:k,categoryId:e,tagId:e,tag:"全部",actionType:{FETCH_TIMELINE_LIST:"@\u002Fview\u002FtimelineIndex\u002FFETCH_TIMELINE_LIST",FETCH_CATEGORY_LIST:"@\u002Fview\u002FtimelineIndex\u002FFETCH_CATEGORY_LIST",FETCH_TAG_LIST:"@\u002Fview\u002FtimelineIndex\u002FFETCH_TAG_LIST",DELETE_ENTRY:"@\u002Fview\u002FtimelineIndex\u002FDELETE_ENTRY",DELETE_USER_ENTRIES:"@\u002Fview\u002FtimelineIndex\u002FDELETE_USER_ENTRIES",DELETE_TAG_ENTRIES:"@\u002Fview\u002FtimelineIndex\u002FDELETE_TAG_ENTRIES",FETCH_MORE:"@\u002Fview\u002FtimelineIndex\u002FFETCH_MORE",FETCH:"@\u002Fview\u002FtimelineIndex\u002FFETCH",RESET:"@\u002Fview\u002FtimelineIndex\u002FRESET"},serverRenderTimelineList:a,timelineList:{list:[],cursor:f,skeleton:b,loading:a,hasMore:b,categoryId:e,tagId:e,sort:e,actionType:{UPDATE_STATE:"timeline-list\u002FUPDATE_STATE",FETCH_MORE:"timeline-list\u002FFETCH_MORE",FETCH:"timeline-list\u002FFETCH",RESET:"timeline-list\u002FRESET"}},recommendList:{list:[],cursor:f,loading:a,skeleton:b,hasMore:b,actionType:{UPDATE_STATE:"recommend-list\u002FUPDATE_STATE",FETCH_MORE:"recommend-list\u002FFETCH_MORE",FETCH:"recommend-list\u002FFETCH",RESET:"recommend-list\u002FRESET"}},followingList:{list:[],cursor:f,skeleton:b,loading:a,hasMore:b,actionType:{UPDATE_STATE:"following-list\u002FUPDATE_STATE",FETCH_MORE:"following-list\u002FFETCH_MORE",FETCH:"following-list\u002FFETCH",RESET:"following-list\u002FRESET"}}},subscribe:{subscribed:{list:[],cursor:f,skeleton:b,loading:a,hasMore:a,actionType:{UPDATE_STATE:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FUPDATE_STATE",FETCH_MORE:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FFETCH_MORE",FETCH:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FFETCH",RESET:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FRESET"}},all:{list:[],cursor:f,loading:a,skeleton:b,hasMore:a,linkList:e,actionType:{UPDATE_STATE:"view\u002Fsubscribe\u002Fall\u002Flist\u002FUPDATE_STATE",FETCH_MORE:"view\u002Fsubscribe\u002Fall\u002Flist\u002FFETCH_MORE",FETCH:"view\u002Fsubscribe\u002Fall\u002Flist\u002FFETCH",RESET:"view\u002Fsubscribe\u002Fall\u002Flist\u002FRESET"}}},entryPublic:{entry:{user:{}},relatedEntryList:[],relatedCollectionList:[],actionType:{FETCH:"@\u002Fview\u002FentryPublic\u002FFETCH",RESET:"@\u002Fview\u002FentryPublic\u002FRESET"}},user:{user:{},serverRendered:a,userAnnuals:[],actionType:{FETCH:"@\u002Fview\u002Fuser\u002FFETCH",RESET:"@\u002Fview\u002Fuser\u002FRESET",UPDATE:"@\u002Fview\u002Fuser\u002FUPDATE",FETCH_ANNUALS:"@\u002Fview\u002Fuser\u002FFETCH_ANNUALS"},detailList:{actionType:{RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FRESET"},likeList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FRESET"}},postList:{list:[],hasMore:a,skeleton:a,loading:a,sort:n,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FRESET"}},searchList:{list:[],hasMore:a,skeleton:a,loading:a,key_word:e,search_type:d,cursor:f,isPostSearch:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FRESET"}},tagList:{list:[],loading:a,skeleton:b,hasMore:a,cursor:f,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FRESET"}},collectionList:{list:[],userId:e,skeleton:b,hasMore:a,cursor:f,type:"created",loading:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FRESET",TOGGLE_FOLLOW_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FTOGGLE_FOLLOW_COLLECTION",FOLLOW_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FFOLLOW_COLLECTION",UNFOLLOW_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FUNFOLLOW_COLLECTION",DELELTE_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FDELELTE_COLLECTION",ADD_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FADD_COLLECTION",EDIT_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FEDIT_COLLECTION"}},followerList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FRESET"}},followingList:{list:[],cursor:f,hasMore:a,skeleton:a,loading:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FRESET"}},followingTeamsList:{list:[],cursor:f,hasMore:a,skeleton:a,loading:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FRESET"}},activityList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FRESET"}},bookList:{list:[],cursor:f,skeleton:b,hasMore:a,loading:a,type:"wrote",actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FRESET"}},pinList:{list:[],hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FRESET"}},courseList:{list:[],hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FRESET"}},pinPraisedList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FRESET"}},eventList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FRESET"}},selfColumnList:{list:[],hasMore:a,skeleton:a,loading:a,cursor:f,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FRESET"}},columnFollowedList:{list:[],hasMore:a,skeleton:a,loading:a,cursor:f,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FRESET",FILTER:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FFILTER"}},realtimes:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FRESET",DELETE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FDELETE"}},realtimeliked:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FRESET",DELETE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FDELETE"}}}},tag:{tag:{},actionType:{FETCH:"@\u002Fview\u002Ftag\u002FFETCH",FETCH_LIST:"@\u002Fview\u002Ftag\u002FFETCH_LIST",RESET:"@\u002Fview\u002Ftag\u002FRESET"},list:{list:[],cursor:f,loading:a,skeleton:a,hasMore:a,actionType:{UPDATE_STATE:"@\u002Fview\u002Ftag\u002Flist\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Ftag\u002Flist\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Ftag\u002Flist\u002FFETCH",RESET:"@\u002Fview\u002Ftag\u002Flist\u002FRESET"}}},notification:{user:{actionType:{READ_ALL:"@\u002Fview\u002Fnotification\u002Fuser\u002FREAD_ALL",RESET:"@\u002Fview\u002Fnotification\u002Fuser\u002FRESET"},listState:{list:[],cursor:f,hasMore:a,isLoading:a,messageType:3,msgTotal:d,msgSubMap:{"1":d,"2":d,"3":d,"4":d,"7":d}},list:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FRESET"}}},system:{actionType:{READ_ALL:"@\u002Fview\u002Fnotification\u002Fsystem\u002FREAD_ALL",RESET:"@\u002Fview\u002Fnotification\u002Fsystem\u002FRESET"},list:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FRESET"}}}},column:{serverRenderList:a,column:{id:w},entry:{id:w,screenshot:void 0,liked:a,article_id:w,article_info:{article_id:w,user_id:"501033033824039",category_id:"6809635626661445640",tag_ids:[6809641169492902000],visible_level:d,link_url:"https:\u002F\u002Fjuejin.im\u002Fpost\u002F6844903896230395918",cover_image:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c232419ecaaecc~tplv-t2oaga2asx-image.image",is_gfw:d,title:"iOS 编译原理与应用",brief_content:"在Xcode中，当我们按下command + B进行build操作后发生了那些事情，这是一个将代码编译的过程。Xcode现在使用的编译器是LLVM，Xcode 早期使用的是GCC编译器，由于一些历史原因，从Xcode5开始正式过渡到使用LLVM编译器。下文将着重介绍LLVM。 …",is_english:d,is_original:g,user_index:5.9583765162268,original_type:d,original_author:e,content:"\u003Ch1 class=\"heading\"\u003E引言\u003C\u002Fh1\u003E\n\u003Cp\u003E在Xcode中，当我们按下command + B进行build操作后发生了那些事情，这是一个将代码编译的过程。Xcode现在使用的编译器是LLVM，Xcode 早期使用的是GCC编译器，由于一些历史原因，从Xcode5开始正式过渡到使用LLVM编译器。下文将着重介绍LLVM。\u003C\u002Fp\u003E\n\u003Ch1 class=\"heading\"\u003E编译原理\u003C\u002Fh1\u003E\n\u003Ch2 class=\"heading\"\u003ELLVM简介\u003C\u002Fh2\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c22fea55748d58~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003ELLVM项目是模块化、可重用的编译器以及工具链技术的集合。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E美国计算机协会（ACM）将其 2012 年软件系统奖颁给了LLVM，之前曾获得此奖项的软件和技术包括：Java、Apache、Mosaic、the World Wide Web、SmallTalk、UNIX、Eclipse等等。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ELLVM项目的发展起源于2000年伊利诺伊大学厄巴纳-香槟分校维克拉姆·艾夫（Vikram Adve）与克里斯·拉特纳（Chris Lattner）的研究，他们想要为所有静态及动态语言创造出动态的编译技术。LLVM是以BSD授权来发展的开源软件。2005年，苹果电脑雇用了克里斯·拉特纳及他的团队为苹果电脑开发应用程序系统，LLVM为现今Mac OS X及iOS开发工具的一部分。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ELLVM的命名最早源自于底层虚拟机（Low Level Virtual Machine）的首字母缩写，由于这个项目的范围并不局限于创建一个虚拟机，这个缩写导致了广泛的疑惑。官方描述如下：The name “LLVM” itself is not an acronym；it is the full name of the project。LLVM这个名称并不是首字母缩略词，它是项目的全名。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ELLVM开始成长之后，成为众多编译工具及低级工具技术的统称，使得这个名字变得更不贴切，开发者因而决定放弃这个缩写的意涵，现今LLVM已单纯成为一个品牌，适用于LLVM下的所有项目，包含LLVM中介码（LLVM IR）、LLVM除错工具、LLVM C++标准库等。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E目前NDK\u002FXcode均采用LLVM作为默认的编译器。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 class=\"heading\"\u003E传统的编译器架构\u003C\u002Fh2\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c2301ada5faae3~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EFrontend：前端，对源码做词法分析、语法分析、语义分析、生成中间代码\u003C\u002Fli\u003E\n\u003Cli\u003EOptimizer：优化器，用于中间代码优化\u003C\u002Fli\u003E\n\u003Cli\u003EBackend：后端，用于生成机器码\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 class=\"heading\"\u003ELLVM架构\u003C\u002Fh2\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c230372fc40295~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003E前端将各种类型的源代码编译为中间代码，也就是bitcode，在LLVM体系内，不同的语言有不同的编译器前端，常见的如clang负责 c\u002Fc++\u002Foc的编译，flang负责fortran的编译，swiftc负责swift的编译等等。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E不同的前后端使用统一的中间代码LLVM Intermediate Representation(LLVM IR)。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E优化阶段是一个通用的阶段，针对的是统一的LLVM IR，无论是新的编程语言，还是支持新的硬件设备，都不需要对优化阶段做修改，具体是对bitcode进行各种类型的优化，将bitcode代码进行一些逻辑的转换，使得代码效率更高，体积更小，比如DeadStrip\u002FSimplifyCFG。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E后端，也叫CodeGenerator，负责把优化后的bitcode编译为指定目标架构的机器码，比如 X86Backend负责把bitcode编译为x86指令集的机器码。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EGCC相比之下，前后端耦合在了一起。所以，GCC支持一门新的语言，或是为了支持一个新的平台，就变得异常困难。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ELLVM现在被作为实现各种静态和运行时编译语言通用基础架构（GCC 家族、Java、.Net、Python、Ruby、Scheme、Haskell、D等）。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ELLVM体系中，不同语言源代码将会被转化为统一的bitcode格式，三个模块相互独立，可以充分复用。比如，如果开发一门新的语言，只要制造一个该语言的前端，将源码编译为bitcode，优化和后端不用管。同理，如果新的芯片架构问世，只需基于LLVM重新编写一套目标平台的后端即可。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 class=\"heading\"\u003EClang\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003ELLVM项目的一个子项目。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E基于LLVM架构的C\u002FC++\u002FObjective-C\u002FObjective-C++编译器前端。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E相比于 GCC，Clang具有如下优点：\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E编译速度快：在某些平台上，Clang的编译速度显著的快过GCC（Debug 模式下编译 OC 速度比 GCC 快 3 倍）；\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E占用内存小：Clang生成的AST所占用的内存是GCC的五分之一左右；\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E模块化设计：Clang采用基于库的模块化设计，易于IDE集成及其他用途的重用；\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E诊断信息可读性强：在编译过程中，Clang创建并保留了大量详细的元数据（metadata），有利于调试和错误报告；\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E设计清晰简单，容易理解，易于扩展增强。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E客观的说GCC也有很多优点：例如支持多平台，基于C无需 C++编译器即可编译。这个优点到苹果那里反而成了缺点，苹果需要的是快。\u003C\u002Fp\u003E\n\u003Ch2 class=\"heading\"\u003EClang与LLVM\u003C\u002Fh2\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c2308b0b439c74~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E广义的LLVM：整个LLVM架构\u003C\u002Fli\u003E\n\u003Cli\u003E狭义的LLVM：LLVM后端（代码优化、目标代码生成等）\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c2308efb88f492~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Ch2 class=\"heading\"\u003EOC源文件的编译过程\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003E命令行查看编译的过程：\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Eclang -ccc-print-phases main.m\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c2309eafbce5c5~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E查看preprocessor（预处理）的结果：\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Eclang -E main.m -F \u002FApplications\u002FXcode.app\u002FContents\u002FDeveloper\u002FPlatforms\u002FiPhoneSimulator.platform\u002FDeveloper\u002FSDKs\u002FiPhoneSimulator.sdk\u002FSystem\u002FLibrary\u002FFrameworks \n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c230a84fef3488~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Ch3 class=\"heading\"\u003E1. 词法分析\u003C\u002Fh3\u003E\n\u003Cp\u003E词法分析，生成Token\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Eint sum(int a,int b){\n    int c = a + b;\n    \u003Cspan class=\"hljs-built_in\"\u003Ereturn\u003C\u002Fspan\u003E c;\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Eclang -fmodules -E -Xclang -dump-tokens main.m\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c230bcff1b9eb8~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E这个命令的作用是，显示每个Token的类型、值，以及位置。参考该链接，可以看到Clang定义的所有Token类型。\n可以分为下面这4类：\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E关键字：语法中的关键字，比如 if、else、while、for 等；\u003C\u002Fli\u003E\n\u003Cli\u003E标识符：变量名；\u003C\u002Fli\u003E\n\u003Cli\u003E字面量：值、数字、字符串；\u003C\u002Fli\u003E\n\u003Cli\u003E特殊符号：加减乘除等符号。\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 class=\"heading\"\u003E2. 语法分析\u003C\u002Fh3\u003E\n\u003Cp\u003E利用上面输出的Token先按照语法组合成语义，生成类似VarDecl这样的节点，然后将这些节点按照层级关系构成抽象语法树（AST）。\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E语法分析，生成语法树（AST，Abstract Syntax Tree）\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Eclang -fmodules -fsyntax-only -Xclang -ast-dump main.m\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003ETranslationUnitDecl是根节点，表示一个编译单元；Decl表示一个声明；Expr表示的是表达式；Literal表示字面量，是一个特殊的Expr；Stmt表示陈述。\u003C\u002Fp\u003E\n\u003Cp\u003E除此之外，Clang还有众多种类的节点类型。Clang里，节点主要分成Type类型、Decl声明、Stmt陈述这三种，其他的都是这三种的派生。通过扩展这三类节点，就能够将无限的代码形态用有限的形式来表现出来。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c230e733a442bc~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c230ee06a7b486~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Ch3 class=\"heading\"\u003E3. LLVM IR\u003C\u002Fh3\u003E\n\u003Cp\u003ELLVM IR有3种表示形式，但本质上是等价的。\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003Etext：便于阅读的文本格式，类似于汇编语言，拓展名 .ll\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Eclang -S -emit-llvm main.m\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cul\u003E\n\u003Cli\u003Ememory：内存格式\u003C\u002Fli\u003E\n\u003Cli\u003Ebitcode：二进制格式，拓展名 .bc\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Eclang -c -emit-llvm main.m\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 class=\"heading\"\u003E4. IR基本语法\u003C\u002Fh3\u003E\n\u003Cp\u003E.ll 文件部分内容，如下：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c2310ae9387652~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E注释以分号 ; 开头\u003C\u002Fli\u003E\n\u003Cli\u003E全局标识符以@开头，局部标示符以%开头\u003C\u002Fli\u003E\n\u003Cli\u003Ealloca，在当前函数栈帧中分配内存\u003C\u002Fli\u003E\n\u003Cli\u003Ei32 ，32bit，4 个字节\u003C\u002Fli\u003E\n\u003Cli\u003Ealign，内存对齐\u003C\u002Fli\u003E\n\u003Cli\u003Estore，写入数据\u003C\u002Fli\u003E\n\u003Cli\u003Eload，读取数据\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch1 class=\"heading\"\u003E应用与实践\u003C\u002Fh1\u003E\n\u003Cp\u003E基于LLVM 、Clang可以做很多实践，如下：\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003ELibClang、LibTooling、Clang Plugin\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E官方参考：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Fclang.llvm.org\u002Fdocs\u002FTooling.html\"\u003Ehttps:\u002F\u002Fclang.llvm.org\u002Fdocs\u002FTooling.html\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E应用：语法树分析、语言转换等\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003EOCLint、Clang静态分析器（Clang Static Analyzer）\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EClang插件开发\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E官方参考：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Fclang.llvm.org\u002Fdocs\u002FClangPlugins.html\"\u003Ehttps:\u002F\u002Fclang.llvm.org\u002Fdocs\u002FClangPlugins.html\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Fclang.llvm.org\u002Fdocs\u002FExternalClangExamples.html\"\u003Ehttps:\u002F\u002Fclang.llvm.org\u002Fdocs\u002FExternalClangExamples.html\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Fclang.llvm.org\u002Fdocs\u002FRAVFrontendAction.html\"\u003Ehttps:\u002F\u002Fclang.llvm.org\u002Fdocs\u002FRAVFrontendAction.html\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E应用：代码检查（命名规范、代码规范）等\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EPass开发\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E官方参考：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Fllvm.org\u002Fdocs\u002FWritingAnLLVMPass.html\"\u003Ehttps:\u002F\u002Fllvm.org\u002Fdocs\u002FWritingAnLLVMPass.html\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E应用：中间代码优化、代码混淆等\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E开发新的编程语言\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Fllvm-tutorial-cn.readthedocs.io\u002Fen\u002Flatest\u002Findex.html\"\u003Ehttps:\u002F\u002Fllvm-tutorial-cn.readthedocs.io\u002Fen\u002Flatest\u002Findex.html\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Fkaleidoscope-llvm-tutorial-zh-cn.readthedocs.io\u002Fzh_CN\u002Flatest\u002F\"\u003Ehttps:\u002F\u002Fkaleidoscope-llvm-tutorial-zh-cn.readthedocs.io\u002Fzh_CN\u002Flatest\u002F\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Ch2 class=\"heading\"\u003E编写及运行Clang插件\u003C\u002Fh2\u003E\n\u003Cp\u003EClang使用模块化设计，可以将自身功能以库的方式来供上层应用来调用。比如，编码规范检查、IDE 中的语法高亮、语法检查等上层应用，都是使用Clang库的接口开发出来的。Clang有三个接口库可以供上层应用调用，分别是LibClang、Clang Plugin、LibTooling。\u003C\u002Fp\u003E\n\u003Cp\u003ELibClang为了兼容更多Clang版本，相比Clang少了很多功能；Clang Plugin和LibTooling具备Clang 的全量能力。Clang Plugin编写代码的方式，和LibTooling几乎一样，不同的是Clang Plugin还能够控制编译过程，可以加warning或者直接中断编译提示错误。另外，编写好的LibTooling能够非常方便地转成Clang Plugin。\n因此，Clang Plugin在功能上是最全的。\u003C\u002Fp\u003E\n\u003Ch3 class=\"heading\"\u003E1. 源码下载\u003C\u002Fh3\u003E\n\u003Cp\u003E下载 LLVM Project\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003E git \u003Cspan class=\"hljs-built_in\"\u003Eclone\u003C\u002Fspan\u003E https:\u002F\u002Fgithub.com\u002Fllvm\u002Fllvm-project.git\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c2316ccda46f08~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E上图中，clang目录就是类C语言编译器的代码目录；llvm目录的代码包含两部分，一部分是对源码进行平台 无关优化的优化器代码，另一部分是生成平台相关汇编代码的生成器代码；lldb目录里是调试器的代码；lld里是链接器代码。\u003C\u002Fp\u003E\n\u003Ch3 class=\"heading\"\u003E2. 源码编译\u003C\u002Fh3\u003E\n\u003Cp\u003EmacOS属于类UNIX平台，因此既可以生成Makefile文件来编译，也可以生成Xcode工程来编译。\u003C\u002Fp\u003E\n\u003Cp\u003E进入llvm-project文件目录，生成Makefile文件：\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E在llvm同级目录下新建一个llvm_make目录\u003C\u002Fli\u003E\n\u003Cli\u003E在llvm_make中利用CMake进行编译\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Ecmake -DLLVM_ENABLE_PROJECTS=clang -G \u003Cspan class=\"hljs-string\"\u003E\"Unix Makefiles\"\u003C\u002Fspan\u003E ..\u002Fllvm\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E生成Xcode工程，可以使用如下命令\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E安装CMake工具\u003C\u002Fli\u003E\n\u003Cli\u003E在llvm同级目录下新建一个llvm_xcode目录\u003C\u002Fli\u003E\n\u003Cli\u003E在llvm_xcode中利用CMake进行编译\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Ecmake -G Xcode -DLLVM_ENABLE_PROJECTS=clang ..\u002Fllvm\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E想要更多地了解CMake的语法和功能，你可以查看官方文档。\u003C\u002Fp\u003E\n\u003Cp\u003E执行cmake命令时，你可能会遇到下面的提示：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003E-- The C compiler identification is unknown -- The CXX compiler identification is unknown CMake Error at CMakeLists.txt:39 (project):\n\nNo CMAKE_C_COMPILER could be found. \n\nCMake Error at CMakeLists.txt:39 (project):\n\nNo CMAKE_CXX_COMPILER could be found.\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E这表明cmake没有找到代码编译器的命令行工具。分两种情况处理：\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E如果没有安装Xcode Commandline Tools的话，可以执行如下命令安装：\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Excode-select --install\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cul\u003E\n\u003Cli\u003E如果你已经安装了Xcode Commandline Tools的话，直接reset即可\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Esudo xcode-select --reset\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E生成Xcode工程后，打开生成的LLVM.xcodeproj文件，选择Automatically Create Schemes。\u003C\u002Fp\u003E\n\u003Cp\u003E生成Xcode项目后再利用Xcode进行编译，但是速度很慢\u003C\u002Fp\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c231a211d11607~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Ch3 class=\"heading\"\u003E3. 插件目录\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E在clang\u002Ftools源码目录下新建一个插件目录，比如叫做mskj_plugin，添加MSKJPlugin.cpp文件和 CMakeLists.txt文件。其中，CMake编译需要通过CMakeLists.txt文件来指导编译，cpp是源文件。\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c231ae4015671f~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E在clang\u002Ftools目录下的CMakeList.txt文件当中最后一行加入：\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Eadd_clang_subdirectory(mskj-plugin)\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cul\u003E\n\u003Cli\u003E使用如下代码编写clang\u002Ftools\u002Fmskj-plugin\u002FCMakeLists.txt文件，来定制编译流程：\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Eadd_llvm_library(MSKJPlugin MODULE MSKJPlugin.cpp PLUGIN_TOOL clang)\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EMSKJPlugin是插件名，MSKJPlugin.cpp是源代码文件，这段代码是指，要将Clang插件代码集成到LLVM的Xcode工程中，并作为一个模块进行编写调试。添加了Clang插件的目录和文件后，再次用cmake命令生成Xcode工程，里面就能够集成MSKJPlugin.cpp文件。\u003C\u002Fp\u003E\n\u003Ch3 class=\"heading\"\u003E4. 编写插件源码\u003C\u002Fh3\u003E\n\u003Cp\u003E① 编写PluginASTAction代码\u003C\u002Fp\u003E\n\u003Cp\u003E由于Clang插件是没有main函数的，入口是PluginASTAction的ParseArgs函数。所以，编写Clang插件还要实现ParseArgs来处理入口参数。代码如下所示：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003E class MSKJASTAction: public PluginASTAction {\n    public:\n        unique_ptr&lt;ASTConsumer&gt; CreateASTConsumer(CompilerInstance &amp;ci, StringRef iFile) {\n            \u003Cspan class=\"hljs-built_in\"\u003Ereturn\u003C\u002Fspan\u003E unique_ptr&lt;MSKJASTConsumer&gt; (new MSKJASTConsumer(ci));\n        }\n        \n        bool ParseArgs(const CompilerInstance &amp;ci, const vector&lt;string&gt; &amp;args) {\n            \u003Cspan class=\"hljs-built_in\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-literal\"\u003Etrue\u003C\u002Fspan\u003E;\n        }\n    };\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E② 编写ASTConsumer\u003C\u002Fp\u003E\n\u003Cp\u003EFrontActions是编写Clang插件的入口，也是一个接口，是基于ASTFrontendAction的抽象基类。FrontActions为接下来基于AST操作的函数提供了一个入口和工作环境。\u003C\u002Fp\u003E\n\u003Cp\u003E通过这个接口，你可以编写在编译过程中自定义的操作，具体方式是：通过ASTFrontendAction在 AST上自定义操作，重载CreateASTConsumer函数返回你自己的Consumer，以获取AST上的 ASTConsumer单元。ASTConsumer可以提供很多入口，是一个可以访问AST的抽象基类，可以重载 HandleTopLevelDecl()和 HandleTranslationUnit()两个函数，以接收访问AST时的回调。其中，HandleTopLevelDecl()函数是在访问到全局变量、函数定义这样最上层声明时进行回调，HandleTranslationUnit()函数会在接收每个节点访问时的回调。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Eclass MSKJASTConsumer: public ASTConsumer {\n    private:\n        MatchFinder matcher;\n        MSKJHandler handler;\n        \n    public:\n        MSKJASTConsumer(CompilerInstance &amp;ci) :handler(ci) {\n            matcher.addMatcher(objcInterfaceDecl().bind(\u003Cspan class=\"hljs-string\"\u003E\"ObjCInterfaceDecl\"\u003C\u002Fspan\u003E), &amp;handler);\n        }\n        \n        void HandleTranslationUnit(ASTContext &amp;context) {\n            matcher.matchAST(context);\n        }    \n};\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E③ 处理节点\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003E class MSKJHandler : public MatchFinder::MatchCallback {\n    private:\n        CompilerInstance &amp;ci;\n     \n    public:\n        MSKJHandler(CompilerInstance &amp;ci) :ci(ci) {}\n        \n        void run(const MatchFinder::MatchResult &amp;Result) {\n            \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (const ObjCInterfaceDecl *decl = Result.Nodes.getNodeAs&lt;ObjCInterfaceDecl&gt;(\u003Cspan class=\"hljs-string\"\u003E\"ObjCInterfaceDecl\"\u003C\u002Fspan\u003E)) {\n                size_t pos = decl-&gt;getName().find(\u003Cspan class=\"hljs-string\"\u003E'_'\u003C\u002Fspan\u003E);\n                \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (pos != StringRef::npos) {\n                    DiagnosticsEngine &amp;D = ci.getDiagnostics();\n                    SourceLocation loc = decl-&gt;getLocation().getLocWithOffset(pos);\n                    D.Report(loc, D.getCustomDiagID(DiagnosticsEngine::Error, \u003Cspan class=\"hljs-string\"\u003E\"MSKJ：类名中不能带有下划线\"\u003C\u002Fspan\u003E));\n                }\n            }\n        }\n    };\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 class=\"heading\"\u003E5. 注册Clang插件\u003C\u002Fh3\u003E\n\u003Cp\u003E在Clang插件源码中编写注册代码。编译器会在编译过程中从动态库加载Clang插件。使用FrontendPluginRegistry::Add&lt;&gt;在库中注册插件。注册Clang插件的代码如下：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Estatic FrontendPluginRegistry::Add&lt;MSKJPlugin::MSKJASTAction&gt; X(\u003Cspan class=\"hljs-string\"\u003E\"MSKJPlugin\"\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E\"The MSKJPlugin is my first clang-plugin.\"\u003C\u002Fspan\u003E);\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E在Clang插件代码的最下面，定义的MSKJPlugin字符串是命令行字符串，供以后调用时使用，The MSKJPlugin is my first clang-plugin是对Clang插件的描述。\u003C\u002Fp\u003E\n\u003Ch3 class=\"heading\"\u003E6. 使用clang 插件\u003C\u002Fh3\u003E\n\u003Cp\u003E利用CMake命令重新生成Xcode工程，可在Loadable modules下看到MSKJPlugin：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c2321405ed2a03~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E选择MSKJPlugin这个target进行编译，编译完会生成一个动态库文件。\u003C\u002Fp\u003E\n\u003Cp\u003ELLVM官方有一个完整可用的Clang插件示例，可以帮我们打印出最上层函数的名字。\u003C\u002Fp\u003E\n\u003Cp\u003E通过学习这个插件示例，看看如何使用Clang插件。\u003C\u002Fp\u003E\n\u003Cp\u003E使用Clang插件可以通过-load命令行选项加载包含插件注册表的动态库，-load命令行会加载已经注册了的所有Clang插件。使用-plugin选项选择要运行的Clang插件。Clang插件的其他参数通过-plugin-arg-来传递。\u003C\u002Fp\u003E\n\u003Cp\u003Ecc1进程类似一种预处理，这种预处理会发生在编译之前。cc1和Clang driver是两个单独的实体，cc1负责前端预处理，Clang driver则主要负责管理编译任务调度，每个编译任务都会接受cc1前端预处理的参数，然后进行调整。\u003C\u002Fp\u003E\n\u003Cp\u003E有两个方法可以让-load 和-plugin等选项到Clang的cc1进程中：\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E直接使用-cc1选项，缺点是要在命令行上指定完整的系统路径配置；\u003C\u002Fli\u003E\n\u003Cli\u003E使用-Xclang来为cc1进程添加这些选项。-Xclang参数只运行预处理器，直接将后面参数传递给cc1进程，而不影响clang driver的工作。\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E下面是一个编译Clang插件，然后使用-Xclang加载使用Clang插件的例子：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003E$ \u003Cspan class=\"hljs-built_in\"\u003Eexport\u003C\u002Fspan\u003E BD=\u002Fpath\u002Fto\u002Fbuild\u002Fdirectory \n$ (\u003Cspan class=\"hljs-built_in\"\u003Ecd\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-variable\"\u003E$BD\u003C\u002Fspan\u003E &amp;&amp; make PrintFunctionNames ) \n$ clang++ -D_GNU_SOURCE -D_DEBUG -D__STDC_CONSTANT_MACROS \\\n          -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -D_GNU_SOURCE \\ \n          -I\u003Cspan class=\"hljs-variable\"\u003E$BD\u003C\u002Fspan\u003E\u002Ftools\u002Fclang\u002Finclude -Itools\u002Fclang\u002Finclude -I\u003Cspan class=\"hljs-variable\"\u003E$BD\u003C\u002Fspan\u003E\u002Finclude -Iinclude \\                                        tools\u002Fclang\u002Ftools\u002Fclang-check\u002FClangCheck.cpp -fsyntax-only \\\n          -Xclang -load -Xclang \u003Cspan class=\"hljs-variable\"\u003E$BD\u003C\u002Fspan\u003E\u002Flib\u002FPrintFunctionNames.so -Xclang \\\n          -plugin -Xclang \u003Cspan class=\"hljs-built_in\"\u003Eprint\u003C\u002Fspan\u003E-fns\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E上面命令中，先设置构建的路径，再通过make命令进行编译生成PrintFunctionNames.so，最后使用clang命令配合-Xclang参数加载使用Clang插件。\u003C\u002Fp\u003E\n\u003Cp\u003E你也可以直接使用-cc1参数，但是就需要按照下面的方式来指定完整的文件路径：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003E$ clang -cc1 -load ..\u002F..\u002FDebug+Asserts\u002Flib\u002FlibPrintFunctionNames.dylib -plugin \u003Cspan class=\"hljs-built_in\"\u003Eprint\u003C\u002Fspan\u003E-fns some-input-file.c\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 class=\"heading\"\u003E7. 更多\u003C\u002Fh3\u003E\n\u003Cp\u003E实现更复杂的插件功能，可以利用clang的API对语法树进行相应的分析与处理。\u003C\u002Fp\u003E\n\u003Cp\u003E关于AST的资料：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Fclang.llvm.org\u002Fdoxygen\u002Fnamespaceclang.html\"\u003Ehttps:\u002F\u002Fclang.llvm.org\u002Fdoxygen\u002Fnamespaceclang.html\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Fclang.llvm.org\u002Fdoxygen\u002Fclassclang11Decl.html\"\u003Ehttps:\u002F\u002Fclang.llvm.org\u002Fdoxygen\u002Fclassclang11Decl.html\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Fclang.llvm.org\u002Fdoxygen\u002Fclassclang11Stmt.html\"\u003Ehttps:\u002F\u002Fclang.llvm.org\u002Fdoxygen\u002Fclassclang11Stmt.html\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EClang插件本身的编写和使用并不复杂，关键是如何更好地应用到工作中，通过Clang插件不光能够检查代 码规范，还能够进行无用代码分析、自动埋点打桩、线下测试分析、方法名混淆等。\u003C\u002Fp\u003E\n\u003Ch1 class=\"heading\"\u003E结语\u003C\u002Fh1\u003E\n\u003Cp\u003E理解iOS的编译原理，有利于我们更加深层次的理解程序，让我们从底层的角度去看待问题和思考问题的解决方案。\u003C\u002Fp\u003E\n\u003Ch1 class=\"heading\"\u003E作者简介\u003C\u002Fh1\u003E\n\u003Cp\u003E范冲冲，民生科技有限公司 用户体验技术部 移动金融开发平台开发工程师\u003C\u002Fp\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F8\u002F20\u002F16cae0d838f2c878~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThanks!\u003C\u002Fp\u003E\n",ctime:"1563957831",mtime:"1599999959",rtime:"1563967274",draft_id:"6845076386260975623",view_count:5331,collect_count:64,digg_count:62,comment_count:g,hot_index:329,is_hot:d,rank_index:.00047294,status:l,verify_status:g,audit_status:l,mark_content:e,display_count:d,is_markdown:g,app_html_content:e},author_user_info:{user_id:"501033033824039",user_name:"民生Fintech",company:"民生&科技",job_title:"Fintech Researcher",avatar_large:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F5\u002F21\u002F16ad978742e404ba~tplv-t2oaga2asx-image.image",level:4,description:"集众人所长",followee_count:14,follower_count:276,post_article_count:13,digg_article_count:g,got_digg_count:443,got_view_count:61176,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:1894,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:501033033824039,jpower:1894,jscore:19,jpower_level:4,jscore_level:l,jscore_title:"见习掘友",author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:30,jscore_this_level_mini_score:d},is_vip:a,become_author_days:d,collection_set_article_count:d},category:{category_id:"6809635626661445640",category_name:"iOS",category_url:"ios",rank:4,back_ground:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F34589746327a360a.png",icon:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F4a218bdf1f6969fd.png",ctime:1461266350,mtime:1432503174,show_type:3,item_type:l,promote_tag_cap:4,promote_priority:4,id:"6809635626661445640",name:"iOS",title:"iOS",alias:"ios"},tags:[{entriesCount:void 0,subscribed:a,id:"6809641169492901895",tag_id:"6809641169492901895",tag_name:"编译原理",color:e,icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F1549096173297dbae3080684159b3e15900171dbae111.jpg~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1549064324,mtime:1677653934,id_type:9,tag_alias:"Compilers Principles",post_article_count:436,concern_user_count:4624,title:"编译原理",tagId:"6809641169492901895",articleCount:436,subscribersCount:4624,createdAt:c,updatedAt:c}],user_interact:{id:6844903896230396000,omitempty:l,user_id:2894327269039357,is_digg:a,is_follow:a,is_collect:a},org:{org_info:c,org_user:c,is_followed:a},req_id:"202303031946193E6CD332D80324A3F31F",status:{push_status:d},author_interact:c,extra:{boost_type:e},title:"iOS 编译原理与应用",user:{id:"501033033824039",self_description:void 0,followed:a,viewerIsFollowing:void 0,community:void 0,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:4,user_id:"501033033824039",user_name:"民生Fintech",company:"民生&科技",job_title:"Fintech Researcher",avatar_large:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F5\u002F21\u002F16ad978742e404ba~tplv-t2oaga2asx-image.image",description:"集众人所长",followee_count:14,follower_count:276,post_article_count:13,digg_article_count:g,got_digg_count:443,got_view_count:61176,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:1894,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:501033033824039,jpower:1894,jscore:19,jpower_level:4,jscore_level:l,jscore_title:"见习掘友",author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:30,jscore_this_level_mini_score:d},is_vip:a,become_author_days:d,collection_set_article_count:d,juejinPower:1894,jobTitle:"Fintech Researcher",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"民生Fintech",blogAddress:void 0,selfDescription:"集众人所长",beLikedCount:443,beReadCount:61176,followerCount:276,followingCount:14,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:13,pinCount:d,likedArticleCount:g,likedPinCount:d,avatar:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F5\u002F21\u002F16ad978742e404ba~tplv-t2oaga2asx-image.image",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:14,applyEventCount:d,need_lead:d,followTopicCnt:d},viewCount:void 0,commentsCount:g,isEvent:void 0,abstract:"在Xcode中，当我们按下command + B进行build操作后发生了那些事情，这是一个将代码编译的过程。Xcode现在使用的编译器是LLVM，Xcode 早期使用的是GCC编译器，由于一些历史原因，从Xcode5开始正式过渡到使用LLVM编译器。下文将着重介绍LLVM。 …",latestCommentAt:c,createdAt:new Date(1563957831000),updatedAt:c,isTopicEvent:a,likedCount:62,likeCount:62,content:"\u003Ch1 class=\"heading\"\u003E引言\u003C\u002Fh1\u003E\n\u003Cp\u003E在Xcode中，当我们按下command + B进行build操作后发生了那些事情，这是一个将代码编译的过程。Xcode现在使用的编译器是LLVM，Xcode 早期使用的是GCC编译器，由于一些历史原因，从Xcode5开始正式过渡到使用LLVM编译器。下文将着重介绍LLVM。\u003C\u002Fp\u003E\n\u003Ch1 class=\"heading\"\u003E编译原理\u003C\u002Fh1\u003E\n\u003Ch2 class=\"heading\"\u003ELLVM简介\u003C\u002Fh2\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c22fea55748d58~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003ELLVM项目是模块化、可重用的编译器以及工具链技术的集合。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E美国计算机协会（ACM）将其 2012 年软件系统奖颁给了LLVM，之前曾获得此奖项的软件和技术包括：Java、Apache、Mosaic、the World Wide Web、SmallTalk、UNIX、Eclipse等等。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ELLVM项目的发展起源于2000年伊利诺伊大学厄巴纳-香槟分校维克拉姆·艾夫（Vikram Adve）与克里斯·拉特纳（Chris Lattner）的研究，他们想要为所有静态及动态语言创造出动态的编译技术。LLVM是以BSD授权来发展的开源软件。2005年，苹果电脑雇用了克里斯·拉特纳及他的团队为苹果电脑开发应用程序系统，LLVM为现今Mac OS X及iOS开发工具的一部分。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ELLVM的命名最早源自于底层虚拟机（Low Level Virtual Machine）的首字母缩写，由于这个项目的范围并不局限于创建一个虚拟机，这个缩写导致了广泛的疑惑。官方描述如下：The name “LLVM” itself is not an acronym；it is the full name of the project。LLVM这个名称并不是首字母缩略词，它是项目的全名。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ELLVM开始成长之后，成为众多编译工具及低级工具技术的统称，使得这个名字变得更不贴切，开发者因而决定放弃这个缩写的意涵，现今LLVM已单纯成为一个品牌，适用于LLVM下的所有项目，包含LLVM中介码（LLVM IR）、LLVM除错工具、LLVM C++标准库等。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E目前NDK\u002FXcode均采用LLVM作为默认的编译器。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 class=\"heading\"\u003E传统的编译器架构\u003C\u002Fh2\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c2301ada5faae3~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EFrontend：前端，对源码做词法分析、语法分析、语义分析、生成中间代码\u003C\u002Fli\u003E\n\u003Cli\u003EOptimizer：优化器，用于中间代码优化\u003C\u002Fli\u003E\n\u003Cli\u003EBackend：后端，用于生成机器码\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 class=\"heading\"\u003ELLVM架构\u003C\u002Fh2\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c230372fc40295~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003E前端将各种类型的源代码编译为中间代码，也就是bitcode，在LLVM体系内，不同的语言有不同的编译器前端，常见的如clang负责 c\u002Fc++\u002Foc的编译，flang负责fortran的编译，swiftc负责swift的编译等等。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E不同的前后端使用统一的中间代码LLVM Intermediate Representation(LLVM IR)。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E优化阶段是一个通用的阶段，针对的是统一的LLVM IR，无论是新的编程语言，还是支持新的硬件设备，都不需要对优化阶段做修改，具体是对bitcode进行各种类型的优化，将bitcode代码进行一些逻辑的转换，使得代码效率更高，体积更小，比如DeadStrip\u002FSimplifyCFG。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E后端，也叫CodeGenerator，负责把优化后的bitcode编译为指定目标架构的机器码，比如 X86Backend负责把bitcode编译为x86指令集的机器码。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EGCC相比之下，前后端耦合在了一起。所以，GCC支持一门新的语言，或是为了支持一个新的平台，就变得异常困难。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ELLVM现在被作为实现各种静态和运行时编译语言通用基础架构（GCC 家族、Java、.Net、Python、Ruby、Scheme、Haskell、D等）。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ELLVM体系中，不同语言源代码将会被转化为统一的bitcode格式，三个模块相互独立，可以充分复用。比如，如果开发一门新的语言，只要制造一个该语言的前端，将源码编译为bitcode，优化和后端不用管。同理，如果新的芯片架构问世，只需基于LLVM重新编写一套目标平台的后端即可。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 class=\"heading\"\u003EClang\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003ELLVM项目的一个子项目。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E基于LLVM架构的C\u002FC++\u002FObjective-C\u002FObjective-C++编译器前端。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E相比于 GCC，Clang具有如下优点：\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E编译速度快：在某些平台上，Clang的编译速度显著的快过GCC（Debug 模式下编译 OC 速度比 GCC 快 3 倍）；\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E占用内存小：Clang生成的AST所占用的内存是GCC的五分之一左右；\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E模块化设计：Clang采用基于库的模块化设计，易于IDE集成及其他用途的重用；\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E诊断信息可读性强：在编译过程中，Clang创建并保留了大量详细的元数据（metadata），有利于调试和错误报告；\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E设计清晰简单，容易理解，易于扩展增强。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E客观的说GCC也有很多优点：例如支持多平台，基于C无需 C++编译器即可编译。这个优点到苹果那里反而成了缺点，苹果需要的是快。\u003C\u002Fp\u003E\n\u003Ch2 class=\"heading\"\u003EClang与LLVM\u003C\u002Fh2\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c2308b0b439c74~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E广义的LLVM：整个LLVM架构\u003C\u002Fli\u003E\n\u003Cli\u003E狭义的LLVM：LLVM后端（代码优化、目标代码生成等）\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c2308efb88f492~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Ch2 class=\"heading\"\u003EOC源文件的编译过程\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003E命令行查看编译的过程：\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Eclang -ccc-print-phases main.m\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c2309eafbce5c5~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E查看preprocessor（预处理）的结果：\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Eclang -E main.m -F \u002FApplications\u002FXcode.app\u002FContents\u002FDeveloper\u002FPlatforms\u002FiPhoneSimulator.platform\u002FDeveloper\u002FSDKs\u002FiPhoneSimulator.sdk\u002FSystem\u002FLibrary\u002FFrameworks \n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c230a84fef3488~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Ch3 class=\"heading\"\u003E1. 词法分析\u003C\u002Fh3\u003E\n\u003Cp\u003E词法分析，生成Token\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Eint sum(int a,int b){\n    int c = a + b;\n    \u003Cspan class=\"hljs-built_in\"\u003Ereturn\u003C\u002Fspan\u003E c;\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Eclang -fmodules -E -Xclang -dump-tokens main.m\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c230bcff1b9eb8~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E这个命令的作用是，显示每个Token的类型、值，以及位置。参考该链接，可以看到Clang定义的所有Token类型。\n可以分为下面这4类：\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E关键字：语法中的关键字，比如 if、else、while、for 等；\u003C\u002Fli\u003E\n\u003Cli\u003E标识符：变量名；\u003C\u002Fli\u003E\n\u003Cli\u003E字面量：值、数字、字符串；\u003C\u002Fli\u003E\n\u003Cli\u003E特殊符号：加减乘除等符号。\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 class=\"heading\"\u003E2. 语法分析\u003C\u002Fh3\u003E\n\u003Cp\u003E利用上面输出的Token先按照语法组合成语义，生成类似VarDecl这样的节点，然后将这些节点按照层级关系构成抽象语法树（AST）。\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E语法分析，生成语法树（AST，Abstract Syntax Tree）\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Eclang -fmodules -fsyntax-only -Xclang -ast-dump main.m\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003ETranslationUnitDecl是根节点，表示一个编译单元；Decl表示一个声明；Expr表示的是表达式；Literal表示字面量，是一个特殊的Expr；Stmt表示陈述。\u003C\u002Fp\u003E\n\u003Cp\u003E除此之外，Clang还有众多种类的节点类型。Clang里，节点主要分成Type类型、Decl声明、Stmt陈述这三种，其他的都是这三种的派生。通过扩展这三类节点，就能够将无限的代码形态用有限的形式来表现出来。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c230e733a442bc~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c230ee06a7b486~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Ch3 class=\"heading\"\u003E3. LLVM IR\u003C\u002Fh3\u003E\n\u003Cp\u003ELLVM IR有3种表示形式，但本质上是等价的。\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003Etext：便于阅读的文本格式，类似于汇编语言，拓展名 .ll\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Eclang -S -emit-llvm main.m\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cul\u003E\n\u003Cli\u003Ememory：内存格式\u003C\u002Fli\u003E\n\u003Cli\u003Ebitcode：二进制格式，拓展名 .bc\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Eclang -c -emit-llvm main.m\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 class=\"heading\"\u003E4. IR基本语法\u003C\u002Fh3\u003E\n\u003Cp\u003E.ll 文件部分内容，如下：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c2310ae9387652~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E注释以分号 ; 开头\u003C\u002Fli\u003E\n\u003Cli\u003E全局标识符以@开头，局部标示符以%开头\u003C\u002Fli\u003E\n\u003Cli\u003Ealloca，在当前函数栈帧中分配内存\u003C\u002Fli\u003E\n\u003Cli\u003Ei32 ，32bit，4 个字节\u003C\u002Fli\u003E\n\u003Cli\u003Ealign，内存对齐\u003C\u002Fli\u003E\n\u003Cli\u003Estore，写入数据\u003C\u002Fli\u003E\n\u003Cli\u003Eload，读取数据\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch1 class=\"heading\"\u003E应用与实践\u003C\u002Fh1\u003E\n\u003Cp\u003E基于LLVM 、Clang可以做很多实践，如下：\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003ELibClang、LibTooling、Clang Plugin\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E官方参考：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Fclang.llvm.org\u002Fdocs\u002FTooling.html\"\u003Ehttps:\u002F\u002Fclang.llvm.org\u002Fdocs\u002FTooling.html\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E应用：语法树分析、语言转换等\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003EOCLint、Clang静态分析器（Clang Static Analyzer）\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EClang插件开发\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E官方参考：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Fclang.llvm.org\u002Fdocs\u002FClangPlugins.html\"\u003Ehttps:\u002F\u002Fclang.llvm.org\u002Fdocs\u002FClangPlugins.html\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Fclang.llvm.org\u002Fdocs\u002FExternalClangExamples.html\"\u003Ehttps:\u002F\u002Fclang.llvm.org\u002Fdocs\u002FExternalClangExamples.html\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Fclang.llvm.org\u002Fdocs\u002FRAVFrontendAction.html\"\u003Ehttps:\u002F\u002Fclang.llvm.org\u002Fdocs\u002FRAVFrontendAction.html\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E应用：代码检查（命名规范、代码规范）等\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EPass开发\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E官方参考：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Fllvm.org\u002Fdocs\u002FWritingAnLLVMPass.html\"\u003Ehttps:\u002F\u002Fllvm.org\u002Fdocs\u002FWritingAnLLVMPass.html\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E应用：中间代码优化、代码混淆等\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E开发新的编程语言\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Fllvm-tutorial-cn.readthedocs.io\u002Fen\u002Flatest\u002Findex.html\"\u003Ehttps:\u002F\u002Fllvm-tutorial-cn.readthedocs.io\u002Fen\u002Flatest\u002Findex.html\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Fkaleidoscope-llvm-tutorial-zh-cn.readthedocs.io\u002Fzh_CN\u002Flatest\u002F\"\u003Ehttps:\u002F\u002Fkaleidoscope-llvm-tutorial-zh-cn.readthedocs.io\u002Fzh_CN\u002Flatest\u002F\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Ch2 class=\"heading\"\u003E编写及运行Clang插件\u003C\u002Fh2\u003E\n\u003Cp\u003EClang使用模块化设计，可以将自身功能以库的方式来供上层应用来调用。比如，编码规范检查、IDE 中的语法高亮、语法检查等上层应用，都是使用Clang库的接口开发出来的。Clang有三个接口库可以供上层应用调用，分别是LibClang、Clang Plugin、LibTooling。\u003C\u002Fp\u003E\n\u003Cp\u003ELibClang为了兼容更多Clang版本，相比Clang少了很多功能；Clang Plugin和LibTooling具备Clang 的全量能力。Clang Plugin编写代码的方式，和LibTooling几乎一样，不同的是Clang Plugin还能够控制编译过程，可以加warning或者直接中断编译提示错误。另外，编写好的LibTooling能够非常方便地转成Clang Plugin。\n因此，Clang Plugin在功能上是最全的。\u003C\u002Fp\u003E\n\u003Ch3 class=\"heading\"\u003E1. 源码下载\u003C\u002Fh3\u003E\n\u003Cp\u003E下载 LLVM Project\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003E git \u003Cspan class=\"hljs-built_in\"\u003Eclone\u003C\u002Fspan\u003E https:\u002F\u002Fgithub.com\u002Fllvm\u002Fllvm-project.git\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c2316ccda46f08~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E上图中，clang目录就是类C语言编译器的代码目录；llvm目录的代码包含两部分，一部分是对源码进行平台 无关优化的优化器代码，另一部分是生成平台相关汇编代码的生成器代码；lldb目录里是调试器的代码；lld里是链接器代码。\u003C\u002Fp\u003E\n\u003Ch3 class=\"heading\"\u003E2. 源码编译\u003C\u002Fh3\u003E\n\u003Cp\u003EmacOS属于类UNIX平台，因此既可以生成Makefile文件来编译，也可以生成Xcode工程来编译。\u003C\u002Fp\u003E\n\u003Cp\u003E进入llvm-project文件目录，生成Makefile文件：\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E在llvm同级目录下新建一个llvm_make目录\u003C\u002Fli\u003E\n\u003Cli\u003E在llvm_make中利用CMake进行编译\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Ecmake -DLLVM_ENABLE_PROJECTS=clang -G \u003Cspan class=\"hljs-string\"\u003E\"Unix Makefiles\"\u003C\u002Fspan\u003E ..\u002Fllvm\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E生成Xcode工程，可以使用如下命令\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E安装CMake工具\u003C\u002Fli\u003E\n\u003Cli\u003E在llvm同级目录下新建一个llvm_xcode目录\u003C\u002Fli\u003E\n\u003Cli\u003E在llvm_xcode中利用CMake进行编译\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Ecmake -G Xcode -DLLVM_ENABLE_PROJECTS=clang ..\u002Fllvm\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E想要更多地了解CMake的语法和功能，你可以查看官方文档。\u003C\u002Fp\u003E\n\u003Cp\u003E执行cmake命令时，你可能会遇到下面的提示：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003E-- The C compiler identification is unknown -- The CXX compiler identification is unknown CMake Error at CMakeLists.txt:39 (project):\n\nNo CMAKE_C_COMPILER could be found. \n\nCMake Error at CMakeLists.txt:39 (project):\n\nNo CMAKE_CXX_COMPILER could be found.\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E这表明cmake没有找到代码编译器的命令行工具。分两种情况处理：\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E如果没有安装Xcode Commandline Tools的话，可以执行如下命令安装：\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Excode-select --install\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cul\u003E\n\u003Cli\u003E如果你已经安装了Xcode Commandline Tools的话，直接reset即可\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Esudo xcode-select --reset\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E生成Xcode工程后，打开生成的LLVM.xcodeproj文件，选择Automatically Create Schemes。\u003C\u002Fp\u003E\n\u003Cp\u003E生成Xcode项目后再利用Xcode进行编译，但是速度很慢\u003C\u002Fp\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c231a211d11607~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Ch3 class=\"heading\"\u003E3. 插件目录\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E在clang\u002Ftools源码目录下新建一个插件目录，比如叫做mskj_plugin，添加MSKJPlugin.cpp文件和 CMakeLists.txt文件。其中，CMake编译需要通过CMakeLists.txt文件来指导编译，cpp是源文件。\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c231ae4015671f~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E在clang\u002Ftools目录下的CMakeList.txt文件当中最后一行加入：\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Eadd_clang_subdirectory(mskj-plugin)\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cul\u003E\n\u003Cli\u003E使用如下代码编写clang\u002Ftools\u002Fmskj-plugin\u002FCMakeLists.txt文件，来定制编译流程：\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Eadd_llvm_library(MSKJPlugin MODULE MSKJPlugin.cpp PLUGIN_TOOL clang)\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EMSKJPlugin是插件名，MSKJPlugin.cpp是源代码文件，这段代码是指，要将Clang插件代码集成到LLVM的Xcode工程中，并作为一个模块进行编写调试。添加了Clang插件的目录和文件后，再次用cmake命令生成Xcode工程，里面就能够集成MSKJPlugin.cpp文件。\u003C\u002Fp\u003E\n\u003Ch3 class=\"heading\"\u003E4. 编写插件源码\u003C\u002Fh3\u003E\n\u003Cp\u003E① 编写PluginASTAction代码\u003C\u002Fp\u003E\n\u003Cp\u003E由于Clang插件是没有main函数的，入口是PluginASTAction的ParseArgs函数。所以，编写Clang插件还要实现ParseArgs来处理入口参数。代码如下所示：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003E class MSKJASTAction: public PluginASTAction {\n    public:\n        unique_ptr&lt;ASTConsumer&gt; CreateASTConsumer(CompilerInstance &amp;ci, StringRef iFile) {\n            \u003Cspan class=\"hljs-built_in\"\u003Ereturn\u003C\u002Fspan\u003E unique_ptr&lt;MSKJASTConsumer&gt; (new MSKJASTConsumer(ci));\n        }\n        \n        bool ParseArgs(const CompilerInstance &amp;ci, const vector&lt;string&gt; &amp;args) {\n            \u003Cspan class=\"hljs-built_in\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-literal\"\u003Etrue\u003C\u002Fspan\u003E;\n        }\n    };\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E② 编写ASTConsumer\u003C\u002Fp\u003E\n\u003Cp\u003EFrontActions是编写Clang插件的入口，也是一个接口，是基于ASTFrontendAction的抽象基类。FrontActions为接下来基于AST操作的函数提供了一个入口和工作环境。\u003C\u002Fp\u003E\n\u003Cp\u003E通过这个接口，你可以编写在编译过程中自定义的操作，具体方式是：通过ASTFrontendAction在 AST上自定义操作，重载CreateASTConsumer函数返回你自己的Consumer，以获取AST上的 ASTConsumer单元。ASTConsumer可以提供很多入口，是一个可以访问AST的抽象基类，可以重载 HandleTopLevelDecl()和 HandleTranslationUnit()两个函数，以接收访问AST时的回调。其中，HandleTopLevelDecl()函数是在访问到全局变量、函数定义这样最上层声明时进行回调，HandleTranslationUnit()函数会在接收每个节点访问时的回调。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Eclass MSKJASTConsumer: public ASTConsumer {\n    private:\n        MatchFinder matcher;\n        MSKJHandler handler;\n        \n    public:\n        MSKJASTConsumer(CompilerInstance &amp;ci) :handler(ci) {\n            matcher.addMatcher(objcInterfaceDecl().bind(\u003Cspan class=\"hljs-string\"\u003E\"ObjCInterfaceDecl\"\u003C\u002Fspan\u003E), &amp;handler);\n        }\n        \n        void HandleTranslationUnit(ASTContext &amp;context) {\n            matcher.matchAST(context);\n        }    \n};\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E③ 处理节点\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003E class MSKJHandler : public MatchFinder::MatchCallback {\n    private:\n        CompilerInstance &amp;ci;\n     \n    public:\n        MSKJHandler(CompilerInstance &amp;ci) :ci(ci) {}\n        \n        void run(const MatchFinder::MatchResult &amp;Result) {\n            \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (const ObjCInterfaceDecl *decl = Result.Nodes.getNodeAs&lt;ObjCInterfaceDecl&gt;(\u003Cspan class=\"hljs-string\"\u003E\"ObjCInterfaceDecl\"\u003C\u002Fspan\u003E)) {\n                size_t pos = decl-&gt;getName().find(\u003Cspan class=\"hljs-string\"\u003E'_'\u003C\u002Fspan\u003E);\n                \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (pos != StringRef::npos) {\n                    DiagnosticsEngine &amp;D = ci.getDiagnostics();\n                    SourceLocation loc = decl-&gt;getLocation().getLocWithOffset(pos);\n                    D.Report(loc, D.getCustomDiagID(DiagnosticsEngine::Error, \u003Cspan class=\"hljs-string\"\u003E\"MSKJ：类名中不能带有下划线\"\u003C\u002Fspan\u003E));\n                }\n            }\n        }\n    };\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 class=\"heading\"\u003E5. 注册Clang插件\u003C\u002Fh3\u003E\n\u003Cp\u003E在Clang插件源码中编写注册代码。编译器会在编译过程中从动态库加载Clang插件。使用FrontendPluginRegistry::Add&lt;&gt;在库中注册插件。注册Clang插件的代码如下：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003Estatic FrontendPluginRegistry::Add&lt;MSKJPlugin::MSKJASTAction&gt; X(\u003Cspan class=\"hljs-string\"\u003E\"MSKJPlugin\"\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E\"The MSKJPlugin is my first clang-plugin.\"\u003C\u002Fspan\u003E);\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E在Clang插件代码的最下面，定义的MSKJPlugin字符串是命令行字符串，供以后调用时使用，The MSKJPlugin is my first clang-plugin是对Clang插件的描述。\u003C\u002Fp\u003E\n\u003Ch3 class=\"heading\"\u003E6. 使用clang 插件\u003C\u002Fh3\u003E\n\u003Cp\u003E利用CMake命令重新生成Xcode工程，可在Loadable modules下看到MSKJPlugin：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c2321405ed2a03~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E选择MSKJPlugin这个target进行编译，编译完会生成一个动态库文件。\u003C\u002Fp\u003E\n\u003Cp\u003ELLVM官方有一个完整可用的Clang插件示例，可以帮我们打印出最上层函数的名字。\u003C\u002Fp\u003E\n\u003Cp\u003E通过学习这个插件示例，看看如何使用Clang插件。\u003C\u002Fp\u003E\n\u003Cp\u003E使用Clang插件可以通过-load命令行选项加载包含插件注册表的动态库，-load命令行会加载已经注册了的所有Clang插件。使用-plugin选项选择要运行的Clang插件。Clang插件的其他参数通过-plugin-arg-来传递。\u003C\u002Fp\u003E\n\u003Cp\u003Ecc1进程类似一种预处理，这种预处理会发生在编译之前。cc1和Clang driver是两个单独的实体，cc1负责前端预处理，Clang driver则主要负责管理编译任务调度，每个编译任务都会接受cc1前端预处理的参数，然后进行调整。\u003C\u002Fp\u003E\n\u003Cp\u003E有两个方法可以让-load 和-plugin等选项到Clang的cc1进程中：\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E直接使用-cc1选项，缺点是要在命令行上指定完整的系统路径配置；\u003C\u002Fli\u003E\n\u003Cli\u003E使用-Xclang来为cc1进程添加这些选项。-Xclang参数只运行预处理器，直接将后面参数传递给cc1进程，而不影响clang driver的工作。\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E下面是一个编译Clang插件，然后使用-Xclang加载使用Clang插件的例子：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003E$ \u003Cspan class=\"hljs-built_in\"\u003Eexport\u003C\u002Fspan\u003E BD=\u002Fpath\u002Fto\u002Fbuild\u002Fdirectory \n$ (\u003Cspan class=\"hljs-built_in\"\u003Ecd\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-variable\"\u003E$BD\u003C\u002Fspan\u003E &amp;&amp; make PrintFunctionNames ) \n$ clang++ -D_GNU_SOURCE -D_DEBUG -D__STDC_CONSTANT_MACROS \\\n          -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -D_GNU_SOURCE \\ \n          -I\u003Cspan class=\"hljs-variable\"\u003E$BD\u003C\u002Fspan\u003E\u002Ftools\u002Fclang\u002Finclude -Itools\u002Fclang\u002Finclude -I\u003Cspan class=\"hljs-variable\"\u003E$BD\u003C\u002Fspan\u003E\u002Finclude -Iinclude \\                                        tools\u002Fclang\u002Ftools\u002Fclang-check\u002FClangCheck.cpp -fsyntax-only \\\n          -Xclang -load -Xclang \u003Cspan class=\"hljs-variable\"\u003E$BD\u003C\u002Fspan\u003E\u002Flib\u002FPrintFunctionNames.so -Xclang \\\n          -plugin -Xclang \u003Cspan class=\"hljs-built_in\"\u003Eprint\u003C\u002Fspan\u003E-fns\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E上面命令中，先设置构建的路径，再通过make命令进行编译生成PrintFunctionNames.so，最后使用clang命令配合-Xclang参数加载使用Clang插件。\u003C\u002Fp\u003E\n\u003Cp\u003E你也可以直接使用-cc1参数，但是就需要按照下面的方式来指定完整的文件路径：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs bash\" lang=\"bash\"\u003E$ clang -cc1 -load ..\u002F..\u002FDebug+Asserts\u002Flib\u002FlibPrintFunctionNames.dylib -plugin \u003Cspan class=\"hljs-built_in\"\u003Eprint\u003C\u002Fspan\u003E-fns some-input-file.c\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 class=\"heading\"\u003E7. 更多\u003C\u002Fh3\u003E\n\u003Cp\u003E实现更复杂的插件功能，可以利用clang的API对语法树进行相应的分析与处理。\u003C\u002Fp\u003E\n\u003Cp\u003E关于AST的资料：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Fclang.llvm.org\u002Fdoxygen\u002Fnamespaceclang.html\"\u003Ehttps:\u002F\u002Fclang.llvm.org\u002Fdoxygen\u002Fnamespaceclang.html\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Fclang.llvm.org\u002Fdoxygen\u002Fclassclang11Decl.html\"\u003Ehttps:\u002F\u002Fclang.llvm.org\u002Fdoxygen\u002Fclassclang11Decl.html\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Fclang.llvm.org\u002Fdoxygen\u002Fclassclang11Stmt.html\"\u003Ehttps:\u002F\u002Fclang.llvm.org\u002Fdoxygen\u002Fclassclang11Stmt.html\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EClang插件本身的编写和使用并不复杂，关键是如何更好地应用到工作中，通过Clang插件不光能够检查代 码规范，还能够进行无用代码分析、自动埋点打桩、线下测试分析、方法名混淆等。\u003C\u002Fp\u003E\n\u003Ch1 class=\"heading\"\u003E结语\u003C\u002Fh1\u003E\n\u003Cp\u003E理解iOS的编译原理，有利于我们更加深层次的理解程序，让我们从底层的角度去看待问题和思考问题的解决方案。\u003C\u002Fp\u003E\n\u003Ch1 class=\"heading\"\u003E作者简介\u003C\u002Fh1\u003E\n\u003Cp\u003E范冲冲，民生科技有限公司 用户体验技术部 移动金融开发平台开发工程师\u003C\u002Fp\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F8\u002F20\u002F16cae0d838f2c878~tplv-t2oaga2asx-image.image\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThanks!\u003C\u002Fp\u003E\n",originalUrl:"https:\u002F\u002Fjuejin.im\u002Fpost\u002F6844903896230395918",type:"post",collected:a,viewsCount:5331,username:"民生Fintech",viewerHasLiked:a,draftId:"6845076386260975623",collectionCount:64},entryView:{},author:{id:"501033033824039",self_description:void 0,followed:a,viewerIsFollowing:void 0,community:void 0,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:4,user_id:"501033033824039",user_name:"民生Fintech",company:"民生&科技",job_title:"Fintech Researcher",avatar_large:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F5\u002F21\u002F16ad978742e404ba~tplv-t2oaga2asx-image.image",description:"集众人所长",followee_count:14,follower_count:276,post_article_count:13,digg_article_count:g,got_digg_count:443,got_view_count:61176,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:1894,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:501033033824039,jpower:1894,jscore:19,jpower_level:4,jscore_level:l,jscore_title:"见习掘友",author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:30,jscore_this_level_mini_score:d},is_vip:a,become_author_days:d,collection_set_article_count:d,juejinPower:1894,jobTitle:"Fintech Researcher",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"民生Fintech",blogAddress:void 0,selfDescription:"集众人所长",beLikedCount:443,beReadCount:61176,followerCount:276,followingCount:14,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:13,pinCount:d,likedArticleCount:g,likedPinCount:d,avatar:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F5\u002F21\u002F16ad978742e404ba~tplv-t2oaga2asx-image.image",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:14,applyEventCount:d,need_lead:d,followTopicCnt:d},adEntryList:[],relatedEntryList:[],linkVotingList:[],userAnnuals:[],columnList:[],resultHtml:"\u003Cstyle\u003E.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre\u003Ecode{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:\"\"}.markdown-body blockquote\u003Ep{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}\u003C\u002Fstyle\u003E\u003Ch1 data-id=\"heading-0\"\u003E引言\u003C\u002Fh1\u003E\n\u003Cp\u003E在Xcode中，当我们按下command + B进行build操作后发生了那些事情，这是一个将代码编译的过程。Xcode现在使用的编译器是LLVM，Xcode 早期使用的是GCC编译器，由于一些历史原因，从Xcode5开始正式过渡到使用LLVM编译器。下文将着重介绍LLVM。\u003C\u002Fp\u003E\n\u003Ch1 data-id=\"heading-1\"\u003E编译原理\u003C\u002Fh1\u003E\n\u003Ch2 data-id=\"heading-2\"\u003ELLVM简介\u003C\u002Fh2\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c22fea55748d58~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image\" loading=\"lazy\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003ELLVM项目是模块化、可重用的编译器以及工具链技术的集合。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E美国计算机协会（ACM）将其 2012 年软件系统奖颁给了LLVM，之前曾获得此奖项的软件和技术包括：Java、Apache、Mosaic、the World Wide Web、SmallTalk、UNIX、Eclipse等等。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ELLVM项目的发展起源于2000年伊利诺伊大学厄巴纳-香槟分校维克拉姆·艾夫（Vikram Adve）与克里斯·拉特纳（Chris Lattner）的研究，他们想要为所有静态及动态语言创造出动态的编译技术。LLVM是以BSD授权来发展的开源软件。2005年，苹果电脑雇用了克里斯·拉特纳及他的团队为苹果电脑开发应用程序系统，LLVM为现今Mac OS X及iOS开发工具的一部分。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ELLVM的命名最早源自于底层虚拟机（Low Level Virtual Machine）的首字母缩写，由于这个项目的范围并不局限于创建一个虚拟机，这个缩写导致了广泛的疑惑。官方描述如下：The name “LLVM” itself is not an acronym；it is the full name of the project。LLVM这个名称并不是首字母缩略词，它是项目的全名。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ELLVM开始成长之后，成为众多编译工具及低级工具技术的统称，使得这个名字变得更不贴切，开发者因而决定放弃这个缩写的意涵，现今LLVM已单纯成为一个品牌，适用于LLVM下的所有项目，包含LLVM中介码（LLVM IR）、LLVM除错工具、LLVM C++标准库等。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E目前NDK\u002FXcode均采用LLVM作为默认的编译器。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 data-id=\"heading-3\"\u003E传统的编译器架构\u003C\u002Fh2\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c2301ada5faae3~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image\" loading=\"lazy\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EFrontend：前端，对源码做词法分析、语法分析、语义分析、生成中间代码\u003C\u002Fli\u003E\n\u003Cli\u003EOptimizer：优化器，用于中间代码优化\u003C\u002Fli\u003E\n\u003Cli\u003EBackend：后端，用于生成机器码\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 data-id=\"heading-4\"\u003ELLVM架构\u003C\u002Fh2\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c230372fc40295~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image\" loading=\"lazy\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003E前端将各种类型的源代码编译为中间代码，也就是bitcode，在LLVM体系内，不同的语言有不同的编译器前端，常见的如clang负责 c\u002Fc++\u002Foc的编译，flang负责fortran的编译，swiftc负责swift的编译等等。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E不同的前后端使用统一的中间代码LLVM Intermediate Representation(LLVM IR)。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E优化阶段是一个通用的阶段，针对的是统一的LLVM IR，无论是新的编程语言，还是支持新的硬件设备，都不需要对优化阶段做修改，具体是对bitcode进行各种类型的优化，将bitcode代码进行一些逻辑的转换，使得代码效率更高，体积更小，比如DeadStrip\u002FSimplifyCFG。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E后端，也叫CodeGenerator，负责把优化后的bitcode编译为指定目标架构的机器码，比如 X86Backend负责把bitcode编译为x86指令集的机器码。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EGCC相比之下，前后端耦合在了一起。所以，GCC支持一门新的语言，或是为了支持一个新的平台，就变得异常困难。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ELLVM现在被作为实现各种静态和运行时编译语言通用基础架构（GCC 家族、Java、.Net、Python、Ruby、Scheme、Haskell、D等）。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ELLVM体系中，不同语言源代码将会被转化为统一的bitcode格式，三个模块相互独立，可以充分复用。比如，如果开发一门新的语言，只要制造一个该语言的前端，将源码编译为bitcode，优化和后端不用管。同理，如果新的芯片架构问世，只需基于LLVM重新编写一套目标平台的后端即可。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 data-id=\"heading-5\"\u003EClang\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003ELLVM项目的一个子项目。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E基于LLVM架构的C\u002FC++\u002FObjective-C\u002FObjective-C++编译器前端。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E相比于 GCC，Clang具有如下优点：\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E编译速度快：在某些平台上，Clang的编译速度显著的快过GCC（Debug 模式下编译 OC 速度比 GCC 快 3 倍）；\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E占用内存小：Clang生成的AST所占用的内存是GCC的五分之一左右；\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E模块化设计：Clang采用基于库的模块化设计，易于IDE集成及其他用途的重用；\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E诊断信息可读性强：在编译过程中，Clang创建并保留了大量详细的元数据（metadata），有利于调试和错误报告；\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E设计清晰简单，容易理解，易于扩展增强。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E客观的说GCC也有很多优点：例如支持多平台，基于C无需 C++编译器即可编译。这个优点到苹果那里反而成了缺点，苹果需要的是快。\u003C\u002Fp\u003E\n\u003Ch2 data-id=\"heading-6\"\u003EClang与LLVM\u003C\u002Fh2\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c2308b0b439c74~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image\" loading=\"lazy\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E广义的LLVM：整个LLVM架构\u003C\u002Fli\u003E\n\u003Cli\u003E狭义的LLVM：LLVM后端（代码优化、目标代码生成等）\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c2308efb88f492~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image\" loading=\"lazy\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Ch2 data-id=\"heading-7\"\u003EOC源文件的编译过程\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003E命令行查看编译的过程：\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode lang=\"arduino\" class=\"hljs language-arduino copyable\"\u003Eclang -ccc-print-phases main.m\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c2309eafbce5c5~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image\" loading=\"lazy\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E查看preprocessor（预处理）的结果：\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode lang=\"bash\" class=\"hljs language-bash copyable\"\u003Eclang -E main.m -F \u002FApplications\u002FXcode.app\u002FContents\u002FDeveloper\u002FPlatforms\u002FiPhoneSimulator.platform\u002FDeveloper\u002FSDKs\u002FiPhoneSimulator.sdk\u002FSystem\u002FLibrary\u002FFrameworks \n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c230a84fef3488~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image\" loading=\"lazy\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Ch3 data-id=\"heading-8\"\u003E1. 词法分析\u003C\u002Fh3\u003E\n\u003Cp\u003E词法分析，生成Token\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode lang=\"arduino\" class=\"hljs language-arduino copyable\"\u003E\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-type\"\u003Eint\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003Esum\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E(\u003Cspan class=\"hljs-type\"\u003Eint\u003C\u002Fspan\u003E a,\u003Cspan class=\"hljs-type\"\u003Eint\u003C\u002Fspan\u003E b)\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E{\n    \u003Cspan class=\"hljs-type\"\u003Eint\u003C\u002Fspan\u003E c = a + b;\n    \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E c;\n}\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cpre\u003E\u003Ccode lang=\"css\" class=\"hljs language-css copyable\"\u003Eclang -fmodules -E -Xclang -dump-tokens \u003Cspan class=\"hljs-selector-tag\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-selector-class\"\u003E.m\u003C\u002Fspan\u003E\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c230bcff1b9eb8~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image\" loading=\"lazy\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E这个命令的作用是，显示每个Token的类型、值，以及位置。参考该链接，可以看到Clang定义的所有Token类型。\n可以分为下面这4类：\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E关键字：语法中的关键字，比如 if、else、while、for 等；\u003C\u002Fli\u003E\n\u003Cli\u003E标识符：变量名；\u003C\u002Fli\u003E\n\u003Cli\u003E字面量：值、数字、字符串；\u003C\u002Fli\u003E\n\u003Cli\u003E特殊符号：加减乘除等符号。\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 data-id=\"heading-9\"\u003E2. 语法分析\u003C\u002Fh3\u003E\n\u003Cp\u003E利用上面输出的Token先按照语法组合成语义，生成类似VarDecl这样的节点，然后将这些节点按照层级关系构成抽象语法树（AST）。\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E语法分析，生成语法树（AST，Abstract Syntax Tree）\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode lang=\"css\" class=\"hljs language-css copyable\"\u003Eclang -fmodules -fsyntax-only -Xclang -ast-dump \u003Cspan class=\"hljs-selector-tag\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-selector-class\"\u003E.m\u003C\u002Fspan\u003E\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003ETranslationUnitDecl是根节点，表示一个编译单元；Decl表示一个声明；Expr表示的是表达式；Literal表示字面量，是一个特殊的Expr；Stmt表示陈述。\u003C\u002Fp\u003E\n\u003Cp\u003E除此之外，Clang还有众多种类的节点类型。Clang里，节点主要分成Type类型、Decl声明、Stmt陈述这三种，其他的都是这三种的派生。通过扩展这三类节点，就能够将无限的代码形态用有限的形式来表现出来。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c230e733a442bc~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image\" loading=\"lazy\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c230ee06a7b486~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image\" loading=\"lazy\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Ch3 data-id=\"heading-10\"\u003E3. LLVM IR\u003C\u002Fh3\u003E\n\u003Cp\u003ELLVM IR有3种表示形式，但本质上是等价的。\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003Etext：便于阅读的文本格式，类似于汇编语言，拓展名 .ll\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode lang=\"css\" class=\"hljs language-css copyable\"\u003Eclang -S -emit-llvm \u003Cspan class=\"hljs-selector-tag\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-selector-class\"\u003E.m\u003C\u002Fspan\u003E\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cul\u003E\n\u003Cli\u003Ememory：内存格式\u003C\u002Fli\u003E\n\u003Cli\u003Ebitcode：二进制格式，拓展名 .bc\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode lang=\"css\" class=\"hljs language-css copyable\"\u003Eclang -c -emit-llvm \u003Cspan class=\"hljs-selector-tag\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-selector-class\"\u003E.m\u003C\u002Fspan\u003E\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 data-id=\"heading-11\"\u003E4. IR基本语法\u003C\u002Fh3\u003E\n\u003Cp\u003E.ll 文件部分内容，如下：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c2310ae9387652~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image\" loading=\"lazy\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E注释以分号 ; 开头\u003C\u002Fli\u003E\n\u003Cli\u003E全局标识符以@开头，局部标示符以%开头\u003C\u002Fli\u003E\n\u003Cli\u003Ealloca，在当前函数栈帧中分配内存\u003C\u002Fli\u003E\n\u003Cli\u003Ei32 ，32bit，4 个字节\u003C\u002Fli\u003E\n\u003Cli\u003Ealign，内存对齐\u003C\u002Fli\u003E\n\u003Cli\u003Estore，写入数据\u003C\u002Fli\u003E\n\u003Cli\u003Eload，读取数据\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch1 data-id=\"heading-12\"\u003E应用与实践\u003C\u002Fh1\u003E\n\u003Cp\u003E基于LLVM 、Clang可以做很多实践，如下：\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003ELibClang、LibTooling、Clang Plugin\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E官方参考：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fclang.llvm.org%2Fdocs%2FTooling.html\" title=\"https:\u002F\u002Fclang.llvm.org\u002Fdocs\u002FTooling.html\" ref=\"nofollow noopener noreferrer\"\u003Eclang.llvm.org\u002Fdocs\u002FToolin…\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E应用：语法树分析、语言转换等\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003EOCLint、Clang静态分析器（Clang Static Analyzer）\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EClang插件开发\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E官方参考：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fclang.llvm.org%2Fdocs%2FClangPlugins.html\" title=\"https:\u002F\u002Fclang.llvm.org\u002Fdocs\u002FClangPlugins.html\" ref=\"nofollow noopener noreferrer\"\u003Eclang.llvm.org\u002Fdocs\u002FClangP…\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fclang.llvm.org%2Fdocs%2FExternalClangExamples.html\" title=\"https:\u002F\u002Fclang.llvm.org\u002Fdocs\u002FExternalClangExamples.html\" ref=\"nofollow noopener noreferrer\"\u003Eclang.llvm.org\u002Fdocs\u002FExtern…\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fclang.llvm.org%2Fdocs%2FRAVFrontendAction.html\" title=\"https:\u002F\u002Fclang.llvm.org\u002Fdocs\u002FRAVFrontendAction.html\" ref=\"nofollow noopener noreferrer\"\u003Eclang.llvm.org\u002Fdocs\u002FRAVFro…\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E应用：代码检查（命名规范、代码规范）等\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EPass开发\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E官方参考：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fllvm.org%2Fdocs%2FWritingAnLLVMPass.html\" title=\"https:\u002F\u002Fllvm.org\u002Fdocs\u002FWritingAnLLVMPass.html\" ref=\"nofollow noopener noreferrer\"\u003Ellvm.org\u002Fdocs\u002FWritin…\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E应用：中间代码优化、代码混淆等\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E开发新的编程语言\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fllvm-tutorial-cn.readthedocs.io%2Fen%2Flatest%2Findex.html\" title=\"https:\u002F\u002Fllvm-tutorial-cn.readthedocs.io\u002Fen\u002Flatest\u002Findex.html\" ref=\"nofollow noopener noreferrer\"\u003Ellvm-tutorial-cn.readthedocs.io\u002Fen\u002Flatest\u002Fi…\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fkaleidoscope-llvm-tutorial-zh-cn.readthedocs.io%2Fzh_CN%2Flatest%2F\" title=\"https:\u002F\u002Fkaleidoscope-llvm-tutorial-zh-cn.readthedocs.io\u002Fzh_CN\u002Flatest\u002F\" ref=\"nofollow noopener noreferrer\"\u003Ekaleidoscope-llvm-tutorial-zh-cn.readthedocs.io\u002Fzh_CN\u002Flates…\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Ch2 data-id=\"heading-13\"\u003E编写及运行Clang插件\u003C\u002Fh2\u003E\n\u003Cp\u003EClang使用模块化设计，可以将自身功能以库的方式来供上层应用来调用。比如，编码规范检查、IDE 中的语法高亮、语法检查等上层应用，都是使用Clang库的接口开发出来的。Clang有三个接口库可以供上层应用调用，分别是LibClang、Clang Plugin、LibTooling。\u003C\u002Fp\u003E\n\u003Cp\u003ELibClang为了兼容更多Clang版本，相比Clang少了很多功能；Clang Plugin和LibTooling具备Clang 的全量能力。Clang Plugin编写代码的方式，和LibTooling几乎一样，不同的是Clang Plugin还能够控制编译过程，可以加warning或者直接中断编译提示错误。另外，编写好的LibTooling能够非常方便地转成Clang Plugin。\n因此，Clang Plugin在功能上是最全的。\u003C\u002Fp\u003E\n\u003Ch3 data-id=\"heading-14\"\u003E1. 源码下载\u003C\u002Fh3\u003E\n\u003Cp\u003E下载 LLVM Project\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode lang=\"bash\" class=\"hljs language-bash copyable\"\u003E git \u003Cspan class=\"hljs-built_in\"\u003Eclone\u003C\u002Fspan\u003E https:\u002F\u002Fgithub.com\u002Fllvm\u002Fllvm-project.git\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c2316ccda46f08~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image\" loading=\"lazy\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E上图中，clang目录就是类C语言编译器的代码目录；llvm目录的代码包含两部分，一部分是对源码进行平台 无关优化的优化器代码，另一部分是生成平台相关汇编代码的生成器代码；lldb目录里是调试器的代码；lld里是链接器代码。\u003C\u002Fp\u003E\n\u003Ch3 data-id=\"heading-15\"\u003E2. 源码编译\u003C\u002Fh3\u003E\n\u003Cp\u003EmacOS属于类UNIX平台，因此既可以生成Makefile文件来编译，也可以生成Xcode工程来编译。\u003C\u002Fp\u003E\n\u003Cp\u003E进入llvm-project文件目录，生成Makefile文件：\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E在llvm同级目录下新建一个llvm_make目录\u003C\u002Fli\u003E\n\u003Cli\u003E在llvm_make中利用CMake进行编译\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode lang=\"ini\" class=\"hljs language-ini copyable\"\u003Ecmake \u003Cspan class=\"hljs-attr\"\u003E-DLLVM_ENABLE_PROJECTS\u003C\u002Fspan\u003E=clang -G \u003Cspan class=\"hljs-string\"\u003E\"Unix Makefiles\"\u003C\u002Fspan\u003E ..\u002Fllvm\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E生成Xcode工程，可以使用如下命令\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E安装CMake工具\u003C\u002Fli\u003E\n\u003Cli\u003E在llvm同级目录下新建一个llvm_xcode目录\u003C\u002Fli\u003E\n\u003Cli\u003E在llvm_xcode中利用CMake进行编译\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode lang=\"ini\" class=\"hljs language-ini copyable\"\u003Ecmake -G Xcode \u003Cspan class=\"hljs-attr\"\u003E-DLLVM_ENABLE_PROJECTS\u003C\u002Fspan\u003E=clang ..\u002Fllvm\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E想要更多地了解CMake的语法和功能，你可以查看官方文档。\u003C\u002Fp\u003E\n\u003Cp\u003E执行cmake命令时，你可能会遇到下面的提示：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode lang=\"swift\" class=\"hljs language-swift copyable\"\u003E\u003Cspan class=\"hljs-operator\"\u003E--\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-type\"\u003EThe\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-type\"\u003EC\u003C\u002Fspan\u003E compiler identification \u003Cspan class=\"hljs-keyword\"\u003Eis\u003C\u002Fspan\u003E unknown \u003Cspan class=\"hljs-operator\"\u003E--\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-type\"\u003EThe\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-type\"\u003ECXX\u003C\u002Fspan\u003E compiler identification \u003Cspan class=\"hljs-keyword\"\u003Eis\u003C\u002Fspan\u003E unknown \u003Cspan class=\"hljs-type\"\u003ECMake\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-type\"\u003EError\u003C\u002Fspan\u003E at \u003Cspan class=\"hljs-type\"\u003ECMakeLists\u003C\u002Fspan\u003E.txt:\u003Cspan class=\"hljs-number\"\u003E39\u003C\u002Fspan\u003E (project):\n\n\u003Cspan class=\"hljs-type\"\u003ENo\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-type\"\u003ECMAKE_C_COMPILER\u003C\u002Fspan\u003E could be found. \n\n\u003Cspan class=\"hljs-type\"\u003ECMake\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-type\"\u003EError\u003C\u002Fspan\u003E at \u003Cspan class=\"hljs-type\"\u003ECMakeLists\u003C\u002Fspan\u003E.txt:\u003Cspan class=\"hljs-number\"\u003E39\u003C\u002Fspan\u003E (project):\n\n\u003Cspan class=\"hljs-type\"\u003ENo\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-type\"\u003ECMAKE_CXX_COMPILER\u003C\u002Fspan\u003E could be found.\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E这表明cmake没有找到代码编译器的命令行工具。分两种情况处理：\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E如果没有安装Xcode Commandline Tools的话，可以执行如下命令安装：\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode lang=\"lua\" class=\"hljs language-lua copyable\"\u003Excode-\u003Cspan class=\"hljs-built_in\"\u003Eselect\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-comment\"\u003E--install\u003C\u002Fspan\u003E\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cul\u003E\n\u003Cli\u003E如果你已经安装了Xcode Commandline Tools的话，直接reset即可\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode lang=\"lua\" class=\"hljs language-lua copyable\"\u003Esudo xcode-\u003Cspan class=\"hljs-built_in\"\u003Eselect\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-comment\"\u003E--reset\u003C\u002Fspan\u003E\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E生成Xcode工程后，打开生成的LLVM.xcodeproj文件，选择Automatically Create Schemes。\u003C\u002Fp\u003E\n\u003Cp\u003E生成Xcode项目后再利用Xcode进行编译，但是速度很慢\u003C\u002Fp\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c231a211d11607~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image\" loading=\"lazy\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Ch3 data-id=\"heading-16\"\u003E3. 插件目录\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E在clang\u002Ftools源码目录下新建一个插件目录，比如叫做mskj_plugin，添加MSKJPlugin.cpp文件和 CMakeLists.txt文件。其中，CMake编译需要通过CMakeLists.txt文件来指导编译，cpp是源文件。\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c231ae4015671f~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image\" loading=\"lazy\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E在clang\u002Ftools目录下的CMakeList.txt文件当中最后一行加入：\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode lang=\"scss\" class=\"hljs language-scss copyable\"\u003E\u003Cspan class=\"hljs-built_in\"\u003Eadd_clang_subdirectory\u003C\u002Fspan\u003E(mskj-plugin)\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cul\u003E\n\u003Cli\u003E使用如下代码编写clang\u002Ftools\u002Fmskj-plugin\u002FCMakeLists.txt文件，来定制编译流程：\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode lang=\"scss\" class=\"hljs language-scss copyable\"\u003E\u003Cspan class=\"hljs-built_in\"\u003Eadd_llvm_library\u003C\u002Fspan\u003E(MSKJPlugin MODULE MSKJPlugin.cpp PLUGIN_TOOL clang)\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EMSKJPlugin是插件名，MSKJPlugin.cpp是源代码文件，这段代码是指，要将Clang插件代码集成到LLVM的Xcode工程中，并作为一个模块进行编写调试。添加了Clang插件的目录和文件后，再次用cmake命令生成Xcode工程，里面就能够集成MSKJPlugin.cpp文件。\u003C\u002Fp\u003E\n\u003Ch3 data-id=\"heading-17\"\u003E4. 编写插件源码\u003C\u002Fh3\u003E\n\u003Cp\u003E① 编写PluginASTAction代码\u003C\u002Fp\u003E\n\u003Cp\u003E由于Clang插件是没有main函数的，入口是PluginASTAction的ParseArgs函数。所以，编写Clang插件还要实现ParseArgs来处理入口参数。代码如下所示：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode lang=\"arduino\" class=\"hljs language-arduino copyable\"\u003E \u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EMSKJASTAction\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-keyword\"\u003Epublic\u003C\u002Fspan\u003E PluginASTAction {\n    \u003Cspan class=\"hljs-keyword\"\u003Epublic\u003C\u002Fspan\u003E:\n        \u003Cspan class=\"hljs-function\"\u003Eunique_ptr&#x3C;ASTConsumer\u003E \u003Cspan class=\"hljs-title\"\u003ECreateASTConsumer\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E(CompilerInstance &#x26;ci, StringRef iFile)\u003C\u002Fspan\u003E \u003C\u002Fspan\u003E{\n            \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003Eunique_ptr\u003C\u002Fspan\u003E&#x3C;MSKJASTConsumer\u003E (\u003Cspan class=\"hljs-keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-built_in\"\u003EMSKJASTConsumer\u003C\u002Fspan\u003E(ci));\n        }\n        \n        \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-type\"\u003Ebool\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003EParseArgs\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E(\u003Cspan class=\"hljs-type\"\u003Econst\u003C\u002Fspan\u003E CompilerInstance &#x26;ci, \u003Cspan class=\"hljs-type\"\u003Econst\u003C\u002Fspan\u003E vector&#x3C;string\u003E &#x26;args)\u003C\u002Fspan\u003E \u003C\u002Fspan\u003E{\n            \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-literal\"\u003Etrue\u003C\u002Fspan\u003E;\n        }\n    };\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E② 编写ASTConsumer\u003C\u002Fp\u003E\n\u003Cp\u003EFrontActions是编写Clang插件的入口，也是一个接口，是基于ASTFrontendAction的抽象基类。FrontActions为接下来基于AST操作的函数提供了一个入口和工作环境。\u003C\u002Fp\u003E\n\u003Cp\u003E通过这个接口，你可以编写在编译过程中自定义的操作，具体方式是：通过ASTFrontendAction在 AST上自定义操作，重载CreateASTConsumer函数返回你自己的Consumer，以获取AST上的 ASTConsumer单元。ASTConsumer可以提供很多入口，是一个可以访问AST的抽象基类，可以重载 HandleTopLevelDecl()和 HandleTranslationUnit()两个函数，以接收访问AST时的回调。其中，HandleTopLevelDecl()函数是在访问到全局变量、函数定义这样最上层声明时进行回调，HandleTranslationUnit()函数会在接收每个节点访问时的回调。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode lang=\"scss\" class=\"hljs language-scss copyable\"\u003Eclass MSKJASTConsumer: public ASTConsumer {\n    private:\n        MatchFinder matcher;\n        MSKJHandler handler;\n        \n    public:\n        MSKJASTConsumer(CompilerInstance &#x26;ci) :handler(ci) {\n            matcher\u003Cspan class=\"hljs-selector-class\"\u003E.addMatcher\u003C\u002Fspan\u003E(objcInterfaceDecl()\u003Cspan class=\"hljs-selector-class\"\u003E.bind\u003C\u002Fspan\u003E(\"ObjCInterfaceDecl\"), &#x26;handler);\n        }\n        \n        void \u003Cspan class=\"hljs-built_in\"\u003EHandleTranslationUnit\u003C\u002Fspan\u003E(ASTContext &#x26;context) {\n            matcher\u003Cspan class=\"hljs-selector-class\"\u003E.matchAST\u003C\u002Fspan\u003E(context);\n        }    \n};\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E③ 处理节点\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode lang=\"ini\" class=\"hljs language-ini copyable\"\u003E class MSKJHandler : public MatchFinder::MatchCallback {\n    private:\n        CompilerInstance &#x26;ci\u003Cspan class=\"hljs-comment\"\u003E;\u003C\u002Fspan\u003E\n     \n    public:\n        MSKJHandler(CompilerInstance &#x26;ci) :ci(ci) {}\n        \n        void run(const MatchFinder::MatchResult &#x26;Result) {\n            if (const ObjCInterfaceDecl *\u003Cspan class=\"hljs-attr\"\u003Edecl\u003C\u002Fspan\u003E = Result.Nodes.getNodeAs&#x3C;ObjCInterfaceDecl\u003E(\u003Cspan class=\"hljs-string\"\u003E\"ObjCInterfaceDecl\"\u003C\u002Fspan\u003E)) {\n                size_t \u003Cspan class=\"hljs-attr\"\u003Epos\u003C\u002Fspan\u003E = decl-\u003EgetName().find(\u003Cspan class=\"hljs-string\"\u003E'_'\u003C\u002Fspan\u003E)\u003Cspan class=\"hljs-comment\"\u003E;\u003C\u002Fspan\u003E\n                if (pos != StringRef::npos) {\n                    DiagnosticsEngine &#x26;\u003Cspan class=\"hljs-attr\"\u003ED\u003C\u002Fspan\u003E = ci.getDiagnostics()\u003Cspan class=\"hljs-comment\"\u003E;\u003C\u002Fspan\u003E\n                    SourceLocation \u003Cspan class=\"hljs-attr\"\u003Eloc\u003C\u002Fspan\u003E = decl-\u003EgetLocation().getLocWith\u003Cspan class=\"hljs-literal\"\u003EOff\u003C\u002Fspan\u003Eset(pos)\u003Cspan class=\"hljs-comment\"\u003E;\u003C\u002Fspan\u003E\n                    D.Report(loc, D.getCustomDiagID(DiagnosticsEngine::Error, \"MSKJ：类名中不能带有下划线\"))\u003Cspan class=\"hljs-comment\"\u003E;\u003C\u002Fspan\u003E\n                }\n            }\n        }\n    }\u003Cspan class=\"hljs-comment\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 data-id=\"heading-18\"\u003E5. 注册Clang插件\u003C\u002Fh3\u003E\n\u003Cp\u003E在Clang插件源码中编写注册代码。编译器会在编译过程中从动态库加载Clang插件。使用FrontendPluginRegistry::Add&#x3C;\u003E在库中注册插件。注册Clang插件的代码如下：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode lang=\"php\" class=\"hljs language-php copyable\"\u003E\u003Cspan class=\"hljs-built_in\"\u003Estatic\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EFrontendPluginRegistry\u003C\u002Fspan\u003E::\u003Cspan class=\"hljs-variable constant_\"\u003EAdd\u003C\u002Fspan\u003E&#x3C;\u003Cspan class=\"hljs-title class_\"\u003EMSKJPlugin\u003C\u002Fspan\u003E::\u003Cspan class=\"hljs-variable constant_\"\u003EMSKJASTAction\u003C\u002Fspan\u003E\u003E \u003Cspan class=\"hljs-title function_ invoke__\"\u003EX\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E\"MSKJPlugin\"\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E\"The MSKJPlugin is my first clang-plugin.\"\u003C\u002Fspan\u003E);\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E在Clang插件代码的最下面，定义的MSKJPlugin字符串是命令行字符串，供以后调用时使用，The MSKJPlugin is my first clang-plugin是对Clang插件的描述。\u003C\u002Fp\u003E\n\u003Ch3 data-id=\"heading-19\"\u003E6. 使用clang 插件\u003C\u002Fh3\u003E\n\u003Cp\u003E利用CMake命令重新生成Xcode工程，可在Loadable modules下看到MSKJPlugin：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F7\u002F24\u002F16c2321405ed2a03~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image\" loading=\"lazy\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E选择MSKJPlugin这个target进行编译，编译完会生成一个动态库文件。\u003C\u002Fp\u003E\n\u003Cp\u003ELLVM官方有一个完整可用的Clang插件示例，可以帮我们打印出最上层函数的名字。\u003C\u002Fp\u003E\n\u003Cp\u003E通过学习这个插件示例，看看如何使用Clang插件。\u003C\u002Fp\u003E\n\u003Cp\u003E使用Clang插件可以通过-load命令行选项加载包含插件注册表的动态库，-load命令行会加载已经注册了的所有Clang插件。使用-plugin选项选择要运行的Clang插件。Clang插件的其他参数通过-plugin-arg-来传递。\u003C\u002Fp\u003E\n\u003Cp\u003Ecc1进程类似一种预处理，这种预处理会发生在编译之前。cc1和Clang driver是两个单独的实体，cc1负责前端预处理，Clang driver则主要负责管理编译任务调度，每个编译任务都会接受cc1前端预处理的参数，然后进行调整。\u003C\u002Fp\u003E\n\u003Cp\u003E有两个方法可以让-load 和-plugin等选项到Clang的cc1进程中：\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E直接使用-cc1选项，缺点是要在命令行上指定完整的系统路径配置；\u003C\u002Fli\u003E\n\u003Cli\u003E使用-Xclang来为cc1进程添加这些选项。-Xclang参数只运行预处理器，直接将后面参数传递给cc1进程，而不影响clang driver的工作。\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E下面是一个编译Clang插件，然后使用-Xclang加载使用Clang插件的例子：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode lang=\"bash\" class=\"hljs language-bash copyable\"\u003E$ \u003Cspan class=\"hljs-built_in\"\u003Eexport\u003C\u002Fspan\u003E BD=\u002Fpath\u002Fto\u002Fbuild\u002Fdirectory \n$ (\u003Cspan class=\"hljs-built_in\"\u003Ecd\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-variable\"\u003E$BD\u003C\u002Fspan\u003E &#x26;&#x26; make PrintFunctionNames ) \n$ clang++ -D_GNU_SOURCE -D_DEBUG -D__STDC_CONSTANT_MACROS \\\n          -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -D_GNU_SOURCE \\ \n          -I\u003Cspan class=\"hljs-variable\"\u003E$BD\u003C\u002Fspan\u003E\u002Ftools\u002Fclang\u002Finclude -Itools\u002Fclang\u002Finclude -I\u003Cspan class=\"hljs-variable\"\u003E$BD\u003C\u002Fspan\u003E\u002Finclude -Iinclude \\                                        tools\u002Fclang\u002Ftools\u002Fclang-check\u002FClangCheck.cpp -fsyntax-only \\\n          -Xclang -load -Xclang \u003Cspan class=\"hljs-variable\"\u003E$BD\u003C\u002Fspan\u003E\u002Flib\u002FPrintFunctionNames.so -Xclang \\\n          -plugin -Xclang print-fns\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E上面命令中，先设置构建的路径，再通过make命令进行编译生成PrintFunctionNames.so，最后使用clang命令配合-Xclang参数加载使用Clang插件。\u003C\u002Fp\u003E\n\u003Cp\u003E你也可以直接使用-cc1参数，但是就需要按照下面的方式来指定完整的文件路径：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode lang=\"lua\" class=\"hljs language-lua copyable\"\u003E$ clang -cc1 -\u003Cspan class=\"hljs-built_in\"\u003Eload\u003C\u002Fspan\u003E ..\u002F..\u002FDebug+Asserts\u002Flib\u002FlibPrintFunctionNames.dylib -plugin \u003Cspan class=\"hljs-built_in\"\u003Eprint\u003C\u002Fspan\u003E-fns some-\u003Cspan class=\"hljs-built_in\"\u003Einput\u003C\u002Fspan\u003E-file.c\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 data-id=\"heading-20\"\u003E7. 更多\u003C\u002Fh3\u003E\n\u003Cp\u003E实现更复杂的插件功能，可以利用clang的API对语法树进行相应的分析与处理。\u003C\u002Fp\u003E\n\u003Cp\u003E关于AST的资料：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fclang.llvm.org%2Fdoxygen%2Fnamespaceclang.html\" title=\"https:\u002F\u002Fclang.llvm.org\u002Fdoxygen\u002Fnamespaceclang.html\" ref=\"nofollow noopener noreferrer\"\u003Eclang.llvm.org\u002Fdoxygen\u002Fnam…\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fclang.llvm.org%2Fdoxygen%2Fclassclang11Decl.html\" title=\"https:\u002F\u002Fclang.llvm.org\u002Fdoxygen\u002Fclassclang11Decl.html\" ref=\"nofollow noopener noreferrer\"\u003Eclang.llvm.org\u002Fdoxygen\u002Fcla…\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fclang.llvm.org%2Fdoxygen%2Fclassclang11Stmt.html\" title=\"https:\u002F\u002Fclang.llvm.org\u002Fdoxygen\u002Fclassclang11Stmt.html\" ref=\"nofollow noopener noreferrer\"\u003Eclang.llvm.org\u002Fdoxygen\u002Fcla…\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EClang插件本身的编写和使用并不复杂，关键是如何更好地应用到工作中，通过Clang插件不光能够检查代 码规范，还能够进行无用代码分析、自动埋点打桩、线下测试分析、方法名混淆等。\u003C\u002Fp\u003E\n\u003Ch1 data-id=\"heading-21\"\u003E结语\u003C\u002Fh1\u003E\n\u003Cp\u003E理解iOS的编译原理，有利于我们更加深层次的理解程序，让我们从底层的角度去看待问题和思考问题的解决方案。\u003C\u002Fp\u003E\n\u003Ch1 data-id=\"heading-22\"\u003E作者简介\u003C\u002Fh1\u003E\n\u003Cp\u003E范冲冲，民生科技有限公司 用户体验技术部 移动金融开发平台开发工程师\u003C\u002Fp\u003E\n\u003Cp\u003E\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cimg src=\"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F8\u002F20\u002F16cae0d838f2c878~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image\" loading=\"lazy\"\u003E\u003Cfigcaption\u003E\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThanks!\u003C\u002Fp\u003E\n",hitArticleCache:b,showSidebar:a,actionType:{FETCH:"view\u002Fcolumn\u002FFETCH",FETCH_ADDITIONAL:"view\u002Fcolumn\u002FFETCH_ADDITIONAL",FETCH_SIDEBAR_ADENTRY:"view\u002Fcolumn\u002FFETCH_SIDEBAR_ADENTRY",FETCH_AUTHOR_EXTRA:"view\u002Fcolumn\u002FFETCH_AUTHOR_EXTRA",RESET:"view\u002Fcolumn\u002FRESET"},recommendedArticleList:{list:[],cursor:f,loading:a,skeleton:a,hasMore:a,articleId:e,actionType:{UPDATE_STATE:"view\u002Fcolumn\u002Frecommend-List\u002FUPDATE_STATE",FETCH_MORE:"view\u002Fcolumn\u002Frecommend-List\u002FFETCH_MORE",FETCH:"view\u002Fcolumn\u002Frecommend-List\u002FFETCH",RESET:"view\u002Fcolumn\u002Frecommend-List\u002FRESET"}}},collection:{collection:{author:{}},actionType:{FETCH:"@\u002Fview\u002Fcollection\u002FFETCH",REFRESH:"@\u002Fview\u002Fcollection\u002FREFRESH",RESET:"@\u002Fview\u002Fcollection\u002FRESET"},list:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fcollection\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002Fcollection\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fcollection\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fcollection\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fcollection\u002Flist\u002FRESET"},id:e,sort:n}},gettingStarted:{category:{},actionType:{UPDATE_STATE:"@\u002Fview\u002FgettingStarted\u002FUPDATE_STATE",FOLLOW:"@\u002Fview\u002FgettingStarted\u002FFOLLOW",RESET:"@\u002Fview\u002FgettingStarted\u002FRESET",UPDATE_CATEGORY:"@\u002Fview\u002FgettingStarted\u002FUPDATE_CATEGORY"}},pin:{pin:{user:{},imageUrlList:[]},pinList:[],actionType:{FETCH:"@\u002Fview\u002Fpin\u002FFETCH",RESET:"@\u002Fview\u002Fpin\u002FRESET"},sidebar:{list:[],after:e,loading:a,isRecommend:a,hasNextPage:b,actionType:{UPDATE_STATE:"@\u002Fview\u002Fpin\u002Fsidebar\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fpin\u002Fsidebar\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Fpin\u002Fsidebar\u002FFETCH",RESET:"@\u002Fview\u002Fpin\u002Fsidebar\u002FRESET"}},commentList:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fpin\u002FcommentList\u002FUPDATE",FETCH:"@\u002Fview\u002Fpin\u002FcommentList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fpin\u002FcommentList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fpin\u002FcommentList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fpin\u002FcommentList\u002FRESET"},pinId:c},subCommentList:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FUPDATE",FETCH:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FRESET"},commentId:c}},topic:{topic:e,followedTopicList:[],actionType:{FETCH:"@\u002Fview\u002Ftopic\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Ftopic\u002FUPDATE_STATE",RESET:"@\u002Fview\u002Ftopic\u002FRESET"},allTopicList:{pageSize:x,page:d,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FRESET"},sortType:m},pinlist:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002FpinList\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002FpinList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002FpinList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002FpinList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002FpinList\u002FRESET"},sortType:p},sidebar:{actionType:{RESET:"@\u002Fview\u002Ftopic\u002Fsidebar\u002FRESET",UPDATE_STATE:"@\u002Fview\u002Ftopic\u002Fsidebar\u002FUPDATE_STATE"},attender:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FRESET"},topicId:c}},followedList:{pageSize:x,page:d,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FRESET"},after:d}},recommendationIndex:{actionType:{FETCH_USER:"@\u002Fview\u002Frecommendation\u002FFETCH_USER",FETCH_MORE:"@\u002Fview\u002Frecommendation\u002FFETCH_MORE",RESET:"@\u002Fview\u002Frecommendation\u002FRESET",FETCH:"@\u002Fview\u002Frecommendation\u002FFETCH"},cursor:e,hasMore:e,userList:[],loading:a,skeleton:b,category:k,categoryNavList:[],serverRenderUserList:a},event:{event:{},loading:a,user:{},actionType:{FETCH:"view\u002Fevent\u002FFETCH",RESET:"view\u002Fevent\u002FRESET"}},academyIndex:{academy:{},bannerList:[],qualitiedList:[],latestList:[],offlineList:[],loading:a,user:{},actionType:{FETCH:"view\u002Facademy\u002FFETCH",RESET:"view\u002Facademy\u002FRESET"}},coursesIndex:{loading:a,list:[],sort:"online",actionType:{FETCH:"view\u002Fcourses\u002FFETCH",RESET:"view\u002Fcourses\u002FRESET",FETCH_MORE:"view\u002Fcourses\u002FFETCH_MORE"}},team:{team:{},loading:b,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FFETCH",RESET:"@\u002Fview\u002Fteam\u002FRESET",UPDATE:"@\u002Fview\u002Fteam\u002FUPDATE",FOLLOW:"@\u002Fview\u002Fteam\u002FFOLLOW"},detailList:{actionType:{RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002FRESET"},posts:{list:[],hasMore:a,skeleton:a,loading:a,sort:n,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FRESET"}},pins:{list:[],hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FRESET"}},hire:{list:[],hasMore:a,cursor:f,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FRESET"}}}},couponList:{list:{"0":q,"1":q,"2":q}},payment:{selectedDiscount:{},bookletDetail:{},coupons:{availables:[],unavailables:[]},discountList:[]},activityVip:{selectedVipSku:{}}},component:{indexAside:{bannerList:[],userList:[],actionType:{FETCH_BANNER:"@\u002Fcomponent\u002Faside\u002FFETCH_BANNER",FETCH_USER:"@\u002Fcomponent\u002Faside\u002FFETCH_USER",CLOSE_BANNER:"@\u002Fcomponent\u002Faside\u002FCLOSE_BANNER"}}},ore:{oreCount:d},avatarMenuInfo:{},common:{theme:"light"},env:{ua:"Mozilla\u002F5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit\u002F537.36 (KHTML, like Gecko) Chrome\u002F110.0.0.0 Safari\u002F537.36",serverEnv:"production"},auth:{user:{id:"2894327269039357",self_description:void 0,followed:a,viewerIsFollowing:void 0,community:void 0,subscribedTagCount:12,wroteBookCount:d,boughtBookCount:d,isBindedPhone:g,level:d,user_id:"2894327269039357",user_name:"Leon0206",company:"网易云音乐",job_title:"iOS开发工程师",avatar_large:"https:\u002F\u002Fp6-passport.byteacctimg.com\u002Fimg\u002Fmosaic-legacy\u002F3795\u002F3044413937~300x300.image",power:d,phone:"17*****0590",email:e,allow_notification:a,rank_index:d,wallet_total_bill:d,description:e,blog_address:e,is_black:a,editor_type:e,register_time:1627475051,update_time:-62135596800,administrator:d,builder:d,favorable_author:d,book_author:d,phone_verified:g,wechat_verified:d,weibo_verified:d,github_verified:d,followee_count:4,follower_count:d,post_article_count:d,digg_article_count:g,view_article_count:84,subscribe_tag_count:12,got_digg_count:d,got_view_count:d,comment_count:d,collect_set_count:g,booklet_count:d,buy_booklet_count:d,post_shortmsg_count:d,comment_shortmsg_count:d,digg_shortmsg_count:d,ltime:d,isfollowed:a,forbidden_words:d,create_collect_set_count:g,follow_collect_set_count:d,weibo_nickname:e,wechat_nickname:e,github_nickname:e,apply_logout:d,is_logout:d,weibo_id:e,is_new:a,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,graduated_at:-62135596800,blog_move_priority:a,tech_team:{org_id:f,org_name:e,org_icon:e,role:d},job_count:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,digg_news_count:d,news_privilege:d,digg_toutiao_count:d,follow_column_cnt:g,can_tag_cnt:g,need_lead:d,follow_topic_count:d,badges:{wear_badges:c,obtain_badges:c,obtain_count:d,show_badge:a,link_url:e},is_collect_fast:a,user_growth_info:{user_id:2894327269039357,jpower:d,jscore:36,jpower_level:d,jscore_level:3,jscore_title:"新星掘友",author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:150,jscore_this_level_mini_score:30},is_vip:a,collection_set_article_count:d,juejinPower:d,jobTitle:"iOS开发工程师",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"Leon0206",blogAddress:e,selfDescription:e,beLikedCount:d,beReadCount:d,followerCount:d,followingCount:4,collectionCount:g,createdCollectionCount:g,followingCollectionCount:d,postedPostsCount:d,pinCount:d,likedArticleCount:g,likedPinCount:d,avatar:"https:\u002F\u002Fp6-passport.byteacctimg.com\u002Fimg\u002Fmosaic-legacy\u002F3795\u002F3044413937~300x300.image",latestLoginedInAt:c,createdAt:new Date(1627475051000),updatedAt:c,phoneNumber:"17*****0590",titleDescription:e,followeesCount:4,applyEventCount:d,followTopicCnt:d},clientId:e,token:e,qrCode:c,qrCodeStatus:c,qrCodeToken:c},tag:{subscribedTagList:[]},entry:{isLikeLoading:a},collection:{},comment:{},bookComment:{},repoComment:{},category:{list:[]},user:{subscribedTagList:[]},notification:{unreadCount:{user:d,system:d,total:d}},follow:{subscribedTagList:[]},error:{location:c,errorView:c,statusCode:200,needRiskModal:a,riskAppealUrl:e},abTest:{info:{}},suspensionPanel:{needSuspension:b},pinComment:{},pin:{deleteDialogVisible:a,reportDialogVisible:a,targetPin:c,isOnFocus:a},topic:{visible:a},activity:{"2020":{},offer:{is_show:d,start_time:d},voteData:{err_no:d,err_msg:"success",data:{face:{title:e,activity_id:"5",start_time:y,end_time:1675699200,status:l,image:"https:\u002F\u002Fp6-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fd9c6d6b34c8045e993f2f607a660dd43~tplv-k3u1fbpfcp-zoom-1.image",close_image:"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F882fc263e36347ffbf6d598de520870e~tplv-k3u1fbpfcp-image.image",url:"https:\u002F\u002Fjuejin.cn\u002Fpin\u002F7195849498253770808?utm_source=popup&utm_medium=jjapp&utm_campaign=xcyxj",is_show:d},top:{title:r,activity_id:j,start_time:s,end_time:t,status:g,image:"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F9563d620af3b48a791f77019c948f064~tplv-k3u1fbpfcp-zoom-1.image",close_image:"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Ff49fe994db7b4af7846259d97610bec0~tplv-k3u1fbpfcp-zoom-1.image",url:"https:\u002F\u002Fjuejin.cn\u002Fvip?utm_source=app_top",is_show:g},web_top:{title:r,activity_id:j,start_time:s,end_time:t,status:g,image:z,close_image:"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F19e7f58eecbd497c92397344e1d489a6~tplv-k3u1fbpfcp-zoom-1.image",url:"https:\u002F\u002Fjuejin.cn\u002Fvip?utm_source=web_nav",is_show:g},plugin_top:{title:r,activity_id:j,start_time:s,end_time:t,status:g,image:z,close_image:u,url:"https:\u002F\u002Fjuejin.cn\u002Fvip?utm_source=gold_browser_extension",is_show:g},search_top:{title:A,activity_id:j,start_time:B,end_time:1675612799,status:l,image:C,close_image:D,url:E,is_show:d},web_search:{title:A,activity_id:j,start_time:B,end_time:y,status:l,image:C,close_image:D,url:E,is_show:d},jcode_top:{title:"码上掘金编程挑战赛",activity_id:j,start_time:1670846400,end_time:1671983999,status:l,image:u,close_image:u,url:"https:\u002F\u002Fjuejin.cn\u002Fchallenge?utm_source=code_nav",is_show:d},offer:{title:e,activity_id:"2020",start_time:1617638400,end_time:1618934400,status:l,image:"https:\u002F\u002Fp9-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F2879410508de459c91ae8b7509ca75f8~tplv-k3u1fbpfcp-zoom-1.image",close_image:"https:\u002F\u002Fp9-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fa38d640009e14c87a7d29cd95dee27dd~tplv-k3u1fbpfcp-zoom-1.image",url:"https:\u002F\u002Fjuejin-activity.bytedance.net\u002Frank",is_show:d}}}},header:{leadStep:d,isPopupZlink:a},tcc:{tccConfig:c},route:{name:"column",path:v,hash:e,query:{},params:{id:w},fullPath:v,meta:{},from:{name:c,path:F,hash:e,query:{},params:{},fullPath:F,meta:{}}}},serverRendered:b,routePath:v,config:{API_HOST:"api.juejin.cn",CAPTCHA_HOST:"verify.snssdk.com",PLATFORM_APPID:{wechat:1277,weibo:1276,github:1045,wechatApp:1070},SCM_VERSION:"1.0.0.6544",http:{}},globalRefs:{}}}(false,true,null,0,"","0",1,20,"topic","2022","recommended",2,"hot","newest","following","popular",{},"掘金会员",1673020800,1680278400,"https:\u002F\u002Fp6-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F759e2aa805c0461b840e0f0f09ed05fa~tplv-k3u1fbpfcp-zoom-1.image?","\u002Fpost\u002F6844903896230395918","6844903896230395918",100,1675612800,"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F7482b3ad2cd14edda31f05399c2ae759~tplv-k3u1fbpfcp-zoom-1.image","开启我的2022年度报告",1672797600,"https:\u002F\u002Fp1-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F8a41831fce8b4c838f1807b2c86aea06~tplv-k3u1fbpfcp-zoom-1.image","https:\u002F\u002Fp9-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fe5199830276c4a85bc7c8cb8edecd54d~tplv-k3u1fbpfcp-image.image","https:\u002F\u002Fjuejin.cn\u002Freport2022\u002Fmobile?utm_source=search","\u002F"));</script><script src="./iOS 编译原理与应用 - 掘金_files/6ccc1bf.js" defer=""></script><script src="./iOS 编译原理与应用 - 掘金_files/c68ae6a.js" defer=""></script><script src="./iOS 编译原理与应用 - 掘金_files/607e9aa.js" defer=""></script><script src="./iOS 编译原理与应用 - 掘金_files/fe8610f.js" defer=""></script><script src="./iOS 编译原理与应用 - 掘金_files/37aab1f.js" defer=""></script><script src="./iOS 编译原理与应用 - 掘金_files/83d184c.js" defer=""></script><script src="./iOS 编译原理与应用 - 掘金_files/6a0af43.js" defer=""></script><script src="./iOS 编译原理与应用 - 掘金_files/6e787e2.js" defer=""></script>
  

<link href="./iOS 编译原理与应用 - 掘金_files/52.39cb9d6.css" rel="stylesheet" type="text/css"><link href="./iOS 编译原理与应用 - 掘金_files/4.4ebc7e8.css" rel="stylesheet" type="text/css"><link href="./iOS 编译原理与应用 - 掘金_files/default.c3d25dd.css" rel="stylesheet" type="text/css"><div data-v-47b82694="" data-v-1b688d7c="" data-transfer="true" class="collection-list-modal byte-modal v-transfer-dom"><div class="byte-modal__mask" style="z-index: 1000; display: none;"></div><div class="byte-modal__wrapper" style="z-index: 1000; display: none;"><div class="byte-modal__content" style="width: 520px;"><!----><div class="byte-modal__body"></div><!----></div></div></div><div data-v-47b82694="" data-v-fe76cb40="" data-transfer="true" class="collection-list-modal byte-modal v-transfer-dom"><div class="byte-modal__mask" style="z-index: 1001; display: none;"></div><div class="byte-modal__wrapper" style="z-index: 1001; display: none;"><div class="byte-modal__content" style="width: 520px;"><!----><div class="byte-modal__body"></div><!----></div></div></div><link href="./iOS 编译原理与应用 - 掘金_files/198.adcadde.css" rel="stylesheet" type="text/css"><div data-transfer="true" class="risk-modal byte-modal v-transfer-dom" align-center=""><div class="byte-modal__mask" style="z-index: 1002; display: none;"></div><div class="byte-modal__wrapper" style="z-index: 1002; display: none;"><div class="byte-modal__content" style="width: 350px;"><!----><div class="byte-modal__body"><div class="risk-modal-inner"><div class="risk-modal-title">温馨提示</div> <div>当前操作失败，如有疑问，可点击申诉</div> <div class="risk-modal-footer"><button type="button" class="cancel-button risk-button byte-btn byte-btn--default byte-btn--large"><!----><!----><span><span>前往申诉</span></span></button> <button type="button" class="risk-button byte-btn byte-btn--primary byte-btn--large"><!----><!----><span><span>我知道了</span></span></button></div></div></div><!----></div></div></div><link href="./iOS 编译原理与应用 - 掘金_files/139.9ccface.css" rel="stylesheet" type="text/css"><link href="./iOS 编译原理与应用 - 掘金_files/181.1b801b1.css" rel="stylesheet" type="text/css"><link href="./iOS 编译原理与应用 - 掘金_files/192.1dc0908.css" rel="stylesheet" type="text/css"><link href="./iOS 编译原理与应用 - 掘金_files/158.cb7fed2.css" rel="stylesheet" type="text/css"><div data-v-41eefe39="" data-transfer="true" class="lead byte-modal v-transfer-dom"><div class="byte-modal__mask" style="z-index: 1003; display: none;"></div><div class="byte-modal__wrapper" style="z-index: 1003; display: none;"><div class="byte-modal__content" style="width: 500px;"><div class="byte-modal__header"><img data-v-41eefe39="" src="./iOS 编译原理与应用 - 掘金_files/MaskGroup.13dfc4f.png" alt="" loading="lazy" class="header-bgc"> <span data-v-41eefe39="" class="header-title">选择你感兴趣的技术方向</span><span aria-label="Close" class="byte-modal__headerbtn"><i class="byte-icon byte-icon--close"><svg t="1561638608887" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="441911" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M512 448l288-288c6.4-6.4 19.2-6.4 32 0l25.6 32c6.4 6.4 6.4 19.2 0 32L569.6 505.6l288 288c6.4 6.4 6.4 19.2 0 32l-32 32c-6.4 6.4-19.2 6.4-32 0L512 569.6l-288 288c-6.4 6.4-19.2 6.4-32 0l-32-32c-6.4-6.4-6.4-19.2 0-32L448 505.6 160 224c-6.4-12.8-6.4-25.6 0-32l32-32c6.4-6.4 19.2-6.4 32 0L512 448z" p-id="441912"></path><path d="M512 448l288-288c6.4-6.4 19.2-6.4 32 0l25.6 32c6.4 6.4 6.4 19.2 0 32L569.6 505.6l288 288c6.4 6.4 6.4 19.2 0 32l-32 32c-6.4 6.4-19.2 6.4-32 0L512 569.6l-288 288c-6.4 6.4-19.2 6.4-32 0l-32-32c-6.4-6.4-6.4-19.2 0-32L448 505.6 160 224c-6.4-12.8-6.4-25.6 0-32l32-32c6.4-6.4 19.2-6.4 32 0L512 448z" p-id="441913"></path></svg></i></span></div><div class="byte-modal__body"> <div data-v-41eefe39="" class="classify-box"><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M2 2.5C1.44772 2.5 1 2.94772 1 3.5V11.5C1 12.0523 1.44772 12.5 2 12.5H14C14.5523 12.5 15 12.0523 15 11.5V3.5C15 2.94772 14.5523 2.5 14 2.5H2ZM4.5 7.5C4.22386 7.5 4 7.72386 4 8V10C4 10.2761 4.22386 10.5 4.5 10.5H5C5.27614 10.5 5.5 10.2761 5.5 10V8C5.5 7.72386 5.27614 7.5 5 7.5H4.5ZM7 5.5C7 5.22386 7.22386 5 7.5 5H8C8.27614 5 8.5 5.22386 8.5 5.5V10C8.5 10.2761 8.27614 10.5 8 10.5H7.5C7.22386 10.5 7 10.2761 7 10V5.5ZM10.5 6.5C10.2239 6.5 10 6.72386 10 7V10C10 10.2761 10.2239 10.5 10.5 10.5H11C11.2761 10.5 11.5 10.2761 11.5 10V7C11.5 6.72386 11.2761 6.5 11 6.5H10.5Z" fill="#86909C"></path><rect data-v-41eefe39="" id="Rectangle 282" x="3" y="13.5" width="10" height="1.3" rx="0.5" fill="#86909C"></rect></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              后端
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M2 2.5C1.44772 2.5 1 2.94772 1 3.5V6.5H15V3.5C15 2.94772 14.5523 2.5 14 2.5H2ZM15 7.8H1V13.5C1 14.0523 1.44772 14.5 2 14.5H14C14.5523 14.5 15 14.0523 15 13.5V7.8ZM8.65811 8.52566C8.92009 8.61298 9.06167 8.89614 8.97434 9.15811L7.97434 12.1581C7.88702 12.4201 7.60386 12.5617 7.34189 12.4743C7.07991 12.387 6.93833 12.1039 7.02566 11.8419L8.02566 8.84189C8.11298 8.57991 8.39614 8.43833 8.65811 8.52566ZM3.5 5.5C3.77614 5.5 4 5.27614 4 5C4 4.72386 3.77614 4.5 3.5 4.5C3.22386 4.5 3 4.72386 3 5C3 5.27614 3.22386 5.5 3.5 5.5ZM5.5 5C5.5 5.27614 5.27614 5.5 5 5.5C4.72386 5.5 4.5 5.27614 4.5 5C4.5 4.72386 4.72386 4.5 5 4.5C5.27614 4.5 5.5 4.72386 5.5 5ZM6.5 5.5C6.77614 5.5 7 5.27614 7 5C7 4.72386 6.77614 4.5 6.5 4.5C6.22386 4.5 6 4.72386 6 5C6 5.27614 6.22386 5.5 6.5 5.5ZM6.44721 9.27639C6.57071 9.52338 6.4706 9.82372 6.22361 9.94721L5.11803 10.5L6.22361 11.0528C6.4706 11.1763 6.57071 11.4766 6.44721 11.7236C6.32372 11.9706 6.02338 12.0707 5.77639 11.9472L3.77639 10.9472C3.607 10.8625 3.5 10.6894 3.5 10.5C3.5 10.3106 3.607 10.1375 3.77639 10.0528L5.77639 9.05279C6.02338 8.92929 6.32372 9.0294 6.44721 9.27639ZM9.77639 9.94721C9.5294 9.82372 9.42929 9.52338 9.55279 9.27639C9.67628 9.0294 9.97662 8.92929 10.2236 9.05279L12.2236 10.0528C12.393 10.1375 12.5 10.3106 12.5 10.5C12.5 10.6894 12.393 10.8625 12.2236 10.9472L10.2236 11.9472C9.97662 12.0707 9.67628 11.9706 9.55279 11.7236C9.42929 11.4766 9.5294 11.1763 9.77639 11.0528L10.882 10.5L9.77639 9.94721Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              前端
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><rect data-v-41eefe39="" id="Rectangle 287" x="5.7002" y="12.5" width="1.3" height="3" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 289" x="1" y="6.5" width="1.3" height="6" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 290" x="13.7002" y="6.5" width="1.3" height="6" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 288" x="9" y="12.5" width="1.3" height="3" rx="0.5" fill="#86909C"></rect><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M13 5.86364V12.5C13 13.0523 12.5523 13.5 12 13.5H4C3.44772 13.5 3 13.0523 3 12.5V5.86364V5.77273C3 5.74067 3.00151 5.70897 3.00446 5.67768C3.11608 3.35397 5.30996 1.5 8 1.5C10.69 1.5 12.8839 3.35397 12.9955 5.67768C12.9985 5.70897 13 5.74067 13 5.77273V5.86364ZM7 6.25C7 6.66421 6.66421 7 6.25 7C5.83579 7 5.5 6.66421 5.5 6.25C5.5 5.83579 5.83579 5.5 6.25 5.5C6.66421 5.5 7 5.83579 7 6.25ZM9.75 7C10.1642 7 10.5 6.66421 10.5 6.25C10.5 5.83579 10.1642 5.5 9.75 5.5C9.33579 5.5 9 5.83579 9 6.25C9 6.66421 9.33579 7 9.75 7Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              Android
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39=""><g data-v-41eefe39="" id="pingguo-2 1"><path data-v-41eefe39="" id="Vector" d="M11.821 8.9388C11.8035 7.16562 13.267 6.31556 13.3322 6.27312C12.5097 5.06956 11.2287 4.90506 10.7724 4.88581C9.6821 4.77556 8.64523 5.52763 8.09179 5.52763C7.5401 5.52763 6.6861 4.902 5.78179 4.91863C4.59354 4.93613 3.49761 5.60944 2.88598 6.67387C1.65136 8.8163 2.56967 11.9899 3.77323 13.7277C4.36123 14.5782 5.06254 15.5332 5.98304 15.4991C6.86942 15.4637 7.20498 14.9255 8.27642 14.9255C9.34785 14.9255 9.64929 15.4991 10.5877 15.4816C11.5415 15.4637 12.1461 14.6149 12.7302 13.7618C13.4052 12.7752 13.6835 11.8197 13.6997 11.7707C13.6787 11.7611 11.8394 11.0567 11.821 8.9388ZM10.0584 3.73563C10.547 3.14281 10.8769 2.32031 10.7868 1.5C10.0829 1.52888 9.22973 1.969 8.72485 2.56006C8.2716 3.08463 7.87523 3.922 7.98154 4.72613C8.76729 4.78737 9.56923 4.32669 10.0584 3.73563Z" fill="#86909C"></path></g></g><defs data-v-41eefe39=""></defs></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              iOS
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><rect data-v-41eefe39="" id="Rectangle 289" x="1" y="8.5" width="1.3" height="5" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 292" x="14" y="8.5" width="1.3" height="5" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 293" x="7.5" y="4.5" width="1" height="3" rx="0.5" fill="#86909C"></rect><circle data-v-41eefe39="" id="Ellipse 25" cx="8" cy="2.5" r="1" fill="#86909C"></circle><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M3 7.5C3 6.94772 3.44772 6.5 4 6.5H12C12.5523 6.5 13 6.94772 13 7.5V14.5C13 15.0523 12.5523 15.5 12 15.5H4C3.44772 15.5 3 15.0523 3 14.5V7.5ZM7 11.25C7 11.6642 6.66421 12 6.25 12C5.83579 12 5.5 11.6642 5.5 11.25C5.5 10.8358 5.83579 10.5 6.25 10.5C6.66421 10.5 7 10.8358 7 11.25ZM9.75 12C10.1642 12 10.5 11.6642 10.5 11.25C10.5 10.8358 10.1642 10.5 9.75 10.5C9.33579 10.5 9 10.8358 9 11.25C9 11.6642 9.33579 12 9.75 12Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              人工智能
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><g data-v-41eefe39="" id="kaifagongjuicon-hui 1"><path data-v-41eefe39="" id="Vector" d="M14.212 5.04986L13.497 5.76886C13.3158 5.95088 13.1005 6.09531 12.8633 6.19386C12.6261 6.29242 12.3718 6.34315 12.115 6.34315C11.8582 6.34315 11.6039 6.29242 11.3667 6.19386C11.1295 6.09531 10.9142 5.95088 10.733 5.76886C10.3664 5.39915 10.1606 4.89955 10.1606 4.37886C10.1606 3.85817 10.3664 3.35857 10.733 2.98886L11.448 2.26986C11.843 1.87286 11.579 1.40486 10.868 1.51686C10.028 1.64786 9.262 2.07586 8.709 2.72286C8.005 3.41786 7.682 4.66486 7.922 5.81786L1.927 11.8469C1.56096 12.2165 1.35562 12.7157 1.35562 13.2359C1.35562 13.7561 1.56096 14.2552 1.927 14.6249C2.10804 14.807 2.32329 14.9515 2.56038 15.0501C2.79747 15.1487 3.05172 15.1995 3.3085 15.1995C3.56528 15.1995 3.81953 15.1487 4.05662 15.0501C4.29371 14.9515 4.50896 14.807 4.69 14.6249L10.686 8.59486C11.2693 8.7189 11.8745 8.69473 12.446 8.52459C13.0176 8.35444 13.5375 8.04373 13.958 7.62086C14.5581 7.01861 14.9243 6.22244 14.991 5.37486C15.071 4.91886 14.607 4.65286 14.212 5.04986ZM3.768 13.6979C3.67659 13.7885 3.56041 13.85 3.4341 13.8747C3.30779 13.8994 3.17699 13.8861 3.05819 13.8366C2.93939 13.7871 2.8379 13.7036 2.76651 13.5965C2.69511 13.4894 2.65701 13.3636 2.657 13.2349C2.65647 13.0618 2.72462 12.8957 2.84649 12.7729C2.96836 12.6501 3.13399 12.5807 3.307 12.5799C3.487 12.5799 3.651 12.6529 3.768 12.7719C3.888 12.8889 3.96 13.0539 3.96 13.2349C3.9604 13.3209 3.94363 13.4062 3.91066 13.4857C3.87769 13.5652 3.82919 13.6373 3.768 13.6979ZM3.118 5.16786L5.377 7.43986L6.297 6.51286L4.04 4.24286L3.535 3.27086L1.92 2.11186L1 3.03986L2.151 4.66086L3.118 5.16786ZM10.672 9.98586C10.642 9.95526 10.6062 9.93095 10.5667 9.91436C10.5272 9.89776 10.4848 9.88921 10.442 9.88921C10.3992 9.88921 10.3568 9.89776 10.3173 9.91436C10.2778 9.93095 10.242 9.95526 10.212 9.98586L8.83 11.3759C8.79955 11.4062 8.7754 11.4423 8.75891 11.482C8.74243 11.5218 8.73395 11.5644 8.73395 11.6074C8.73395 11.6504 8.74243 11.693 8.75891 11.7327C8.7754 11.7724 8.79955 11.8085 8.83 11.8389L12.09 15.1169C12.2106 15.2383 12.3541 15.3348 12.5122 15.4006C12.6703 15.4663 12.8398 15.5002 13.011 15.5002C13.1822 15.5002 13.3517 15.4663 13.5098 15.4006C13.6679 15.3348 13.8114 15.2383 13.932 15.1169C14.442 14.6049 14.442 13.7769 13.932 13.2639L10.672 9.98586Z" fill="#86909C"></path></g></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              开发工具
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M1 2.5C1 1.94772 1.44772 1.5 2 1.5H14C14.5523 1.5 15 1.94772 15 2.5V14.5C15 15.0523 14.5523 15.5 14 15.5H2C1.44772 15.5 1 15.0523 1 14.5V2.5ZM3 5C3 4.72386 3.22386 4.5 3.5 4.5H12.5C12.7761 4.5 13 4.72386 13 5V5.3C13 5.57614 12.7761 5.8 12.5 5.8H3.5C3.22386 5.8 3 5.57614 3 5.3V5ZM3.5 7.5C3.22386 7.5 3 7.72386 3 8V8.3C3 8.57614 3.22386 8.8 3.5 8.8H4.5C4.77614 8.8 5 8.57614 5 8.3V8C5 7.72386 4.77614 7.5 4.5 7.5H3.5ZM7 8C7 7.72386 7.22386 7.5 7.5 7.5H8.5C8.77614 7.5 9 7.72386 9 8V8.3C9 8.57614 8.77614 8.8 8.5 8.8H7.5C7.22386 8.8 7 8.57614 7 8.3V8ZM11.5 7.5C11.2239 7.5 11 7.72386 11 8V8.3C11 8.57614 11.2239 8.8 11.5 8.8H12.5C12.7761 8.8 13 8.57614 13 8.3V8C13 7.72386 12.7761 7.5 12.5 7.5H11.5ZM3 11C3 10.7239 3.22386 10.5 3.5 10.5H7.5C7.77614 10.5 8 10.7239 8 11V11.3C8 11.5761 7.77614 11.8 7.5 11.8H3.5C3.22386 11.8 3 11.5761 3 11.3V11ZM10.5 10.5C10.2239 10.5 10 10.7239 10 11V11.3C10 11.5761 10.2239 11.8 10.5 11.8H12.5C12.7761 11.8 13 11.5761 13 11.3V11C13 10.7239 12.7761 10.5 12.5 10.5H10.5Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              代码人生
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M14.9187 7.03385C15.0999 7.26744 14.9466 7.7 14.651 7.7H6.32905V4.5H5.02905V7.7H3.6C2.16406 7.7 1 6.53594 1 5.1C1 3.66406 2.16406 2.5 3.6 2.5H14.651C14.9466 2.5 15.0999 2.93257 14.9188 3.16616C14.5064 3.69779 14.2602 4.36959 14.2602 5.10001C14.2602 5.83043 14.5064 6.50222 14.9187 7.03385Z" fill="#86909C"></path><path data-v-41eefe39="" id="Subtract_2" fill-rule="evenodd" clip-rule="evenodd" d="M1.34902 14.5008C1.0534 14.5008 0.900077 14.0682 1.08126 13.8346C1.49363 13.303 1.7398 12.6312 1.7398 11.9008C1.7398 11.1704 1.49362 10.4986 1.08125 9.96694C0.900064 9.73335 1.05339 9.30078 1.34901 9.30078H12.4C13.8359 9.30078 15 10.4648 15 11.9008C15 13.3367 13.8359 14.5008 12.4 14.5008H1.34902Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              阅读
            </span></div></div></div></div> <!----></div><div class="byte-modal__footer"><div data-v-41eefe39="" class="left">跳过</div> <div data-v-41eefe39="" class="mid" style="display: none;">上一步</div> <div data-v-41eefe39="" class="right">
      至少选择1个分类
    </div></div></div></div></div><div data-v-8bb78912="" data-transfer="true" class="upgrade-new-modal byte-modal v-transfer-dom"><div class="byte-modal__mask" style="z-index: 1004; display: none;"></div><div class="byte-modal__wrapper" style="z-index: 1004; display: none;"><div class="byte-modal__content" style="width: 311px;"><div class="byte-modal__header"><span class="byte-modal__title"></span><!----></div><div class="byte-modal__body"> <!----> <div data-v-8bb78912="" class="close-icon"><img data-v-8bb78912="" src="./iOS 编译原理与应用 - 掘金_files/8867e249c23a7c0ea596c139befc04d7.svg" alt=""></div></div><!----></div></div></div><link href="./iOS 编译原理与应用 - 掘金_files/100.b5554a0.css" rel="stylesheet" type="text/css"><div class="byte-tooltip byte-tooltip--dark" style="display: none; position: absolute; max-width: none; will-change: transform; z-index: 1005; top: 0px; left: 0px; transform: translate3d(87px, 491px, 0px);" x-placement="top">
        沉浸阅读
      <div x-arrow="" class="popper__arrow" style="left: 0px;"></div></div><link href="./iOS 编译原理与应用 - 掘金_files/155.cc4a86e.css" rel="stylesheet" type="text/css"><link href="./iOS 编译原理与应用 - 掘金_files/9.b3ecb8a.css" rel="stylesheet" type="text/css"><link href="./iOS 编译原理与应用 - 掘金_files/88.9843b4c.css" rel="stylesheet" type="text/css"></body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration></html>