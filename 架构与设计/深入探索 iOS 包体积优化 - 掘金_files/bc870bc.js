(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{1053:function(t,e,n){},1067:function(t,e,n){"use strict";var r={props:["title","pure"]},o=(n(1164),n(29)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sidebar-block",class:{pure:t.pure,shadow:!t.pure}},[t.pure?[t._t("default")]:[t.title?n("div",{staticClass:"block-title"},[t._v(t._s(t.title))]):t._e(),t._v(" "),n("div",{staticClass:"block-body"},[t._t("default")],2)]],2)}),[],!1,null,"71f2d09e",null);e.a=component.exports},1164:function(t,e,n){"use strict";n(1053)},1171:function(t,e,n){t.exports=function(){var t="undefined"!=typeof window,e="undefined"!=typeof navigator,n=t&&("ontouchstart"in window||e&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"];function i(t){var e=t.event,n=t.handler;(0,t.middleware)(e)&&n(e)}function r(t,e){var r=function(t){var e="function"==typeof t;if(!e&&"object"!=typeof t)throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:e?t:t.handler,middleware:t.middleware||function(t){return t},events:t.events||n,isActive:!(!1===t.isActive),detectIframe:!(!1===t.detectIframe)}}(e.value),o=r.handler,c=r.middleware,a=r.detectIframe;if(r.isActive){if(t["__v-click-outside"]=r.events.map((function(e){return{event:e,srcTarget:document.documentElement,handler:function(e){return function(t){var e=t.el,n=t.event,r=t.handler,o=t.middleware,c=n.path||n.composedPath&&n.composedPath();(c?c.indexOf(e)<0:!e.contains(n.target))&&i({event:n,handler:r,middleware:o})}({el:t,event:e,handler:o,middleware:c})}}})),a){var l={event:"blur",srcTarget:window,handler:function(e){return function(t){var e=t.el,n=t.event,r=t.handler,o=t.middleware;setTimeout((function(){var t=document.activeElement;t&&"IFRAME"===t.tagName&&!e.contains(t)&&i({event:n,handler:r,middleware:o})}),0)}({el:t,event:e,handler:o,middleware:c})}};t["__v-click-outside"]=[].concat(t["__v-click-outside"],[l])}t["__v-click-outside"].forEach((function(e){var n=e.event,i=e.srcTarget,r=e.handler;return setTimeout((function(){t["__v-click-outside"]&&i.addEventListener(n,r,!1)}),0)}))}}function o(t){(t["__v-click-outside"]||[]).forEach((function(t){return t.srcTarget.removeEventListener(t.event,t.handler,!1)})),delete t["__v-click-outside"]}var c=t?{bind:r,update:function(t,e){var n=e.value,i=e.oldValue;JSON.stringify(n)!==JSON.stringify(i)&&(o(t),r(t,{value:n}))},unbind:o}:{};return{install:function(t){t.directive("click-outside",c)},directive:c}}()},1240:function(t,e,n){},1405:function(t,e,n){},1406:function(t,e,n){"use strict";n(1240)},1494:function(t,e,n){},1568:function(t,e,n){"use strict";n(16),n(14),n(11),n(7),n(13);var r=n(0),o=(n(93),n(1067)),c=n(163),l=n(278);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var f={components:{SidebarBlock:o.a},props:{teaEventPage:{type:Number,default:0},list:{type:Array,default:function(){return[]}},title:{type:String,default:""},interactive:{type:Boolean,default:!1},fromPage:String},methods:{getRecoTeaContent:function(t){var e,n;if("post"===t.type)return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({event_page:l.a.ARTICLE_DETAIL_RIGHT,req_id:null==t?void 0:t.req_id,boost_type:t.extra?t.extra.boost_type:void 0,catogory_id:null==t||null===(e=t.category)||void 0===e?void 0:e.category_id,from_page:Object(c.a)(this.fromPage),from_page_type:Object(c.b)(),item_id:null==t?void 0:t.article_id,item_type:2,item_author_id:null==t||null===(n=t.author_user_info)||void 0===n?void 0:n.user_id,from_item_id:this.$route.params.id,from_item_type:2},Object(l.d)(t))},handleVisibleChange:function(t,e){var n=this;return"post"!==t.type?function(){}:function(r){r&&(Object(l.g)(r,n.$TEA,n.$route,n.teaEventPage,t,e+1),n.$TEA("item_display",n.getRecoTeaContent(t)))}},recordClick:function(t){"post"===t.type&&(localStorage.setItem("fromPage","rightRecommend"),this.$TEA("item_click",this.getRecoTeaContent(t)))}}},h=(n(1406),n(29)),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.list.length?n("sidebar-block",{staticClass:"related-entry-sidebar-block",attrs:{"st:block":"relatedEntrySidebarBlock",title:t.title}},[n("div",{staticClass:"entry-list"},t._l(t.list,(function(e,r){return n("app-link",{directives:[{name:"visible-change",rawName:"v-visible-change.once",value:t.handleVisibleChange(e,r),expression:"handleVisibleChange(entry, index)",modifiers:{once:!0}}],key:r,staticClass:"item",attrs:{to:t.$entryPublicRoute(e),blank:!0,"st:name":"link",title:e.title},nativeOn:{click:function(n){return t.recordClick(e)}}},[n("div",{staticClass:"entry-title"},[t._v(t._s(e.title))]),t._v(" "),t.interactive?n("div",{staticClass:"entry-meta-box"},[n("div",{staticClass:"entry-meta"},[t._v(t._s(e.likedCount||0)+"点赞")]),t._v(" "),n("div",{staticClass:"entry-meta"},[t._v(" · ")]),t._v(" "),n("div",{staticClass:"entry-meta"},[t._v(t._s(e.commentsCount||0)+"评论")])]):t._e()])})),1)]):t._e()}),[],!1,null,"17139de4",null);e.a=component.exports},1700:function(t,e,n){"use strict";n(1405)},1811:function(t,e,n){"use strict";n(1494)},2018:function(t,e,n){"use strict";n(11),n(69),n(14),n(52),n(65),n(37),n(24),n(25),n(7),n(48);var r=n(49),o={name:"item",props:["item"],methods:{activate:function(t){this.$emit("activate",t)},onActivate:function(t){this.activate(t)}}},c=n(29),l=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{directives:[{name:"show",rawName:"v-show",value:t.item.visible,expression:"item.visible"}],staticClass:"item",class:["d"+t.item.deep,t.item.active&&"active"]},[n("div",{staticClass:"a-container",on:{click:function(e){return e.preventDefault(),t.activate(t.item)}}},[n("a",{staticClass:"catalog-aTag",attrs:{href:t.item.hash,title:t.item.title}},[t._v("\n      "+t._s(t.item.title)+"\n    ")])]),t._v(" "),t.item.childList.length?n("ul",{staticClass:"sub-list"},t._l(t.item.childList,(function(e,i){return n("item",{key:i,attrs:{item:e},on:{activate:t.onActivate}})})),1):t._e()])}),[],!1,null,null,null).exports;function d(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function h(){return{catalog:v(),reacticve:!0,marginTop:0,scrollTop:0}}function v(t){return Object.assign({deep:0,level:0,parent:null,active:!1,visible:!0,childList:[]},t)}function m(t,e){if(y(e),t){var n=function(t){var e=t;for(;e&&!e.visible;)e=e.parent;return e}(t);n&&(n.active=!0)}}function y(t){t.active=!1,t.childList.forEach(y)}function _(t,e){if(e.hash===t)return e;var n,r=d(e.childList);try{for(r.s();!(n=r.n()).done;){var o=_(t,n.value);if(o)return o}}catch(t){r.e(t)}finally{r.f()}}var O={components:{Item:l},props:["title","visible"],data:function(){return h()},methods:{generate:function(t){!this.$isServer&&t&&(this.node=t,this.catalog=function(t){var e=[].slice.call(t.querySelectorAll("h1,h2,h3,h4,h5,h6")),n=v();return e.reduce((function(t,e){var title=e.textContent.replace(/\n/g," ").trim();if(title){for(var n=v({title:title||"<未识别标题>",level:+e.nodeName.slice(1),hash:"#"+(e.dataset.id||""),childList:[]}),r=t;r&&r.level>=n.level;)r=r.parent;return n.parent=r,n.deep=r.deep+1,n.visible=n.deep<=3,r.childList.push(n),n}return t}),n),n}(t),this.activeItemByCurrentPosition())},reset:function(){Object.assign(this,h())},activeItemByCurrentPosition:function(){var t=this;if(this.node)for(var e,n=(e=this.node,[].slice.call(e.querySelectorAll("h1,h2,h3,h4,h5,h6"))),r=n.map((function(t){return t.getBoundingClientRect().top})),i=0;i<r.length;i++){var o=r[i],c=r[i+1];if(o<100&&(!c||c>100)){var l=_("#".concat(n[i].dataset.id),this.catalog);if(l.visible){m(l,this.catalog),this.$nextTick((function(){return t.scrollCatalogByCurrentPosition()}));break}}}},scrollCatalogByCurrentPosition:function(){var body=this.$refs.body,t=this.$refs.list,e=t.querySelector(".item.active");if(e){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),o=Math.max(0,body.clientHeight);if(o&&o<r.height){var c=n.top-r.top;this.scrollTop=Math.min(0,o/2-c),body.scrollTo(0,-this.scrollTop)}else this.scrollTop=0}else this.scrollTop=0},onItemActivate:function(t){window.location.hash===t.hash?this.scrollViewByCurrentHash():window.location.hash=t.hash},scrollViewByCurrentHash:function(){Object(r.s)({parent:this.node,offset:-80,getAnchorSelector:function(t){return'[data-id="'.concat(t.slice(1),'"]')}})}},mounted:function(){var t=this;this.removeHashEventListener=Object(r.k)(window,"hashchange",(function(){t.$nextTick((function(){return t.scrollViewByCurrentHash()}))})),this.removeScrollEventListener=Object(r.m)(window,(function(){t.activeItemByCurrentPosition()}),300)},watch:{"catalog.childList":function(t){t&&t.length?this.$emit("update:visible",!0):this.$emit("update:visible",!1)}},beforeDestroy:function(){this.removeHashEventListener(),this.removeScrollEventListener()}},C=(n(1811),Object(c.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{directives:[{name:"show",rawName:"v-show",value:t.catalog.childList.length,expression:"catalog.childList.length"}],staticClass:"article-catalog"},[t.title?n("div",{staticClass:"catalog-title"},[t._v(t._s(t.title))]):t._e(),t._v(" "),n("div",{ref:"body",staticClass:"catalog-body"},[n("ul",{ref:"list",staticClass:"catalog-list",style:{marginTop:t.marginTop+"px"}},t._l(t.catalog.childList,(function(e,i){return n("item",{key:i,attrs:{item:e},on:{activate:t.onItemActivate}})})),1)])])}),[],!1,null,"21dfbf50",null));e.a=C.exports},2023:function(t,e,n){"use strict";var r=n(1567),o=n(1067),c={components:{WechatBanner:r.a,SidebarBlock:o.a},props:["closeable"],data:function(){return{visible:!1}},methods:{close:function(){window.localStorage.setItem("HIDE_WECHAT_SIDEBAR_BLOCK",!0),this.visible=!1}},mounted:function(){this.closeable?this.visible=!window.localStorage.getItem("HIDE_WECHAT_SIDEBAR_BLOCK"):this.visible=!0}},l=(n(1700),n(29)),component=Object(l.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return this.visible?e("sidebar-block",{staticClass:"wechat-sidebar-block",attrs:{pure:!0}},[e("wechat-banner",{attrs:{square:!0}}),this._v(" "),this.closeable?e("div",{staticClass:"close-btn ion-close-round",attrs:{title:"关闭"},on:{click:this.close}}):this._e()],1):this._e()}),[],!1,null,"375ef892",null);e.a=component.exports},2799:function(t,e,n){},2800:function(t,e,n){},2801:function(t,e,n){},2802:function(t,e,n){},2803:function(t,e,n){},2804:function(t,e,n){},4686:function(t,e,n){t.exports=n.p+"img/sign-in.d6891e5.png"},4687:function(t,e,n){n(16),n(14),n(11),n(7),n(13);var r=n(42),o=n(44);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,_=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){r(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,h],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},_),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.00001 2C1.63182 2 1.33334 2.29848 1.33334 2.66667C1.33334 3.03486 1.63182 3.33333 2.00001 3.33333H3.33334C3.70153 3.33333 4.00001 3.03486 4.00001 2.66667C4.00001 2.29848 3.70153 2 3.33334 2H2.00001ZM6.00034 2C5.63215 2 5.33367 2.29848 5.33367 2.66667C5.33367 3.03486 5.63215 3.33333 6.00034 3.33333H14.0003C14.3685 3.33333 14.667 3.03486 14.667 2.66667C14.667 2.29848 14.3685 2 14.0003 2H6.00034ZM6.00034 7.33333C5.63215 7.33333 5.33367 7.63181 5.33367 8C5.33367 8.36819 5.63215 8.66667 6.00034 8.66667H14.0003C14.3685 8.66667 14.667 8.36819 14.667 8C14.667 7.63181 14.3685 7.33333 14.0003 7.33333H6.00034ZM1.33367 8C1.33367 7.63181 1.63215 7.33333 2.00034 7.33333H3.33367C3.70186 7.33333 4.00034 7.63181 4.00034 8C4.00034 8.36819 3.70186 8.66667 3.33367 8.66667H2.00034C1.63215 8.66667 1.33367 8.36819 1.33367 8ZM1.33367 13.3333C1.33367 12.9651 1.63215 12.6667 2.00034 12.6667H3.33367C3.70186 12.6667 4.00034 12.9651 4.00034 13.3333C4.00034 13.7015 3.70186 14 3.33367 14H2.00034C1.63215 14 1.33367 13.7015 1.33367 13.3333ZM6.00034 12.6667C5.63215 12.6667 5.33367 12.9651 5.33367 13.3333C5.33367 13.7015 5.63215 14 6.00034 14H14.0003C14.3685 14 14.667 13.7015 14.667 13.3333C14.667 12.9651 14.3685 12.6667 14.0003 12.6667H6.00034Z"}})]))}}},4688:function(t,e,n){"use strict";n(2799)},4689:function(t,e,n){"use strict";n(2800)},4690:function(t,e,n){n(16),n(14),n(11),n(7),n(13);var r=n(42),o=n(44);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,_=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){r(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:["zan",f,h],style:[style,v],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"25",height:"26",viewBox:"0 0 25 26"},y)},_),d.concat([n("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(0 .57)"}},[n("ellipse",{attrs:{cx:"12.5",cy:"12.57",fill:"#E1EFFF",rx:"12.5",ry:"12.57"}}),n("path",{attrs:{fill:"#7BB9FF",d:"M8.596 11.238V19H7.033C6.463 19 6 18.465 6 17.807v-5.282c0-.685.483-1.287 1.033-1.287h1.563zm4.275-4.156A1.284 1.284 0 0 1 14.156 6c.885.016 1.412.722 1.595 1.07.334.638.343 1.687.114 2.361-.207.61-.687 1.412-.687 1.412h3.596c.38 0 .733.178.969.488.239.317.318.728.21 1.102l-1.628 5.645a1.245 1.245 0 0 1-1.192.922h-7.068v-7.889c1.624-.336 2.623-2.866 2.806-4.029z"}})])]))}}},4691:function(t,e,n){n(16),n(14),n(11),n(7),n(13);var r=n(42),o=n(44);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,_=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){r(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:["icon stat-view-icon",f,h],style:[style,v],attrs:Object.assign({width:"25",height:"25",viewBox:"0 0 25 25"},y)},_),d.concat([n("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[n("circle",{attrs:{cx:"12.5",cy:"12.5",r:"12.5",fill:"#E1EFFF"}}),n("path",{attrs:{fill:"#7BB9FF",d:"M4 12.5S6.917 7 12.75 7s8.75 5.5 8.75 5.5-2.917 5.5-8.75 5.5S4 12.5 4 12.5zm8.75 2.292c1.208 0 2.188-1.026 2.188-2.292 0-1.266-.98-2.292-2.188-2.292-1.208 0-2.188 1.026-2.188 2.292 0 1.266.98 2.292 2.188 2.292z"}})])]))}}},4692:function(t,e,n){"use strict";n(2801)},4693:function(t,e,n){"use strict";n(2802)},4694:function(t,e,n){"use strict";n(2803)},4695:function(t,e,n){"use strict";n(2804)},4809:function(t,e,n){"use strict";n.r(e);n(16),n(14),n(11),n(13),n(7),n(23);var r=n(5),o=(n(37),n(0)),c=n(6),l=n(88),d=n(110),f=n(118),content=n(889),h=n(1171),v=n(4687),m=n.n(v),y=n(49),_={name:"NextColumnArticle",directives:{"click-outside":h.directive},components:{NextArticleList:function(){return n.e(208).then(n.bind(null,4939))},ListIcon:m.a},props:{list:{type:Array,default:function(){return[]}},title:{type:String,default:""},interactive:{type:Boolean,default:!1},fromPage:String,articleData:{type:Object,default:null},listTitle:{type:String,default:""},sticky:{type:Boolean,default:!1}},emits:["should-fetch-more"],data:function(){return{articleListPosition:"align-top",showColumnList:!1}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.e)();case 2:n=e.sent,(r=new n((function(e){e.some((function(t){return t.isIntersecting}))&&(t.$TEA("next_display"),r.disconnect())}))).observe(t.$el),t.disconnetObserver=function(){return r.disconnect()};case 6:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){this.disconnetObserver&&this.disconnetObserver()},methods:{handleShowColumnList:function(t){(this.showColumnList=!this.showColumnList,this.showColumnList)&&(t.target.getBoundingClientRect().top<300?this.articleListPosition="align-bottom":this.articleListPosition="align-top")},recordNextClick:function(){this.$TEA("next_click",{click_from:1})},handleNextArticleUrl:function(){return"/post/"+this.articleData.article_id},handleOutsideClick:function(){this.showColumnList=!1}}},O=(n(4688),n(29)),C=Object(O.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.articleData?n("nav",{ref:"containerRef",staticClass:"next-article"},[n("div",{staticClass:"next-article-header"},[t.title?n("div",{staticClass:"next-article-title"},[t._v(t._s(t.title))]):t._e(),t._v(" "),n("ListIcon",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.handleOutsideClick,expression:"handleOutsideClick"}],staticClass:"list-icon",class:{active:t.showColumnList},on:{click:t.handleShowColumnList}})],1),t._v(" "),n("hr",{staticClass:"next-article-hr"}),t._v(" "),n("div",{staticClass:"article-content"},[n("a",{staticClass:"article",attrs:{href:t.handleNextArticleUrl(),title:t.articleData.title,target:"_blank"},on:{click:function(e){return t.recordNextClick()}}},[t._v("\n      "+t._s(t.articleData.title)+"\n    ")])]),t._v(" "),t.showColumnList?n("NextArticleList",{staticClass:"next-article-list",class:t.articleListPosition,attrs:{list:t.list,title:t.listTitle},on:{"should-fetch-more":function(e){return t.$emit("should-fetch-more")}}}):t._e()],1):t._e()}),[],!1,null,"54ff0e3f",null).exports,w=n(1568),j=n(8),k=n(39),S=n(9),x=Object(S.d)({name:"SidebarAdEntry",props:["entry","category"],setup:function(t){var e=Object(S.a)((function(){var e;return(null===(e=t.entry)||void 0===e?void 0:e.position)===j.PositionType.SideBarFixed}));return{recordBannerClick:function(){var n;Object(k.d)(e.value?"ad_web_article_banner_top_click":"ad_web_article_banner_click",{ad_url:null===(n=t.entry)||void 0===n?void 0:n.url})},handleVisibleChange:function(n){var r;n&&Object(k.d)(e.value?"ad_web_article_banner_top_show":"ad_web_article_banner_show",{ad_url:null===(r=t.entry)||void 0===r?void 0:r.url})}}}}),E=(n(4689),Object(O.a)(x,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("a",{directives:[{name:"visible-change",rawName:"v-visible-change.once",value:t.handleVisibleChange,expression:"handleVisibleChange",modifiers:{once:!0}}],staticClass:"sidebar-entry",style:{backgroundImage:"url("+t.entry.imageUrl+")"},attrs:{href:t.entry.url,target:"_blank"},on:{click:function(e){return t.recordBannerClick(t.entry)}}})}),[],!1,null,"25f2c691",null).exports),P=n(2023),A=n(3),L=n(1),B=n(109),T=n(10),D=n(178),I=n(1067),R=n(76),$=n(1035),H=n(873),M=n(863),N=n(4690),F=n.n(N),V=n(4691),z=n.n(V);function U(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Z(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?U(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):U(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var G=T.default.extend({components:{StatZan:F.a,StatView:z.a,Avatar:D.a,SidebarBlock:I.a,ImButton:$.a,Button:H.a},props:{author:{type:Object,required:!0},userAnnuals:{type:Array,default:function(){return[]}},enterMethod:{type:String,default:""}},data:function(){return{isFollowing:!1,followLock:Object(M.a)()}},computed:Z(Z({},Object(l.mapGetters)({currentUser:A.USER})),{},{self:function(){var t,e;return(null===(t=this.author)||void 0===t?void 0:t.user_id)===(null===(e=this.currentUser)||void 0===e?void 0:e.id)},availableUserAnnuals:function(){return this.userAnnuals.filter((function(t){return t.status===R.a.Done&&t.is_select_annual&&t.prize_title&&t.prize_icon}))},position:function(){return this.$userPosition(this.author)},isCoEditor:function(){return"admin"===this.author.role||"editor"===this.author.role},beLikedCount:function(){return this.author.beLikedCount},beReadCount:function(){return this.author.beReadCount},rank:function(){return this.author.select_annual_rank},url:function(){var t="https://juejin.cn/2018/";return this.author&&this.author.id?t+this.author.id:t},visibleBanner:function(){return Date.now()<new Date("2019-01-25T16:00:00.000Z")},followed:function(){return this.author&&this.author.followed}}),methods:{toggleFollow:function(){var t=this;this.isFollowing=!0,this.followLock.do((function(){return t.$ensureAuthorized().then((function(){return t.$store.dispatch(A.TOGGLE_FOLLOW_USER,{user:t.author,enterMethod:t.enterMethod}).catch((function(e){t.$error(e)}))})).catch((function(t){return console.warn("follow failed err:",t)})).finally((function(){return t.isFollowing=!1}))}))}}}),W=(n(4692),n(4693),Object(O.a)(G,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("sidebar-block",{staticClass:"author-block",attrs:{pure:!0}},[n("app-link",{staticClass:"user-item item",attrs:{to:t.$userRoute(t.author),blank:!0}},[n("avatar",{staticClass:"avatar",attrs:{user:t.author,size:100}}),t._v(" "),n("div",{staticClass:"info-box"},[n("username",{attrs:{user:t.author}}),t._v(" "),t.position?n("div",{staticClass:"position",attrs:{title:t.position}},[t._v("\n        "+t._s(t.position)+"\n      ")]):t._e()],1)],1),t._v(" "),t.self?t._e():n("div",{staticClass:"operate-btn"},[n("Button",{staticClass:"follow-btn",attrs:{"st:name":"followBtn",attention:!0,"custom-attention-text":"关注","cancel-attention-text":"已关注",cancel:t.followed,loading:t.isFollowing,size:"large","show-icon":!1},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleFollow(e)}}}),t._v(" "),n("ImButton",{staticClass:"im-btn",attrs:{"tea-type":"article_details","user-id":t.author.id}})],1),t._v(" "),n("div",{staticClass:"cut-off"}),t._v(" "),t._l(t.availableUserAnnuals,(function(e){return n("div",{key:e.annual_id,staticClass:"stat-item item"},[n("img",{staticClass:"icon annual-icon",attrs:{src:e.prize_icon}}),t._v(" "),n("span",{staticClass:"content"},[t._v(t._s(e.prize_title))])])})),t._v(" "),t.beLikedCount?n("div",{staticClass:"stat-item item"},[n("StatZan"),t._v(" "),n("span",{staticClass:"content"},[t._v("\n      获得点赞\n      "),n("span",{staticClass:"count"},[t._v(" "+t._s(t._f("thousands")(t.beLikedCount)))])])],1):t._e(),t._v(" "),t.beReadCount?n("div",{staticClass:"stat-item item"},[n("StatView"),t._v(" "),n("span",{staticClass:"content"},[t._v("\n      文章被阅读\n      "),n("span",{staticClass:"count"},[t._v(" "+t._s(t._f("thousands")(t.beReadCount)))])])],1):t._e(),t._v(" "),t.author&&t.visibleBanner?n("a",{staticClass:"banner",attrs:{href:t.url,target:"_blank"}}):t._e()],2)}),[],!1,null,"bdf6e7fa",null).exports),J={components:{ArticleCatalog:n(2018).a,SidebarBlock:I.a},data:function(){return{catalogVisible:!1}},methods:{generateCatalog:function(t){this.$refs.catalog.generate(t)}}},K=Object(O.a)(J,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("sidebar-block",{directives:[{name:"show",rawName:"v-show",value:t.catalogVisible,expression:"catalogVisible"}],staticClass:"catalog-block",attrs:{pure:!0}},[n("article-catalog",{ref:"catalog",attrs:{title:"目录",visible:t.catalogVisible},on:{"update:visible":function(e){t.catalogVisible=e}}})],1)}),[],!1,null,null,null).exports;function Y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Q(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Y(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var X=Object(c.b)({components:{WechatSidebarBlock:P.a,RelatedEntrySidebarBlock:w.a,AuthorBlock:W,CatalogBlock:K,SidebarAdEntry:E,NextColumnArticle:C},props:["state","logined","onTop","fromPage","immerse","catalogContentRef"],setup:function(t){var e=Object(c.n)();return Object(c.j)((function(){return Object(c.y)((function(){return t.catalogContentRef}),(function(t){var n;t&&(null===(n=e.value)||void 0===n||n.generateCatalog(t))}),{immediate:!0})})),{catalogBlockRef:e}},data:function(){return{isMobile:!0,sticky:!1,visibleAdEntry:!0,nextArticle:null,articleList:[],listTitle:"",columnId:"",cursor:"0",hasMore:!0,onShouldFetchMore:void 0,needTask:!1}},computed:Q(Q({},Object(l.mapGetters)({user:A.USER})),{},{categoryId:function(){return(this.state.entry.category||{}).id},category:function(){var t=(this.state.entry.category||{}).name;return t},userLevel:function(){return(this.state.entry.user||{}).level},isCatalogExpand:function(){return!(this.nextArticle&&!this.immerse)}}),watch:{immerse:function(){var t=this;setTimeout((function(){t.handleScrollListener()}))},"state.relatedEntryList":function(){var t=this;setTimeout((function(){t.handleScrollListener()}))}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.initScrollListener(),t.fetchSidebarAdEntry(),t.fetchNextArticle(t.state.entry.article_id),t.onShouldFetchMore=Object(B.b)((function(){return t.fetchColumnArticles()}),1e3),e.next=6,d.a.GetTodayStatus();case 6:n=e.sent,t.needTask=n.data.lt_task_exist;case 8:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){this.removeScrollListener&&this.removeScrollListener(),this.disconnetObserver&&this.disconnetObserver.disconnect()},methods:{initScrollListener:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.removeScrollListener=Object(y.m)(window,t.handleScrollListener.bind(t)),e.next=3,Object(y.e)();case 3:n=new IntersectionObserver((function(e){e.some((function(a){return a.isIntersecting}))&&(t.handleScrollListener(),n.disconnect())})),(r=t.$refs.stickyBlockBox)&&n.observe(r),t.disconnetObserver=n;case 7:case"end":return e.stop()}}),e)})))()},handleScrollListener:function(){var t=this.$refs.stickyBlockBox.previousElementSibling;if(t){var rect=t.getBoundingClientRect();this.sticky=rect.bottom<(this.onTop?0:60)}else this.sticky=!0},fetchSidebarAdEntry:function(){if(this.isMobile=document.body.clientWidth<1140,!this.user&&!this.isMobile&&this.visibleAdEntry){var t=this.state.actionType.FETCH_SIDEBAR_ADENTRY;this.$store.dispatch(t,this.category)}},fetchNextArticle:function(t){var e=this;return Object(L.e)({url:"/content_api/v1/article/next_column_article",method:"post",body:{article_id:t}}).then((function(t){var n,r=t.data,data=void 0===r?{}:r;if(e.nextArticle=null===(n=data.article_info)||void 0===n?void 0:n.article_info,data.column_id&&"0"!==data.column_id)return e.columnId=data.column_id,Promise.allSettled([e.fetchColumnArticles(),Object(f.d)(data.column_id).then((function(t){var data=t.data;e.listTitle=data.column_version.title}))])}))},fetchColumnArticles:function(){var t=this;if(this.columnId&&"0"!==this.columnId&&("0"===this.cursor||this.hasMore))return Object(content.b)({column_id:this.columnId,cursor:this.cursor,limit:20,sort:0}).then((function(e){var n=e.data,data=void 0===n?[]:n,cursor=e.cursor,r=e.has_more;t.articleList=(t.articleList||[]).concat(data),t.cursor=cursor,t.hasMore=r}))},signInRoute:function(){return{name:"signin",query:{from:"item"}}},handleVisibleChange:function(t){t&&Object(k.d)("item_sign_in_seven_days_visit")},onSingnClick:function(){Object(k.d)("item_sign_in_seven_days_click")}}}),tt=(n(4694),n(4695),Object(O.a)(X,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"sidebar",class:{top:t.onTop,sticky:t.sticky},attrs:{"st:block":"sidebar"}},[t.immerse?t._e():[r("AuthorBlock",{attrs:{"enter-method":"item_detail_author_card",author:t.state.author,"user-annuals":t.state.userAnnuals}}),t._v(" "),t.state.adEntryList&&t.state.adEntryList.length>0&&t.visibleAdEntry?r("ul",{staticClass:"sidebar-bd-entry"},t._l(t.state.adEntryList,(function(e,n){return r("li",{key:n},[r("sidebar-ad-entry",{attrs:{entry:e,category:t.category}})],1)})),0):t._e(),t._v(" "),r("app-link",{attrs:{to:t.signInRoute()}},[t.needTask?r("img",{directives:[{name:"visible-change",rawName:"v-visible-change.once",value:t.handleVisibleChange,expression:"handleVisibleChange",modifiers:{once:!0}}],staticClass:"banner",attrs:{src:n(4686),alt:"限时领掘金会员"},on:{click:t.onSingnClick}}):t._e()]),t._v(" "),t.logined?r("wechat-sidebar-block",{attrs:{closeable:!0}}):t._e(),t._v(" "),r("RelatedEntrySidebarBlock",{attrs:{list:t.state.relatedEntryList,"from-page":t.fromPage,interactive:"",title:"相关文章","tea-event-page":5}})],t._v(" "),r("div",{ref:"stickyBlockBox",staticClass:"sticky-block-box"},[r("catalog-block",{ref:"catalogBlockRef",staticClass:"catalog-block",class:{isExpand:t.isCatalogExpand}}),t._v(" "),t.nextArticle?r("NextColumnArticle",{directives:[{name:"show",rawName:"v-show",value:!t.immerse,expression:"!immerse"}],attrs:{"article-data":t.nextArticle,"from-page":t.fromPage,list:t.articleList,"list-title":t.listTitle,interactive:"",title:"下一篇"},on:{"should-fetch-more":t.onShouldFetchMore}}):t._e()],1)],2)}),[],!1,null,"65597ac0",null));e.default=tt.exports}}]);