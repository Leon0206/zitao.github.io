<!DOCTYPE html>
<!-- saved from url=(0042)https://juejin.cn/post/7087517164046909448 -->
<html lang="zh" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22zh%22%7D%7D"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>写点 Swift: 为什么你需要使用泛型而不是 protocol - 掘金</title><meta data-n-head="ssr" name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover"><meta data-n-head="ssr" name="apple-itunes-app" content="app-id=987739104"><meta data-n-head="ssr" name="theme-color" content="#ffffff"><meta data-n-head="ssr" name="msapplication-TileColor" content="#da532c"><meta data-n-head="ssr" vmid="description" name="description" content="在 Swift 中，在没有类型抹除需求的前提下使用泛型会比直接使用 protocol 有更好的运行时性能表现。"><meta data-n-head="ssr" vmid="keywords" name="keywords" content="iOS"><link data-n-head="ssr" rel="preconnect" href="https://unpkg.byted-static.com/" crossorigin="anonymous"><link data-n-head="ssr" rel="preconnect" href="https://lf3-cdn-tos.bytescm.com/" crossorigin="anonymous"><link data-n-head="ssr" rel="preconnect" href="https://mcs.snssdk.com/" crossorigin="anonymous"><link data-n-head="ssr" rel="preconnect" href="https://i.snssdk.com/" crossorigin="anonymous"><link data-n-head="ssr" rel="dns-prefetch" href="https://lf3-short.ibytedapm.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://lf3-cdn-tos.bytescm.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://api.juejin.cn/"><link data-n-head="ssr" rel="dns-prefetch" href="https://lf-cdn-tos.bytescm.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://unpkg.byted-static.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p1-juejin.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p3-juejin.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p6-juejin.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p9-juejin.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p1-jj.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p2-jj.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p6-jj.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p9-jj.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://mcs.snssdk.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://i.snssdk.com/"><link data-n-head="ssr" rel="apple-touch-icon" sizes="180x180" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/apple-touch-icon.png"><link data-n-head="ssr" rel="icon" type="image/png" sizes="32x32" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/favicon-32x32.png"><link data-n-head="ssr" rel="icon" type="image/png" sizes="16x16" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/favicon-16x16.png"><link data-n-head="ssr" rel="mask-icon" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/safari-pinned-tab.svg" color="#1E80FF"><link data-n-head="ssr" rel="manifest" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/site.webmanifest"><link data-n-head="ssr" rel="search" title="掘金" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/search.xml" type="application/opensearchdescription+xml"><link data-n-head="ssr" rel="stylesheet" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/bytedesign.min.css"><link data-n-head="ssr" rel="canonical" href="https://juejin.cn/post/7087517164046909448"><script data-n-head="ssr" type="text/javascript" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/acrawler.js"></script><script data-n-head="ssr" vmid="slardar" type="text/javascript" crossorigin="anonymous">;(function (w, d, u, b, n, pc, ga, ae, po, s, p, e, t, pp) {pc = 'precollect';ga = 'getAttribute';ae = 'addEventListener';po = 'PerformanceObserver';s = function (m) {p = [].slice.call(arguments);p.push(Date.now(), location.href);(m == pc ? s.p.a : s.q).push(p)};s.q = [];s.p = { a: [] };w[n] = s;e = document.createElement('script');e.src = u + '?bid=' + b + '&globalName=' + n;e.crossOrigin = u.indexOf('sdk-web') > 0 ? 'anonymous' : 'use-credentials';d.getElementsByTagName('head')[0].appendChild(e);if (ae in w) {s.pcErr = function (e) {e = e || w.event;t = e.target || e.srcElement;if (t instanceof Element || t instanceof HTMLElement) {if (t[ga]('integrity')) {w[n](pc, 'sri', t[ga]('href') || t[ga]('src'))} else {w[n](pc, 'st', { tagName: t.tagName, url: t[ga]('href') || t[ga]('src') })}} else {w[n](pc, 'err', e.error || e.message)}};s.pcRej = function (e) {e = e || w.event;w[n](pc, 'err', e.reason || (e.detail && e.detail.reason))};w[ae]('error', s.pcErr, true);w[ae]('unhandledrejection', s.pcRej, true);};if('PerformanceLongTaskTiming' in w) {pp = s.pp = { entries: [] };pp.observer = new PerformanceObserver(function (l) {pp.entries = pp.entries.concat(l.getEntries())});pp.observer.observe({ entryTypes: ['longtask', 'largest-contentful-paint','layout-shift'] })}})(window,document,'https://lf3-short.ibytedapm.com/slardar/fe/sdk-web/browser.cn.js','2608','SlardarWeb')</script><script src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/browser.cn.js" crossorigin="anonymous"></script><script data-n-head="ssr" type="text/javascript" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/imageReport.js"></script><script data-n-head="ssr" type="application/ld+json">[{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://juejin.cn/post/7087517164046909448"},"headline":"写点 Swift: 为什么你需要使用泛型而不是 protocol","description":"在 Swift 中，在没有类型抹除需求的前提下使用泛型会比直接使用 protocol 有更好的运行时性能表现。","image":[],"author":{"@type":"Organization","name":"Limchihi"},"publisher":{"@type":"Organization","name":"掘金","logo":{"@type":"ImageObject","url":"//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/e08da34488b114bd4c665ba2fa520a31.svg"}},"datePublished":"2022年04月17日","dateModified":"2022年04月18日"},{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","name":"稀土掘金","position":1,"item":"https://juejin.cn"},{"@type":"ListItem","name":"iOS","position":2,"item":"https://juejin.cn/ios"},{"@type":"ListItem","name":"文章","position":3}]}]</script><link rel="preload" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/6ccc1bf.js" as="script"><link rel="preload" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/83d184c.js" as="script"><link rel="preload" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/6a0af43.js" as="script"><link rel="preload" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/app.c95707c.css" as="style"><link rel="preload" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/6e787e2.js" as="script"><link rel="preload" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/default.c3d25dd.css" as="style"><link rel="preload" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/c68ae6a.js" as="script"><link rel="preload" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/52.39cb9d6.css" as="style"><link rel="preload" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/607e9aa.js" as="script"><link rel="preload" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/197.8de3951.css" as="style"><link rel="preload" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/fe8610f.js" as="script"><link rel="preload" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/198.adcadde.css" as="style"><link rel="preload" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/37aab1f.js" as="script"><link rel="stylesheet" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/app.c95707c.css"><link rel="stylesheet" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/default.c3d25dd.css"><link rel="stylesheet" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/52.39cb9d6.css"><link rel="stylesheet" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/197.8de3951.css"><link rel="stylesheet" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/198.adcadde.css">
  <script charset="utf-8" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/3f2c049.js"></script><script charset="utf-8" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/e5d3ec2.js"></script><script charset="utf-8" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/41b8609.js"></script><link rel="preload" as="style" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/4.4ebc7e8.css"><script charset="utf-8" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/929f319.js"></script><link rel="preload" as="style" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/139.9ccface.css"><script charset="utf-8" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/45c0ab1.js"></script><link rel="preload" as="style" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/181.1b801b1.css"><script charset="utf-8" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/37ac484.js"></script><link rel="preload" as="style" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/192.1dc0908.css"><script charset="utf-8" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/7745e43.js"></script><script charset="utf-8" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/452761f.js"></script><link rel="preload" as="style" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/158.cb7fed2.css"><script charset="utf-8" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/a217112.js"></script><script charset="utf-8" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/228a585.js"></script><script charset="utf-8" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/16a9736.js"></script><script charset="utf-8" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/7183dda.js"></script><script charset="utf-8" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/e0132cd.js"></script><script charset="utf-8" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/fea69cf.js"></script><style type="text/css">.code-editor-container{display:block;position:relative;overflow:hidden;box-sizing:border-box;}iframe.code-editor-frame{width:100%;height:100%;border:none;border-radius:8px;box-sizing:border-box;border:0.5px solid rgba(128,128,128,0.4);}</style><style type="text/css">.medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}</style><script src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/common-monitors.1.5.1.js" crossorigin="anonymous"></script><link rel="preload" as="style" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/100.b5554a0.css"><script charset="utf-8" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/c51d9f0.js"></script><link rel="preload" as="style" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/155.cc4a86e.css"><script charset="utf-8" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/385b17a.js"></script><link rel="preload" as="style" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/9.b3ecb8a.css"><script charset="utf-8" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/5a9f17f.js"></script><link rel="preload" as="style" href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/88.9843b4c.css"><script charset="utf-8" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/9ba0270.js"></script></head>
  <body data-new-gr-c-s-check-loaded="14.1098.0" data-gr-ext-installed="" class="">
    <div id="__nuxt"><div id="__layout"><div id="juejin"><!----> <div class="view-container" data-v-4b9f9746="" data-v-1c9ebbff=""><div class="main-header-box" data-v-4b9f9746=""><header data-fetch-key="0" class="main-header main-header" data-v-ec958a82="" data-v-4b9f9746=""><div class="container" data-v-ec958a82=""><a href="https://juejin.cn/" class="logo" data-v-ec958a82=""><img src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/e08da34488b114bd4c665ba2fa520a31.svg" alt="稀土掘金" class="logo-img" data-v-ec958a82=""> <img src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/6c61ae65d1c41ae8221a670fa32d05aa.svg" alt="稀土掘金" class="mobile" data-v-ec958a82=""></a> <!----> <!----> <nav role="navigation" class="main-nav" data-v-ec958a82=""><ul class="nav-list" data-v-ec958a82=""><!----> <li class="main-nav-list" data-v-ec958a82=""><div class="phone-show-menu isResourceVisible" data-v-ec958a82=""><span data-v-ec958a82="">首页</span> <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="unfold16-icon" data-v-ec958a82=""><path d="M2.45025 4.82431C2.17422 4.49957 2.40501 4.00049 2.83122 4.00049H9.16878C9.59498 4.00049 9.82578 4.49957 9.54975 4.82431L6.38097 8.55229C6.1813 8.78719 5.8187 8.78719 5.61903 8.55229L2.45025 4.82431Z" data-v-ec958a82=""></path></svg></div> <ul class="phone-hide isResourceVisible" data-v-ec958a82=""><li class="nav-item link-item route-active" data-v-ec958a82=""><a href="https://juejin.cn/" data-v-ec958a82="">首页</a></li> <li class="nav-item link-item activities" data-v-ec958a82=""><a href="https://juejin.cn/pins" data-v-ec958a82=""><span class="text" data-v-ec958a82="">
                  沸点
                  </span></a></li> <li class="nav-item link-item book" data-v-ec958a82=""><a href="https://juejin.cn/course" data-v-ec958a82="">
                课程
                </a></li> <li class="nav-item link-item" data-v-ec958a82=""><a href="https://juejin.cn/live" data-v-ec958a82="">直播</a></li> <li class="nav-item link-item" data-v-ec958a82=""><a href="https://juejin.cn/events/all" data-v-ec958a82="">活动</a></li> <li class="nav-item link-item" data-v-ec958a82=""><a href="https://juejin.cn/challenge" data-v-ec958a82="">
                竞赛
                </a></li> <nav class="nav-item link-item" data-v-ec958a82=""><a href="https://detail.youzan.com/show/goods/newest?kdt_id=104340304" target="_blank" rel="nofollow noopener noreferrer" class="nav-item link-item no-border" data-v-ec958a82=""><span data-v-ec958a82="">商城</span></a> <!----></nav> <nav class="nav-item link-item download-icon isResourceVisible" data-v-ec958a82=""><a href="https://juejin.cn/app?utm_source=jj_nav" target="_blank" class="download-app no-border" data-v-ec958a82="">
                APP
              </a> <span data-v-ec958a82="" class="tablead">邀请有礼</span></nav> <nav class="nav-item link-item extension-icon" data-v-ec958a82=""><a href="https://juejin.cn/extension?utm_source=jj_nav" target="_blank" rel="nofollow noopener noreferrer" class="broswer-extension no-border isResourceVisible" data-v-ec958a82=""><span data-v-ec958a82="">插件</span></a></nav> <li tag="li" class="nav-item link-item" data-v-ec958a82=""><a target="_blank" href="https://juejin.cn/vip?utm_source=web_nav" class="activity no-hover special-activity" data-v-ec958a82=""><img data-v-248050e4="" data-v-ec958a82="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/7482b3ad2cd14edda31f05399c2ae759_tplv-k3u1fbpfcp-no-mark_288_288_288_0.awebp" alt="image" class="lazy" loading="lazy" style="max-width: 115px; vertical-align: middle;"></a></li></ul></li> <ul class="right-side-nav" data-v-ec958a82=""><li class="search-add" data-v-ec958a82=""><ul class="search-add-ul isResourceVisible" data-v-ec958a82=""><li class="nav-item search" data-v-ec958a82=""><form role="search" class="search-form isResourceVisible" data-v-ec958a82=""><input type="search" maxlength="32" placeholder="探索稀土掘金" value="" class="search-input isResourceVisible" data-v-ec958a82=""> <div class="seach-icon-container" data-v-ec958a82=""><img src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/1e8ab9a22f0ddc36349f60b38900d0bd.svg" alt="搜索" class="search-icon" data-v-ec958a82=""></div> <div class="typehead" style="display:none;" data-v-ec958a82=""><!----> <div class="title" data-v-ec958a82=""><span data-v-ec958a82="">搜索历史</span> <span class="clear" data-v-ec958a82="">
                        清空
                      </span></div> <div class="list" data-v-ec958a82=""><div data-v-ec958a82="">
                        Protocol witness table
                      </div><div data-v-ec958a82="">
                        tableview卡顿优化
                      </div><div data-v-ec958a82="">
                        FastImageCache
                      </div><div data-v-ec958a82="">
                        iOS 图片的优化
                      </div><div data-v-ec958a82="">
                        图片的优化
                      </div></div></div></form></li> <li class="nav-item add creator-item" data-v-ec958a82=""><div class="add-group" data-v-0a54c80a="" data-v-ec958a82=""><svg data-v-0a54c80a="" width="38" height="20" viewBox="0 0 38 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="update-icon"><rect data-v-0a54c80a="" y="1" width="38" height="16" rx="8" fill="#F53F3F"></rect><path data-v-0a54c80a="" d="M7.5 7.93H11.47V9.02H7.5V7.93ZM11.47 9.65V10.71H7.5V9.65H11.47ZM11.47 11.34V12.48C11.47 12.72 11.34 12.84 11.08 12.84C10.75 12.84 10.39 12.82 10.01 12.8L10.19 13.46H11.31C11.87 13.44 12.15 13.19 12.15 12.7V7.3H7.51C7.75 6.93 7.96 6.54 8.16 6.14H13.43V5.44H8.46C8.6 5.09 8.72 4.73 8.84 4.36L8.11 4.27C7.99 4.66 7.84 5.05 7.67 5.44H4.69V6.14H7.34C6.65 7.43 5.68 8.57 4.42 9.57L4.89 10.18C5.61 9.6 6.26 8.95 6.82 8.25V13.48H7.5V11.34H11.47ZM14.72 4.73V5.4H18.64V6.27H15.58V10.23H18.51C18.41 10.75 18.23 11.18 17.99 11.52C17.43 11.23 16.91 10.89 16.44 10.5L15.89 10.88C16.38 11.3 16.92 11.67 17.5 11.99C16.86 12.45 15.84 12.73 14.45 12.84L14.76 13.5C16.35 13.32 17.5 12.94 18.2 12.34C19.69 13.02 21.44 13.41 23.45 13.49L23.63 12.8C21.71 12.74 20.05 12.41 18.65 11.82C18.93 11.42 19.12 10.89 19.24 10.23H22.46V6.27H19.36V5.4H23.29V4.73H14.72ZM21.75 9.6H19.33L19.36 8.89V8.54H21.75V9.6ZM18.61 9.6H16.29V8.54H18.64V8.89C18.64 9.13 18.63 9.37 18.61 9.6ZM16.29 7.94V6.89H18.64V7.94H16.29ZM19.36 6.89H21.75V7.94H19.36V6.89ZM32.94 4.43C31.97 4.85 30.88 5.08 29.67 5.1V9.38C29.62 10.9 29.3 12.09 28.71 12.95L29.22 13.49C29.94 12.47 30.32 11.1 30.37 9.38V8.19H31.85V13.53H32.56V8.19H33.6V7.5H30.37V5.68C31.45 5.62 32.42 5.41 33.3 5.07L32.94 4.43ZM24.61 5.2V5.86H29.12V5.2H27.23C27.09 4.84 26.95 4.51 26.8 4.21L26.06 4.33C26.23 4.59 26.38 4.88 26.52 5.2H24.61ZM24.51 7.47V8.12H26.53V9.24H24.67V9.9H26.53V12.56C26.53 12.8 26.4 12.92 26.14 12.92C26 12.92 25.85 12.9 25.69 12.87L25.84 13.54H26.38C26.96 13.54 27.25 13.27 27.25 12.73V9.9H29.01V9.24H27.25V8.12H29.18V7.47H28.05C28.24 7.13 28.41 6.74 28.57 6.31L27.92 6.09C27.77 6.57 27.6 7.03 27.4 7.47H26.3C26.14 6.93 25.96 6.48 25.77 6.11L25.13 6.34C25.33 6.69 25.51 7.07 25.66 7.47H24.51ZM25.37 10.44C25.15 11.32 24.81 12.12 24.34 12.84L24.94 13.22C25.4 12.47 25.77 11.59 26.03 10.58L25.37 10.44ZM28.24 10.37L27.64 10.53C27.92 11.13 28.15 11.75 28.34 12.38L28.94 12.15C28.78 11.61 28.54 11.02 28.24 10.37Z" fill="white"></path><path data-v-0a54c80a="" d="M18.8284 14L21.6568 16.8284L19.1112 19.374C18.955 19.5302 18.7017 19.5302 18.5455 19.374L15.9999 16.8284L18.8284 14Z" fill="#F53F3F"></path></svg> <button class="add-btn" data-v-0a54c80a="">
    创作者中心
  </button> <div class="more" data-v-0a54c80a=""><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="unfold12-icon" data-v-0a54c80a=""><path d="M2.45025 4.82383C2.17422 4.49908 2.40501 4 2.83122 4H9.16878C9.59499 4 9.82578 4.49908 9.54975 4.82382L6.38097 8.5518C6.1813 8.7867 5.8187 8.7867 5.61903 8.5518L2.45025 4.82383Z" fill="white" data-v-0a54c80a=""></path></svg></div> <ul class="more-list" data-v-0a54c80a=""><li class="item" data-v-0a54c80a=""><span class="icon write-article" data-v-0a54c80a="">写文章</span></li><li class="item" data-v-0a54c80a=""><span class="icon issue-points" data-v-0a54c80a="">发沸点</span></li><li class="item" data-v-0a54c80a=""><span class="icon write-note" data-v-0a54c80a="">写笔记</span></li><li class="item" data-v-0a54c80a=""><span class="icon create-jcode" data-v-0a54c80a="">写代码</span></li><li class="item" data-v-0a54c80a=""><span class="icon drafts" data-v-0a54c80a="">草稿箱</span></li></ul> <!----></div></li></ul></li> <!----> <li class="nav-item vip-entry" data-v-ec958a82=""><div class="vip-title" data-v-ec958a82=""><div class="vip-entry-img" data-v-ec958a82=""><img src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/24127194d5b158d7eaf8f09a256c5d01.svg" alt="vip" class="vip-img" data-v-ec958a82=""> </div> <div class="vip-words" data-v-ec958a82="">会员</div></div></li> <li class="nav-item notification" data-v-ec958a82=""><a class="app-link notification-a" data-v-ec958a82="" href="https://juejin.cn/notification"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="notification-icon" data-v-ec958a82=""><path d="M6.01132 10.2856C6.28115 6.54234 8.68619 4.28564 11.9999 4.28564C15.3136 4.28564 17.7186 6.54234 17.9885 10.2856C18.1219 12.1363 18.4093 13.708 19.9473 15.8848C20.1889 16.2267 19.953 16.7142 19.5343 16.7142H4.46546C4.04679 16.7142 3.81092 16.2267 4.05252 15.8848C5.59053 13.708 5.87793 12.1363 6.01132 10.2856Z" stroke-width="1.5" stroke-linecap="round" data-v-ec958a82=""></path><path d="M11.9573 3.21436V4.28578" stroke-width="3" stroke-linecap="round" data-v-ec958a82=""></path><path d="M9.57495 18.8569C9.92795 19.8557 10.8804 20.5712 12.0001 20.5712C13.1197 20.5712 14.0722 19.8557 14.4252 18.8569H9.57495Z" stroke-linecap="round" stroke-linejoin="round" data-v-ec958a82=""></path></svg> <!----></a> <ul class="menu-list notification-dropdown-menu" data-v-4e288a04="" data-v-ec958a82=""><li class="menu-item" data-v-4e288a04=""><a href="https://juejin.cn/notification" class="item-link" data-v-4e288a04=""><span class="item-name" data-v-4e288a04="">评论</span> <!----></a></li><li class="menu-item" data-v-4e288a04=""><a href="https://juejin.cn/notification/digg" class="item-link" data-v-4e288a04=""><span class="item-name" data-v-4e288a04="">点赞</span> <!----></a></li><li class="menu-item" data-v-4e288a04=""><a href="https://juejin.cn/notification/follow" class="item-link" data-v-4e288a04=""><span class="item-name" data-v-4e288a04="">关注</span> <!----></a></li><li class="menu-item" data-v-4e288a04=""><a href="https://juejin.cn/notification/im" class="item-link" data-v-4e288a04=""><span class="item-name" data-v-4e288a04="">私信</span> <!----></a></li><li class="menu-item" data-v-4e288a04=""><a href="https://juejin.cn/notification/system" class="item-link" data-v-4e288a04=""><span class="item-name" data-v-4e288a04="">系统消息</span> <!----></a></li></ul></li>  <li class="nav-item menu" data-v-ec958a82=""><div class="avatar-wrapper" data-v-ec958a82=""><img src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/3044413937_100x100.awebp" alt="Leon0206的头像" class="lazy avatar avatar immediate" data-v-248050e4="" data-v-0b45085c="" data-v-ec958a82="" loading="lazy"> <!----></div> <!----></li> <!----></ul></ul></nav></div> <!----></header></div>  <main class="container main-container" style="max-width:1140px;" data-v-4b9f9746=""><div class="view column-view" data-v-4b9f9746="" data-v-1c9ebbff=""><div class="main-area article-area" data-v-4b9f9746="" data-v-1c9ebbff=""><article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7087517164046909448" data-draft-id="7087516947029426207" data-original-type="0" class="article" data-v-1c9ebbff="" data-v-4b9f9746=""><!----> <meta itemprop="headline" content="写点 Swift: 为什么你需要使用泛型而不是 protocol"> <meta itemprop="keywords" content="iOS"> <meta itemprop="datePublished" content="2022-04-17T10:27:11.000Z"> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Limchihi"> <meta itemprop="url" content="https://juejin.cn/user/1750078240329479"></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="掘金"> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"> <meta itemprop="width" content="180"> <meta itemprop="height" content="180"></div></div> <h1 class="article-title" data-v-1c9ebbff="">
            写点 Swift: 为什么你需要使用泛型而不是 protocol
            <!----></h1> <div class="author-info-block" data-v-1c9ebbff=""><a href="https://juejin.cn/user/1750078240329479" target="_blank" rel="" class="avatar-link" data-v-1c9ebbff=""><img loading="eager" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/832db5b619587cd27ab334e1ecf7b3f0_100x100.awebp" alt="" class="lazy avatar avatar" data-v-248050e4="" data-v-0b45085c="" data-v-1c9ebbff=""></a> <div class="author-info-box" data-v-1c9ebbff=""><div class="author-name" data-v-1c9ebbff=""><a href="https://juejin.cn/user/1750078240329479" target="_blank" rel="" class="username username ellipsis" data-v-68a20f0a="" data-v-1c9ebbff=""><span class="name" style="max-width:128px;" data-v-68a20f0a="">
    Limchihi
  </span> <span blank="true" class="rank" data-v-3c1a13dc="" data-v-68a20f0a=""><img src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/a3f5a3e7550645a08184e5c4247cc3d4_tplv-k3u1fbpfcp-no-mark_0_0_0_0.awebp" alt="lv-3" title="创作等级" class="lazy" style="aspect-ratio:NaN;" data-v-248050e4="" data-v-3c1a13dc="" loading="lazy"></span> <!----> <!----> </a> <!----></div> <div class="meta-box" data-v-1c9ebbff=""><time datetime="2022-04-17T10:27:11.000Z" title="Sun Apr 17 2022 18:27:11 GMT+0800 (China Standard Time)" class="time" data-v-1c9ebbff="">
                    2022年04月17日 18:27
                  </time> <span class="views-count" data-v-1c9ebbff="">
                    ·&nbsp;&nbsp;阅读 5978
                  </span> <!----></div></div> <button class="follow-button follow followed" data-v-0ed911bc="" data-v-1c9ebbff=""><span class="icon icon-followed" data-v-0ed911bc=""></span> <span class="text" data-v-0ed911bc="">已关注</span></button></div> <!----> <!----> <!----> <!----> <div itemprop="articleBody" class="article-content" data-v-1c9ebbff=""><div class="markdown-body cache"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre>code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote>p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre>code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>欢迎大家关注我的微信公众号：小林居酒屋</p>
<h2 data-id="heading-0">TLDR</h2>
<p>在 Swift 中，在没有类型抹除需求的前提下使用泛型会比直接使用 <code>protocol</code> 有更好的运行时性能表现。</p>
<pre><code class="hljs language-swift copyable" lang="swift"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">Foo</span> { }
<span class="hljs-comment">// ❌</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Hello</span> {
  <span class="hljs-keyword">let</span> foo: <span class="hljs-type">Foo</span>
}
<span class="hljs-comment">// ⭕️</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">World</span>&lt;<span class="hljs-title class_">T</span>: <span class="hljs-title class_">Foo</span>&gt; {
  <span class="hljs-keyword">let</span> foo: <span class="hljs-type">T</span>
}
<span class="copy-code-btn">复制代码</span></code></pre>
<h2 data-id="heading-1">SE-0335</h2>
<p>Swift 5.6 又有一堆鲜滚热辣的 feature 出炉，其中又以 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fapple%2Fswift-evolution%2Fblob%2Fmain%2Fproposals%2F0335-existential-any.md" target="_blank" title="https://github.com/apple/swift-evolution/blob/main/proposals/0335-existential-any.md" ref="nofollow noopener noreferrer">SE-0335</a> 最为重要。</p>
<p>SE-0335 带来了一个全新的关键字 <code>any</code> （注意不是 <code>Any</code>, <code>AnyObject</code>）:</p>
<pre><code class="hljs language-swift copyable" lang="swift"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">Foo</span> { }
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Hello</span> {
  <span class="hljs-keyword">let</span> foo: <span class="hljs-keyword">any</span> <span class="hljs-type">Foo</span>
}
<span class="hljs-keyword">func</span> <span class="hljs-title function_">foo</span>(<span class="hljs-keyword">_</span>: <span class="hljs-keyword">any</span> <span class="hljs-type">Foo</span>) { }
<span class="copy-code-btn">复制代码</span></code></pre>
<p>所有的 <strong>Existential types</strong> 用 <code>any</code> 这个关键字修饰。在 Swift 5.6 中，<code>any</code> 可以使用，不添加此关键字的 <code>protocol</code> 对象会出现 warning. 在即（yao）将（yao）到（wu）来（qi）的 Swift 6.0 中，<code>any</code>  将被强制要求。</p>
<p>从实现 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fapple%2Fswift%2Fpull%2F40282" target="_blank" title="https://github.com/apple/swift/pull/40282" ref="nofollow noopener noreferrer">PR-40282</a> 来看，主要添加了编译期检查，没有发现编译后/运行时有什么较大的改变。</p>
<p>语言通常都是朝着更简洁更抽象的方向去迭代，但这个 proposal 的唯一工作就是给原本简洁明了的 <code>protocol</code> 对象强制塞上了一个新造的关键字，阿果你是不是工作量不饱和，还想让我们饱和！</p>
<p>但如果仔细看提案的 Motivation，里面详细阐述了动机:</p>
<blockquote>
<p>The cost of using existential types should not be hidden, and programmers should explicitly opt into these semantics.</p>
</blockquote>
<p><strong>Existential types</strong> 的运行时成本不可被忽略，通过显著提高直接使用 <strong>Existential types</strong> 的成本的方式，让开发者只有在必要时才使用。</p>
<h2 data-id="heading-2">Existential Type</h2>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FType_system%23Existential_types" target="_blank" title="https://en.wikipedia.org/wiki/Type_system#Existential_types" ref="nofollow noopener noreferrer">Existential Type</a> 在类型系统中，描述了一个抽象类型的接口。这个名称源于 Existential Quantification （存在量词， 数学符号 ∃ ）这个概念。既存在一种特定的类型，但在上下文中并不能理解其的真正具体类型。例如：</p>
<pre><code class="hljs language-c copyable" lang="c">T = ∃X { a: X; f: (X → <span class="hljs-type">int</span>); }
<span class="copy-code-btn">复制代码</span></code></pre>
<p>这表示了一种类型 <code>T</code>，描述了一个模块接口，它表明了存在一种类型 <code>X</code>，有一个名为<code>a</code> 的 <code>X</code> 类型的数据成员和一个名为 <code>f</code> 的函数，该函数接收一个相同类型的 <code>X</code> 的参数并返回一个整数。<code>X</code> 的具体类型可以有不同的实现，如</p>
<pre><code class="hljs language-c copyable" lang="c">intT = { a: <span class="hljs-type">int</span>; f: (<span class="hljs-type">int</span> → <span class="hljs-type">int</span>); }
floatT = { a: <span class="hljs-type">float</span>; f: (<span class="hljs-type">float</span> → <span class="hljs-type">int</span>); }
<span class="copy-code-btn">复制代码</span></code></pre>
<p>在 Swift 中，这种概念由 <code>protocol</code> 对象进行具像化（在一些别的语言中，对象被限定为 <code>class</code> 的一个实例，但 Swift 的对象概念非常广泛，可以是 <code>struct</code>, <code>enum</code>, <code>class</code>, <code>protocol</code> 或者一个 <code>closures</code>。这又是另外一个话题了）。</p>
<p>Swift 引入了 Existential Container, Protocol Witness Table, Value Witness Table 三种技术来解决 Reference type, Value type 的类型抹除和多态问题。</p>
<h2 data-id="heading-3">protocol runtime</h2>
<p>当开发者存储或者传递一个 <code>protocol</code> 时，其遵循该 <code>protocol</code> 的特定真实类型在编译器时还无法确定，只有在运行时才能获取真实类型。那么我们需要一些额外的运行时手段来解决存储，调用约定函数，和复制销毁等行为。</p>
<h3 data-id="heading-4">内存布局</h3>
<p>Swift 有两种形式的类型，值类型和引用类型。它们的内存布局是不一样的，一般来说，值类型会直接保存在栈上，引用类型则保存在堆上。假设有一个 <code>protocol</code>，三个内存布局各不相同的对象：</p>
<pre><code class="hljs language-swift copyable" lang="swift"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">Drawable</span> { <span class="hljs-keyword">func</span> <span class="hljs-title function_">draw</span>() }
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span> : <span class="hljs-title class_">Drawable</span> {
   <span class="hljs-keyword">var</span> x, y: <span class="hljs-type">Double</span>
   <span class="hljs-keyword">func</span> <span class="hljs-title function_">draw</span>() { <span class="hljs-operator">...</span> }
}
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Line</span> : <span class="hljs-title class_">Drawable</span> {
   <span class="hljs-keyword">var</span> x1, y1, x2, y2: <span class="hljs-type">Double</span>
   <span class="hljs-keyword">func</span> <span class="hljs-title function_">draw</span>() { <span class="hljs-operator">...</span> }
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SharedLine</span> : <span class="hljs-title class_">Drawable</span> {
   <span class="hljs-keyword">var</span> x1, y1, x2, y2: <span class="hljs-type">Double</span>
   <span class="hljs-keyword">func</span> <span class="hljs-title function_">draw</span>() { <span class="hljs-operator">...</span> }
}
<span class="copy-code-btn">复制代码</span></code></pre>
<p>这三种类型内存布局分别是，2 * 8 字节的栈空间，4 * 8 字节的栈空间，8 字节栈空间和  (2 + 4) * 8 字节的堆空间。显然，<code>protocol</code> 对象在存储和传递时，无法直接使用类型本身的内存布局。</p>
<p>Swift 使用了 Existential Containers 来装载原本类型的 property 和其相关联的必要信息，以确保他们在运行时能有一个统一的内存布局。</p>
<p>Existential Container 是一个五个词大小的容器，前三个词为 value buffer. 第四个词存储真实类型所对应 Value Witness Table 的指针, 第五个词是真实类型遵循当前 <code>protocol</code> 的函数表 <code>protocol</code> Witness Table 的指针</p>
<p><img src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/ab6730aa213f4695a5aa4353c227fbe0_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>如果 <code>protocol</code> 的真实类型为值类型，且其足够小能被装进三个词大小的容器中，则其会被直接装载到 value buffer 中。</p>
<p><img src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/5e74bf9265834a44a6b3e0b6b149b2b2_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>如果真实类型的大小超过三个词，或者真实类型是引用类型，则会在堆上开辟空间存储，并将指针存储到 value buffer 中。（示意图中忽略了堆对象的 0x0 和 0x8 偏移的内容）</p>
<p><img src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/5f30f7d7492743c7b89fb330bbaa0d61_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>伪代码如下：</p>
<pre><code class="hljs language-swift copyable" lang="swift"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">Foo</span> { <span class="hljs-operator">...</span> }
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">ExistentialContainer</span> {
  <span class="hljs-keyword">var</span> valueBuffer: (<span class="hljs-type">Int</span>, <span class="hljs-type">Int</span>, <span class="hljs-type">Int</span>)
  <span class="hljs-keyword">var</span> vwt: <span class="hljs-type">ValueWitnessTable</span>
  <span class="hljs-keyword">var</span> pwt: <span class="hljs-type">ProtocolWitnessTable</span>
  <span class="hljs-keyword">init</span>&lt;<span class="hljs-type">T</span>: <span class="hljs-type">Foo</span>&gt;(<span class="hljs-keyword">_</span> <span class="hljs-params">value</span>: <span class="hljs-type">T</span>) {
    <span class="hljs-keyword">self</span>.vwt <span class="hljs-operator">=</span> <span class="hljs-type">T</span>.vwt
    <span class="hljs-keyword">self</span>.pwt <span class="hljs-operator">=</span> <span class="hljs-type">T</span>.pwt
    <span class="hljs-keyword">if</span> value <span class="hljs-keyword">is</span> <span class="hljs-keyword">class</span> { <span class="hljs-comment">// reference type</span>
      <span class="hljs-keyword">self</span>.valueBuffer <span class="hljs-operator">=</span> (value.ptr, <span class="hljs-literal">nil</span>, <span class="hljs-literal">nil</span>)
    }
    <span class="hljs-keyword">if</span> value <span class="hljs-keyword">is</span> <span class="hljs-keyword">struct</span> { <span class="hljs-comment">// value type </span>
      <span class="hljs-keyword">if</span> <span class="hljs-type">MemoryLayout</span>&lt;<span class="hljs-type">T</span>&gt;.size <span class="hljs-operator">&gt;</span> <span class="hljs-number">3</span> <span class="hljs-operator">*</span> <span class="hljs-type">MemoryLayout</span>&lt;<span class="hljs-type">Int</span>&gt;.size { <span class="hljs-comment">// larger then 3 word</span>
        <span class="hljs-keyword">let</span> newValue <span class="hljs-operator">=</span> heapAlloc(value)
        <span class="hljs-keyword">self</span>.valueBuffer <span class="hljs-operator">=</span> (value.ptr, <span class="hljs-literal">nil</span>, <span class="hljs-literal">nil</span>) <span class="hljs-comment">// alloc heap object to storage large value</span>
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">self</span>.valueBuffer <span class="hljs-operator">=</span> value.copy() <span class="hljs-comment">// copy the value to inline value buffer</span>
      }
    }
  }
}
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-5">函数调用</h3>
<p>一个遵从了特定 <code>protocol</code> 的类型需要包含其约定的所有函数，但由于无法在编译期确定类型，自然也无法确定所调用的函数和其地址。这与 non-final class 是类似的，因此，<code>protocol</code> 对象也采用了和 non-final class 的 v-table 相似的技术手段，来解决约定函数地址的问题。每一个函数的地址都会按次序被保存在一张表中，这被称为 <code>protocol</code> Witness Table.</p>
<p>每个遵循了特定 <code>protocol</code> 的具体类型，都会根据 <code>protocol</code> 生成对应的 <code>protocol</code> Witness Table. 对于同一个约定函数，它们的相对 <code>protocol</code> Witness Table 开始地址的偏移都是一样的。那么对于调用方而言，真实类型可以不被关注。调用时获取 <code>protocol</code> Witness Table，根据编译时的方法偏移量从表中取出方法的地址，跳到方法的地址执行。</p>
<p>这一段代码：</p>
<pre><code class="hljs language-swift copyable" lang="swift"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">Drawable</span> { <span class="hljs-keyword">func</span> <span class="hljs-title function_">draw</span>() } 
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>: <span class="hljs-title class_">Drawable</span> { 
  <span class="hljs-keyword">func</span> <span class="hljs-title function_">draw</span>() { <span class="hljs-operator">...</span> }
} 
<span class="hljs-keyword">func</span> <span class="hljs-title function_">foo</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">d</span>: <span class="hljs-type">Drawable</span>) {
  d.draw()
}

foo(<span class="hljs-type">Point</span>())
<span class="copy-code-btn">复制代码</span></code></pre>
<p>其汇编的伪代码如下</p>
<pre><code class="hljs language-assembly copyable" lang="assembly">_main:
push       rbp
mov        rbp, rsp
mov        rdi, qword [_protocol_witness_table_for_Point]
call       _foo
pop        rbp
ret

_foo:
push       rbp
mov        rbp, rsp
call       [rdi + 0x8] # rdi is Drawable `protocol` Witness Table for Foo
pop        rbp
ret

_protocol_witness_table_for_Point:
dq         0x1230 
dq         0x1238 # Point.draw() address
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-6">实例管理</h3>
<p>Existential Containers 采用 value buffer 的方式装载原类型，来抹平各个类型内存布局的不同。因此 Existential Containers 也需要去管理这些不同类型的生命周期，其采用了与 <code>protocol</code> Witness Table 一样的跳表机制，称为 Value Witness Table. 每一个具体的类型都有一个 Value Witness Table, 它提供了如何布置和管理该类型的信息和相关函数的地址，如初始化，赋值，复制，销毁，大小等。具体存储的信息可以参见 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fapple%2Fswift%2Fblob%2Fmain%2Finclude%2Fswift%2FABI%2FValueWitness.def" target="_blank" title="https://github.com/apple/swift/blob/main/include/swift/ABI/ValueWitness.def" ref="nofollow noopener noreferrer">ValueWitness.def</a>.</p>
<p>假设我们有一个函数，其参数为一个 <code>protocol</code> 对象，并在其中对这个对象进行修改 （mutating），最后再消费这个对象。</p>
<pre><code class="hljs language-swift copyable" lang="swift"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">Changeable</span> { <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">change</span>() }
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Hello</span> {
  <span class="hljs-keyword">mutating</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">change</span>() { <span class="hljs-operator">...</span> }
}
<span class="hljs-keyword">func</span> <span class="hljs-title function_">foo</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">value</span>: <span class="hljs-type">Changeable</span>) {
  <span class="hljs-keyword">var</span> copiedValue <span class="hljs-operator">=</span> value
  copiedValue.change()
  <span class="hljs-built_in">print</span>(copiedValue)
}
<span class="copy-code-btn">复制代码</span></code></pre>
<p>那么这会经历以下几个步骤。</p>
<ol>
<li>在本地保存 Existential Container.</li>
<li>通过 Value Witness Table 获取原类型对应的大小，开辟临时栈空间。</li>
<li>通过 Value Witness Table 获取原类型的 copy 函数，复制一份原类型。</li>
<li>对复制后的对象进行修改。</li>
<li>消费复制后的对象。</li>
<li>销毁复制后的对象，并归还栈空间。</li>
</ol>
<p>伪代码如下：</p>
<pre><code class="hljs language-swift copyable" lang="swift"><span class="hljs-keyword">func</span> <span class="hljs-title function_">foo</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">value</span>: <span class="hljs-type">ExistentialContainer</span>) {
  <span class="hljs-comment">// Stored existential container</span>
  <span class="hljs-keyword">let</span> valueBuffer <span class="hljs-operator">=</span> value.valueBuffer
  <span class="hljs-keyword">let</span> vwt <span class="hljs-operator">=</span> value.vwt
  <span class="hljs-keyword">let</span> pwt <span class="hljs-operator">=</span> value.pwt
  
  <span class="hljs-comment">// alloc stack space for this functions</span>
	<span class="hljs-keyword">let</span> size <span class="hljs-operator">=</span> value.vwt.size
	addRSP(size) 
  
  <span class="hljs-comment">// Keep a local copy</span>
  <span class="hljs-keyword">let</span> initializeWithCopy <span class="hljs-operator">=</span> vwt.initializeWithCopy
	<span class="hljs-keyword">var</span> localValue <span class="hljs-operator">=</span> initializeWithCopy(valueBuffer)
  
  <span class="hljs-comment">// call change() function</span>
	<span class="hljs-keyword">let</span> change <span class="hljs-operator">=</span> pwt.change
  change(<span class="hljs-operator">&amp;</span>localValue) <span class="hljs-comment">// passed self as parameters</span>
  
  <span class="hljs-built_in">print</span>(localValue)
  
  <span class="hljs-comment">// destroy localValue</span>
 	<span class="hljs-keyword">let</span> destroy <span class="hljs-operator">=</span> vwt.destroy
  destroy(<span class="hljs-operator">&amp;</span>localValue)
  
  <span class="hljs-comment">// move RSP to raw state</span>
  resetRSP()
}
<span class="copy-code-btn">复制代码</span></code></pre>
<p>从上文伪代码中我们可以发现，在运行时直接使用 <code>protocol</code> 对象相比直接使用固定类型和静态函数而言，每一步都会有一个额外的消耗。但如果需要多态性，这些代价可能都是你所需要付出的。而且相比直接使用 <code>class</code> 来实现多态性，还省去了引用计数的管理。</p>
<h2 data-id="heading-7">泛型</h2>
<p>那么，我们有没有一种方式，既拥有多态性，又能减少运行时的动态消耗呢？</p>
<p><img src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/4337c6de666842238c223df779538ed3_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>可以通过泛型这种更静态的多态来解决运行时的损耗。</p>
<p>对于泛型函数或泛型结构，编译器会编译生成一个通用实现。与直接使用 <code>protocol</code> 对象相比，虽不再使用 Existential Container, 但其内存布局，函数调用和实例管理都十分类似，运行时的动态消耗和性能表现自然也是相似的，有一定的损耗。真正能减少运行时动态消耗的是编译器的泛型特化的优化。</p>
<p>对于下面的例子 <code>foo(_:)</code>, Swift 编译时在当前 context 下将泛型 <code>D</code> 绑定至 foo 中</p>
<pre><code class="hljs language-swift copyable" lang="swift"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">Drawable</span> { <span class="hljs-keyword">func</span> <span class="hljs-title function_">draw</span>() } 
<span class="hljs-keyword">func</span> <span class="hljs-title function_">foo</span>&lt;<span class="hljs-type">D</span>: <span class="hljs-type">Drawable</span>&gt;(<span class="hljs-keyword">_</span> <span class="hljs-params">value</span>: <span class="hljs-type">D</span>)
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>: <span class="hljs-title class_">Drawable</span> { }

foo(<span class="hljs-type">Point</span>()) <span class="hljs-comment">// Is foo&lt;Point&gt;(Point())</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<p>当开发者去存储或者传递 <code>protocol</code> 对象时，总是以一个具体类型起始，如果根据这个 context，将整条调用链中所有未确定类型替换成当前具体类型，这便是泛型的类型调用链替换。</p>
<p>对于下面的例子 <code>foo(_:)</code>：</p>
<pre><code class="hljs language-swift copyable" lang="swift"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">Drawable</span> { <span class="hljs-keyword">func</span> <span class="hljs-title function_">draw</span>() } 
<span class="hljs-keyword">func</span> <span class="hljs-title function_">foo</span>&lt;<span class="hljs-type">D</span>: <span class="hljs-type">Drawable</span>&gt;(<span class="hljs-keyword">_</span> <span class="hljs-params">value</span>: <span class="hljs-type">D</span>)
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>: <span class="hljs-title class_">Drawable</span> { }
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Line</span>: <span class="hljs-title class_">Drawable</span> { } 
foo(<span class="hljs-type">Point</span>())
foo(<span class="hljs-type">Line</span>())

<span class="hljs-comment">// generic specialization &lt;Point&gt; of foo&lt;D&gt;(_:D)</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">foo</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">value</span>: <span class="hljs-type">Point</span>)
<span class="hljs-comment">// generic specialization &lt;Line&gt; of foo&lt;D&gt;(_:D)</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">foo</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">value</span>: <span class="hljs-type">Line</span>)
<span class="copy-code-btn">复制代码</span></code></pre>
<p>除了生成通用版本的二进制外，还会生成入参为 <code>Point</code>  和 <code>Line</code> 特化版本的 <code>foo(_:)</code>，并使用其来替代调用链中 <code>foo(_:)</code> 通用版本。此时 <code>protocol</code> 对象中内存布局，函数调用和实例管理这几个需要运行时决议的部分，已全部可以在编译时确定。</p>
<h2 data-id="heading-8">泛型特化后与 <code>protocol</code> 对象的运行时对比</h2>
<p>泛型特化后的函数和结构，其优化行为与静态函数和固定结构一样。
这里以两个类型 <code>Point</code> 和 <code>Line</code> 为例子，对比泛型特化后与直接使用 <code>protocol</code> 对象。下列所有情况都基于 64 位系统。</p>
<pre><code class="hljs language-swift copyable" lang="swift"><span class="hljs-keyword">protocol</span> <span class="hljs-title class_">Drawable</span> { <span class="hljs-keyword">func</span> <span class="hljs-title function_">draw</span>() } 
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>: <span class="hljs-title class_">Drawable</span> { 
  <span class="hljs-keyword">var</span> x, y: <span class="hljs-type">Double</span>
}
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Line</span>: <span class="hljs-title class_">Drawable</span> { 
  <span class="hljs-keyword">var</span> x1, y1, x2, y2: <span class="hljs-type">Double</span>
}
<span class="copy-code-btn">复制代码</span></code></pre>
<h3 data-id="heading-9">内存布局</h3>
<p>以 A，B 两种类型为例子，都存储一个 Point 和一个 Line 实例：</p>
<pre><code class="hljs language-swift copyable" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">A</span> {
  <span class="hljs-keyword">var</span> first, second: <span class="hljs-type">Drawable</span>
}
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">B</span>&lt;<span class="hljs-title class_">First</span>: <span class="hljs-title class_">Drawable</span>, <span class="hljs-title class_">Second</span>: <span class="hljs-title class_">Drawable</span>&gt; {
  <span class="hljs-keyword">var</span> first: <span class="hljs-type">Frist</span>
  <span class="hljs-keyword">var</span> second: <span class="hljs-type">Second</span>
}

<span class="hljs-type">A</span>(<span class="hljs-type">Point</span>(), <span class="hljs-type">Line</span>())
<span class="hljs-type">B</span>(<span class="hljs-type">Point</span>(), <span class="hljs-type">Line</span>())
<span class="copy-code-btn">复制代码</span></code></pre>
<p>A 在栈上存储了两个 Existential Container 和在堆上的一个  <code>Line</code> 空间，总共 2 * 5 * 8 + (2 + 4) * 8 字节。</p>
<p><img src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/16de7238fd0f47ef98bff7621b9b233a_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>B 直接在栈上存储了 Point 和 Line，总共 (2 + 4) * 8 字节。</p>
<p><img src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/45a10d5a103a4f2fb1412df66553e573_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="" loading="lazy" class="medium-zoom-image"></p>
<p>在这个 case 下，内存结构的变化除了可以节省内存空间外，还可以通过减少单次复制成本和堆空间开辟次数来提高速度。</p>
<p>栈空间占用由原来 (2 * 5 * 8) 字节下降到了 (6 * 8) 字节， 堆空间原来 (6 * 8) 字节下降至 0 字节。单个结构体节省了 40% 的栈空间和 100% 的堆空间。</p>
<p>结构内存占用下降和无需开辟堆空间后，单次复制的成本显然会随之降低（在 Swift 中，值复制的操作十分常见，也可以通过 copy on write 来解决频繁复制的问题）。</p>
<p>在调用函数时，按照 Swift 的调用约定，结构体在小于一定大小的情况下，可以直接使用约定寄存器传递参数，而超过一定尺寸的结构体则需要开辟堆空间，传递一个指针作为参数。</p>
<h3 data-id="heading-10">函数调用/实例管理</h3>
<p>上文提到，调用 <code>protocol</code> 对象的函数，需要在运行时进行查表动态派发。而被泛型特化的函数，由于有了更充分的 context，编译器直接会将上下文中使用动态派发调用的函数替换成静态派发的函数。</p>
<p>在汇编角度则是从</p>
<pre><code class="hljs language-assembly copyable" lang="assembly">call [rbx + 0x8]
<span class="copy-code-btn">复制代码</span></code></pre>
<p>转换成了</p>
<pre><code class="hljs language-assembly copyable" lang="assembly">call _Line_Draw
<span class="copy-code-btn">复制代码</span></code></pre>
<p>但单单从动态派发转换成静态派发，其性能提升是有限的（减少了一次查表的操作），性能提升的大部分，在于编译器对静态函数的优化。</p>
<p>动态派发的 <code>protocol</code> 对象函数，在编译期的优化是极其有限的，如内联等优化就几乎没有。泛型特化后的静态函数，编译器有了更多的 context 和机会对其进行优化，如裁减特化函数中的死分支（如在某种特定类型下确定不会执行的分支），删除原函数泛型通用版本，内联展开，完全展开后删除原函数等操作。</p>
<p>这也是使用泛型后，虽然单个函数特化出了多个不同的版本，但包体积可能没有较大变化的原因。</p>
<p><code>protocol</code> 对象对实例的管理会需要依靠 Value Witness Table. 其优化方式与函数派发相近，实例生命周期的操作大部分情况下都会被内联展开，如值类型被回收时会直接移动栈顶指针，无需再调用 <code>destory</code> 函数。</p>
<h2 data-id="heading-11">总结</h2>
<p>Swift is a Protocol-Oriented Programming Language.</p>
<p>Swift 使用 <code>protocol</code> 来解决了无继承或引用语义的多态性。由于其简洁隐蔽与其他类型完全一致的语法，开发者们非常容易在代码中直接存储或传递一个 protocol, 但它的成本并不是可忽略的。</p>
<p>提案 SE-0335 通过关键字 <code>any</code> 的方式，将以前隐藏在代码中的 <code>protocol</code> 高亮出来，在语言层面解决了 <code>protocol</code> 过于隐蔽的问题。而开发者所要所要做的，除了根据 warning (5.6), error (6.0) 无脑填上 <code>any</code> 外，可能还需要多一步的思考，是否可以通过使用更多的泛型来替代 <code>protocol</code> 对象，和善用 <code>where</code> 关键字限定，来减少运行时的损耗。</p></div></div></article> <!----> <div class="article-end" data-v-4b9f9746="" data-v-1c9ebbff=""><div class="tag-list-box" data-v-4b9f9746="" data-v-1c9ebbff=""><div class="tag-list" data-v-4b9f9746="" data-v-1c9ebbff=""><div class="tag-list-title" data-v-4b9f9746="" data-v-1c9ebbff="">分类：</div> <a href="https://juejin.cn/ios" target="_blank" rel="" class="item category-item" data-v-1c9ebbff="" data-v-4b9f9746=""><span class="tag-title" data-v-1c9ebbff="">iOS</span></a></div> <div class="tag-list" data-v-4b9f9746="" data-v-1c9ebbff=""><div class="tag-list-title" data-v-4b9f9746="" data-v-1c9ebbff="">标签：</div> <div class="tag-list-container" data-v-4b9f9746="" data-v-1c9ebbff=""><a href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="item tag-item" data-v-1c9ebbff="" data-v-4b9f9746=""><span class="tag-title" data-v-1c9ebbff="">iOS</span></a></div></div></div> <!----> <div data-fetch-key="1" class="extension-banner" data-v-224127ff="" data-v-1c9ebbff="" data-v-4b9f9746=""><span class="banner-icon" data-v-224127ff=""></span> <div class="banner-wrapper" data-v-224127ff=""><a class="banner-title" data-v-224127ff="" href="https://juejin.cn/extension/?utm_source=standalone&amp;utm_medium=post&amp;utm_campaign=extension_promotion" target="_blank">
      安装掘金浏览器插件
    </a> <div class="banner-content" data-v-224127ff="">多内容聚合浏览、多引擎快捷搜索、多工具便捷提效、多模式随心畅享，你想要的，这里都有！</div></div> <a class="banner-action" data-v-224127ff="" href="https://juejin.cn/extension/?utm_source=standalone&amp;utm_medium=post&amp;utm_campaign=extension_promotion" target="_blank">前往安装</a></div></div> <!----> <!----> <div data-v-33dabfcc="" data-v-1c9ebbff="" data-jj-helper="comment-container" class="container comment-list-box" id="comment-box" data-v-4b9f9746=""><div data-v-14a3249a="" data-v-33dabfcc="" class="comment-form"><div data-v-14a3249a="" class="header"><span data-v-14a3249a="" class="header-title">评论</span></div><div data-v-14a3249a="" class="content"><div data-v-14a3249a="" class="avatar-box"><img data-v-248050e4="" data-v-0b45085c="" data-v-14a3249a="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/3044413937_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></div><div data-v-14a3249a="" class="form-box"><div data-v-7c7c7498="" data-v-14a3249a="" class="auth-card"><!----> <div data-v-14a3249a="" data-v-7c7c7498="" class="input-box"><div data-v-14a3249a="" data-v-7c7c7498="" contenteditable="true" spellcheck="false" placeholder="输入评论（Enter换行，⌘ + Enter发送）" disabled="disabled" class="rich-input empty"></div><!----><!----></div></div><div data-v-14a3249a="" class="action-box"><div data-v-33ab0a29="" data-v-14a3249a="" class="emoji-container emoji-btn" style="display: none;"><div data-v-33ab0a29="" class="emoji-box"><svg data-v-33ab0a29="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon"><path data-v-33ab0a29="" fill-rule="evenodd" clip-rule="evenodd" d="M8.00002 0.666504C12.0501 0.666504 15.3334 3.94975 15.3334 7.99984C15.3334 12.0499 12.0501 15.3332 8.00002 15.3332C3.94993 15.3332 0.666687 12.0499 0.666687 7.99984C0.666687 3.94975 3.94993 0.666504 8.00002 0.666504ZM8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2ZM10.6667 5.66667V7.66667H9.33333V5.66667H10.6667ZM6.66667 5.66667V7.66667H5.33333V5.66667H6.66667ZM10.0767 9.33333H11.0495C11.1804 9.33333 11.2866 9.43951 11.2866 9.57048C11.2866 9.60754 11.2779 9.64409 11.2612 9.67718L11.244 9.71053C10.6294 10.8739 9.40726 11.6667 7.99998 11.6667C6.61523 11.6667 5.40977 10.8991 4.7859 9.76612L4.73786 9.67593C4.67845 9.56052 4.72385 9.4188 4.83926 9.35939C4.87253 9.34226 4.90941 9.33333 4.94683 9.33333H5.92347C6.02396 9.33332 6.11908 9.37865 6.18238 9.4567C6.26207 9.55496 6.32833 9.62955 6.38117 9.68046C6.80074 10.0847 7.37133 10.3333 7.99998 10.3333C8.63289 10.3333 9.20694 10.0814 9.62728 9.67224C9.67791 9.62296 9.74135 9.55121 9.8176 9.45698C9.88089 9.37877 9.97611 9.33333 10.0767 9.33333Z"></path></svg> <span data-v-33ab0a29="">表情</span></div> <!----></div><div data-v-14a3249a="" class="image-btn" style="display: none;"><svg data-v-14a3249a="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon"><path data-v-14a3249a="" fill-rule="evenodd" clip-rule="evenodd" d="M14 1.3335C14.3514 1.3335 14.6394 1.60546 14.6648 1.95041L14.6666 2.00016V14.0002C14.6666 14.3516 14.3947 14.6396 14.0497 14.665L14 14.6668H1.99998C1.64853 14.6668 1.36059 14.3949 1.33514 14.0499L1.33331 14.0002V2.00016C1.33331 1.64871 1.60527 1.36077 1.95023 1.33532L1.99998 1.3335H14ZM13.3333 2.66618H2.66664V13.3328H13.3333V2.66618ZM11.9219 6.7879C11.9719 6.83791 12 6.90574 12 6.97647V11.7993C12 11.9098 11.9104 11.9993 11.8 11.9993H6.81615C6.7975 11.9993 6.77945 11.9968 6.76232 11.992L3.91042 11.9847C3.79996 11.9844 3.71063 11.8947 3.7109 11.7842C3.71102 11.7313 3.73209 11.6807 3.76948 11.6433L6.52468 8.88807C6.62882 8.78393 6.79766 8.78393 6.9018 8.88807L8.17297 10.1593L11.5447 6.7879C11.6489 6.68376 11.8177 6.68376 11.9219 6.7879ZM5.99997 3.99951V5.99951H3.99997V3.99951H5.99997Z"></path></svg><span data-v-14a3249a="">图片</span></div><div data-v-14a3249a="" class="submit" style="display: none;"><span data-v-14a3249a="">⌘ + Enter</span><button data-v-14a3249a="" disabled="disabled" class="submit-btn">发表评论</button></div></div></div><input data-v-14a3249a="" type="file" class="hidden"></div></div> <!----> <div data-v-33dabfcc="" class="comment-list-wrapper"><div data-v-33dabfcc="" class="title">
      全部评论 9
      <div data-v-33dabfcc="" class="sort"><div data-v-33dabfcc="" class="item active"><svg data-v-33dabfcc="" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-33dabfcc="" fill-rule="evenodd" clip-rule="evenodd" d="M5.99951 0.5C9.03708 0.5 11.4995 2.96243 11.4995 6C11.4995 9.03757 9.03708 11.5 5.99951 11.5C2.96195 11.5 0.499512 9.03757 0.499512 6C0.499512 2.96243 2.96195 0.5 5.99951 0.5ZM6.25 3.49988C6.38807 3.49988 6.5 3.61181 6.5 3.74988V5.49988H8.25C8.38807 5.49988 8.5 5.61181 8.5 5.74988V6.24988C8.5 6.38795 8.38807 6.49988 8.25 6.49988H5.75C5.61193 6.49988 5.5 6.38795 5.5 6.24988V3.74988C5.5 3.61181 5.61193 3.49988 5.75 3.49988H6.25Z"></path></svg>
          最新
        </div> <div data-v-33dabfcc="" class="item"><svg data-v-33dabfcc="" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-33dabfcc="" d="M4.88933 0.613974C4.92947 0.616946 4.96831 0.629568 5.00253 0.650767C6.67348 1.68589 7.55141 3.13884 7.63632 5.00962C7.947 5.00962 8.2245 4.65999 8.46882 3.96072L8.49487 3.88447C8.53862 3.75351 8.68025 3.68282 8.8112 3.72656C8.83398 3.73417 8.85554 3.74502 8.87522 3.75878C9.96316 4.5193 10.5048 5.50231 10.5 6.70782C10.4999 6.73762 10.4982 6.76675 10.495 6.7952C10.4985 6.86294 10.5 6.93131 10.5 7.00005C10.5 9.48533 8.48528 11.5 6 11.5C3.51472 11.5 1.5 9.48533 1.5 7.00005C1.5 6.90255 1.5031 6.80578 1.50921 6.70983C1.5062 6.70917 1.5031 6.70849 1.5 6.70782C1.50864 6.60849 1.52139 6.50994 1.53824 6.41219C1.54515 6.35775 1.55321 6.30373 1.56222 6.25003L1.57017 6.24983C1.7622 5.3813 2.28426 4.57601 3.13635 3.83394C4.00892 3.07405 4.50079 2.11523 4.61198 0.957499L4.62156 0.844839C4.63175 0.707146 4.75163 0.603784 4.88933 0.613974Z"></path></svg>
          最热
        </div></div></div> <div data-v-51124a88="" data-v-33dabfcc="" class="comment-list comment-list"><div data-v-5ca9a68f="" data-v-51124a88="" class="image-viewer-box"><!----></div> <div data-v-18fef07e="" data-v-51124a88="" class="comment" data-jj-helper-comment-id="7087879084214698782"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-18fef07e="" class="popover-box user-popover popover"><!---->  <a data-v-18fef07e="" href="https://juejin.cn/user/1399043136178813" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-0b45085c="" data-v-18fef07e="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/596287d6e9328de160174a6d99870eb7_100x100.awebp" alt="清蒸鱼跃龙门的头像" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-18fef07e="" class="content-box"><div data-v-18fef07e="" class="comment-main"><span data-v-18fef07e="" class="delete">
        删除
      </span> <div data-v-18fef07e="" class="user-box"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-18fef07e="" class="popover-box user-popover"><!---->  <a data-v-68a20f0a="" data-v-18fef07e="" href="https://juejin.cn/user/1399043136178813" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-68a20f0a="" class="name" style="max-width: 128px;">
    清蒸鱼跃龙门
  </span> <span data-v-3c1a13dc="" data-v-68a20f0a="" blank="true" class="rank"><img data-v-248050e4="" data-v-3c1a13dc="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/a3f5a3e7550645a08184e5c4247cc3d4_tplv-k3u1fbpfcp-no-mark_0_0_0_0.awebp" alt="lv-3" class="lazy" title="创作等级" loading="lazy"></span> <img data-v-7b42e73d="" data-v-68a20f0a="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/65a6a28f15d70e5a77bf881c5ec5340d.svg" alt="掘友等级" title="掘友等级" class="jueyou-level"> <!----> </a></div> <!----> <!----> <time data-v-18fef07e="" datetime="1650275452000" title="Mon Apr 18 2022 17:50:52 GMT+0800 (中国标准时间)" class="time">
          10月前
        </time></div> <div data-v-18fef07e="" class="content">Existential Type有直白一点的解释吗</div> <div data-v-18fef07e="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-18fef07e="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <div data-v-18fef07e="" class="action-box"><div data-v-18fef07e="" class="item dig-item"><svg data-v-18fef07e="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-18fef07e="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-18fef07e="" class="item"><svg data-v-18fef07e="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-18fef07e="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          1
        </div></div></div> <div data-v-18fef07e="" class="subcomment-wrapper"><!----> <div data-v-7a1becc4="" data-v-18fef07e="" class="sub-comment-list"><div data-v-7a1becc4=""><div data-v-33f5a680="" data-v-7a1becc4="" class="subcomment sub-comment" data-jj-helper-comment-id="7087916788813464327"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-33f5a680="" class="popover-box user-popover"><!---->  <a data-v-33f5a680="" href="https://juejin.cn/user/1750078240329479" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-0b45085c="" data-v-33f5a680="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/832db5b619587cd27ab334e1ecf7b3f0_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-33f5a680="" class="content-box"><div data-v-33f5a680="" class="content-wrapper"><span data-v-33f5a680="" class="delete">
        删除
      </span> <div data-v-33f5a680="" class="user-box"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-33f5a680="" class="popover-box user-popover"><!---->  <a data-v-68a20f0a="" data-v-33f5a680="" href="https://juejin.cn/user/1750078240329479" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-68a20f0a="" class="name" style="max-width: 10em;">
    Limchihi
  </span> <!----> <!----> <!----> </a></div> <span data-v-33f5a680="" class="author-badge-text">
          （作者）
        </span> <!----> <time data-v-33f5a680="" datetime="1650284230000" title="Mon Apr 18 2022 20:17:10 GMT+0800 (中国标准时间)" class="time">
          10月前
        </time></div> <div data-v-33f5a680="" class="content">有一种存在的类型，其遵循某种约束，但在当前上下文中无法知道其具体的类型。</div> <div data-v-33f5a680="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-33f5a680="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <!----> <div data-v-33f5a680="" class="action-box"><div data-v-33f5a680="" class="item dig-item"><svg data-v-33f5a680="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-33f5a680="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-33f5a680="" class="item"><svg data-v-33f5a680="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-33f5a680="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <!----></div></div></div> <!----></div></div></div></div><div data-v-18fef07e="" data-v-51124a88="" class="comment" data-jj-helper-comment-id="7087858165647213342"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-18fef07e="" class="popover-box user-popover popover"><!---->  <a data-v-18fef07e="" href="https://juejin.cn/user/659362706368392" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-0b45085c="" data-v-18fef07e="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/5161301d871200ca8a0797ac1aafa319_100x100.awebp" alt="HolmesZhao的头像" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-18fef07e="" class="content-box"><div data-v-18fef07e="" class="comment-main"><span data-v-18fef07e="" class="delete">
        删除
      </span> <div data-v-18fef07e="" class="user-box"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-18fef07e="" class="popover-box user-popover"><!---->  <a data-v-68a20f0a="" data-v-18fef07e="" href="https://juejin.cn/user/659362706368392" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-68a20f0a="" class="name" style="max-width: 128px;">
    HolmesZhao
  </span> <!----> <img data-v-7b42e73d="" data-v-68a20f0a="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/65a6a28f15d70e5a77bf881c5ec5340d.svg" alt="掘友等级" title="掘友等级" class="jueyou-level"> <!----> </a></div> <!----> <span data-v-18fef07e="" class="position">
          电子厂搬砖工
        </span> <time data-v-18fef07e="" datetime="1650270581000" title="Mon Apr 18 2022 16:29:41 GMT+0800 (中国标准时间)" class="time">
          10月前
        </time></div> <div data-v-18fef07e="" class="content">(2 * 5 * 8) 字节 怎么结算出来的?</div> <div data-v-18fef07e="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-18fef07e="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <div data-v-18fef07e="" class="action-box"><div data-v-18fef07e="" class="item dig-item"><svg data-v-18fef07e="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-18fef07e="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-18fef07e="" class="item"><svg data-v-18fef07e="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-18fef07e="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          6
        </div></div></div> <div data-v-18fef07e="" class="subcomment-wrapper"><!----> <div data-v-7a1becc4="" data-v-18fef07e="" class="sub-comment-list"><div data-v-7a1becc4=""><div data-v-33f5a680="" data-v-7a1becc4="" class="subcomment sub-comment" data-jj-helper-comment-id="7087916246742336264"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-33f5a680="" class="popover-box user-popover"><!---->  <a data-v-33f5a680="" href="https://juejin.cn/user/1750078240329479" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-0b45085c="" data-v-33f5a680="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/832db5b619587cd27ab334e1ecf7b3f0_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-33f5a680="" class="content-box"><div data-v-33f5a680="" class="content-wrapper"><span data-v-33f5a680="" class="delete">
        删除
      </span> <div data-v-33f5a680="" class="user-box"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-33f5a680="" class="popover-box user-popover"><!---->  <a data-v-68a20f0a="" data-v-33f5a680="" href="https://juejin.cn/user/1750078240329479" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-68a20f0a="" class="name" style="max-width: 10em;">
    Limchihi
  </span> <!----> <!----> <!----> </a></div> <span data-v-33f5a680="" class="author-badge-text">
          （作者）
        </span> <!----> <time data-v-33f5a680="" datetime="1650284104000" title="Mon Apr 18 2022 20:15:04 GMT+0800 (中国标准时间)" class="time">
          10月前
        </time></div> <div data-v-33f5a680="" class="content">两个存在容器，那个容器 5 个词大小，在 64 位系统上 一个词 8 字节</div> <div data-v-33f5a680="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-33f5a680="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <!----> <div data-v-33f5a680="" class="action-box"><div data-v-33f5a680="" class="item dig-item"><svg data-v-33f5a680="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-33f5a680="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-33f5a680="" class="item"><svg data-v-33f5a680="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-33f5a680="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <!----></div></div><div data-v-33f5a680="" data-v-7a1becc4="" class="subcomment sub-comment" data-jj-helper-comment-id="7089315931779891975"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-33f5a680="" class="popover-box user-popover"><!---->  <a data-v-33f5a680="" href="https://juejin.cn/user/659362706368392" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-0b45085c="" data-v-33f5a680="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/5161301d871200ca8a0797ac1aafa319_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-33f5a680="" class="content-box"><div data-v-33f5a680="" class="content-wrapper"><span data-v-33f5a680="" class="delete">
        删除
      </span> <div data-v-33f5a680="" class="user-box"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-33f5a680="" class="popover-box user-popover"><!---->  <a data-v-68a20f0a="" data-v-33f5a680="" href="https://juejin.cn/user/659362706368392" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-68a20f0a="" class="name" style="max-width: 10em;">
    HolmesZhao
  </span> <!----> <!----> <!----> </a></div> <!----> <div data-v-33f5a680="" class="rely-box"><span data-v-33f5a680="">回复</span> <div data-v-f1a2074a="" data-v-1120b3da="" data-v-33f5a680="" class="popover-box user-popover"><!---->  <a data-v-33f5a680="" href="https://juejin.cn/user/1750078240329479" target="" rel="" class="repliedname" data-v-f1a2074a="" style="max-width: 10em;">
              Limchihi
            </a></div></div> <time data-v-33f5a680="" datetime="1650609994000" title="Fri Apr 22 2022 14:46:34 GMT+0800 (中国标准时间)" class="time">
          10月前
        </time></div> <div data-v-33f5a680="" class="content">知道了, 感谢~</div> <div data-v-33f5a680="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-33f5a680="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <div data-v-33f5a680="" class="parent-wrapper"><div data-v-33f5a680="">“</div> <div data-v-33f5a680="" class="parent-content">两个存在容器，那个容器 5 个词大小，在 64 位系统上 一个词 8 字节</div> <div data-v-33f5a680="">”</div></div> <div data-v-33f5a680="" class="action-box"><div data-v-33f5a680="" class="item dig-item"><svg data-v-33f5a680="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-33f5a680="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-33f5a680="" class="item"><svg data-v-33f5a680="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-33f5a680="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <!----></div></div><div data-v-33f5a680="" data-v-7a1becc4="" class="subcomment sub-comment" data-jj-helper-comment-id="7145651450185106190"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-33f5a680="" class="popover-box user-popover"><!---->  <a data-v-33f5a680="" href="https://juejin.cn/user/2119514146743272" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-0b45085c="" data-v-33f5a680="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/e00df6c6a3e0951d9d7039816598f924_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-33f5a680="" class="content-box"><div data-v-33f5a680="" class="content-wrapper"><span data-v-33f5a680="" class="delete">
        删除
      </span> <div data-v-33f5a680="" class="user-box"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-33f5a680="" class="popover-box user-popover"><!---->  <a data-v-68a20f0a="" data-v-33f5a680="" href="https://juejin.cn/user/2119514146743272" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-68a20f0a="" class="name" style="max-width: 10em;">
    fuyoufang
  </span> <!----> <!----> <!----> </a></div> <!----> <div data-v-33f5a680="" class="rely-box"><span data-v-33f5a680="">回复</span> <div data-v-f1a2074a="" data-v-1120b3da="" data-v-33f5a680="" class="popover-box user-popover"><!---->  <a data-v-33f5a680="" href="https://juejin.cn/user/659362706368392" target="" rel="" class="repliedname" data-v-f1a2074a="" style="max-width: 10em;">
              HolmesZhao
            </a></div></div> <time data-v-33f5a680="" datetime="1663726758000" title="Wed Sep 21 2022 10:19:18 GMT+0800 (中国标准时间)" class="time">
          5月前
        </time></div> <div data-v-33f5a680="" class="content">请问下面两句中： (2 + 4) * 8 是怎么来的呀？为什么多出来一个 2 呀？<br>1. “这三种类型内存布局分别是，2 * 8 字节的栈空间，4 * 8 字节的栈空间，8 字节栈空间和 (2 + 4) * 8 字节的堆空间。”<br>2. ”A 在栈上存储了两个 Existential Container 和在堆上的一个 Line 空间，总共 2 * 5 * 8 + (2 + 4) * 8 字节。“</div> <div data-v-33f5a680="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-33f5a680="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <div data-v-33f5a680="" class="parent-wrapper"><div data-v-33f5a680="">“</div> <div data-v-33f5a680="" class="parent-content">知道了, 感谢~</div> <div data-v-33f5a680="">”</div></div> <div data-v-33f5a680="" class="action-box"><div data-v-33f5a680="" class="item dig-item"><svg data-v-33f5a680="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-33f5a680="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-33f5a680="" class="item"><svg data-v-33f5a680="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-33f5a680="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <!----></div></div><div data-v-33f5a680="" data-v-7a1becc4="" class="subcomment sub-comment" data-jj-helper-comment-id="7146490691047359269"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-33f5a680="" class="popover-box user-popover"><!---->  <a data-v-33f5a680="" href="https://juejin.cn/user/659362706368392" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-0b45085c="" data-v-33f5a680="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/5161301d871200ca8a0797ac1aafa319_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-33f5a680="" class="content-box"><div data-v-33f5a680="" class="content-wrapper"><span data-v-33f5a680="" class="delete">
        删除
      </span> <div data-v-33f5a680="" class="user-box"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-33f5a680="" class="popover-box user-popover"><!---->  <a data-v-68a20f0a="" data-v-33f5a680="" href="https://juejin.cn/user/659362706368392" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-68a20f0a="" class="name" style="max-width: 10em;">
    HolmesZhao
  </span> <!----> <!----> <!----> </a></div> <!----> <div data-v-33f5a680="" class="rely-box"><span data-v-33f5a680="">回复</span> <div data-v-f1a2074a="" data-v-1120b3da="" data-v-33f5a680="" class="popover-box user-popover"><!---->  <a data-v-33f5a680="" href="https://juejin.cn/user/2119514146743272" target="" rel="" class="repliedname" data-v-f1a2074a="" style="max-width: 10em;">
              fuyoufang
            </a></div></div> <time data-v-33f5a680="" datetime="1663922134000" title="Fri Sep 23 2022 16:35:34 GMT+0800 (中国标准时间)" class="time">
          5月前
        </time></div> <div data-v-33f5a680="" class="content">我理解的是2 * 5 * 8 指的是 Existential Container 容器的字节数,(2 + 4) * 8 指的是 Point 结构体上的 x,y 为 2, Line 结构体上的 x1,y1,x2,y2 为 4, 其中 8 指的是 Double 所占字节数</div> <div data-v-33f5a680="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-33f5a680="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <div data-v-33f5a680="" class="parent-wrapper"><div data-v-33f5a680="">“</div> <div data-v-33f5a680="" class="parent-content">请问下面两句中： (2 + 4) * 8 是怎么来的呀？为什么多出来一个 2 呀？<br>1. “这三种类型内存布局分别是，2 * 8 字节的栈空间，4 * 8 字节的栈空间，8 字节栈空间和 (2 + 4) * 8 字节的堆空间。”<br>2. ”A 在栈上存储了两个 Existential Container 和在堆上的一个 Line 空间，总共 2 * 5 * 8 + (2 + 4) * 8 字节。“</div> <div data-v-33f5a680="">”</div></div> <div data-v-33f5a680="" class="action-box"><div data-v-33f5a680="" class="item dig-item"><svg data-v-33f5a680="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-33f5a680="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-33f5a680="" class="item"><svg data-v-33f5a680="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-33f5a680="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <!----></div></div><div data-v-33f5a680="" data-v-7a1becc4="" class="subcomment sub-comment" data-jj-helper-comment-id="7146524676713022216"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-33f5a680="" class="popover-box user-popover"><!---->  <a data-v-33f5a680="" href="https://juejin.cn/user/2119514146743272" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-0b45085c="" data-v-33f5a680="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/e00df6c6a3e0951d9d7039816598f924_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-33f5a680="" class="content-box"><div data-v-33f5a680="" class="content-wrapper"><span data-v-33f5a680="" class="delete">
        删除
      </span> <div data-v-33f5a680="" class="user-box"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-33f5a680="" class="popover-box user-popover"><!---->  <a data-v-68a20f0a="" data-v-33f5a680="" href="https://juejin.cn/user/2119514146743272" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-68a20f0a="" class="name" style="max-width: 10em;">
    fuyoufang
  </span> <!----> <!----> <!----> </a></div> <!----> <div data-v-33f5a680="" class="rely-box"><span data-v-33f5a680="">回复</span> <div data-v-f1a2074a="" data-v-1120b3da="" data-v-33f5a680="" class="popover-box user-popover"><!---->  <a data-v-33f5a680="" href="https://juejin.cn/user/659362706368392" target="" rel="" class="repliedname" data-v-f1a2074a="" style="max-width: 10em;">
              HolmesZhao
            </a></div></div> <time data-v-33f5a680="" datetime="1663930047000" title="Fri Sep 23 2022 18:47:27 GMT+0800 (中国标准时间)" class="time">
          5月前
        </time></div> <div data-v-33f5a680="" class="content">不对吧，point 的 x 和 y 应该是放在Existential Container，不需要另外占用空间了</div> <div data-v-33f5a680="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-33f5a680="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <div data-v-33f5a680="" class="parent-wrapper"><div data-v-33f5a680="">“</div> <div data-v-33f5a680="" class="parent-content">我理解的是2 * 5 * 8 指的是 Existential Container 容器的字节数,(2 + 4) * 8 指的是 Point 结构体上的 x,y 为 2, Line 结构体上的 x1,y1,x2,y2 为 4, 其中 8 指的是 Double 所占字节数</div> <div data-v-33f5a680="">”</div></div> <div data-v-33f5a680="" class="action-box"><div data-v-33f5a680="" class="item dig-item"><svg data-v-33f5a680="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-33f5a680="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-33f5a680="" class="item"><svg data-v-33f5a680="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-33f5a680="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <!----></div></div><div data-v-33f5a680="" data-v-7a1becc4="" class="subcomment sub-comment" data-jj-helper-comment-id="7148260944140141325"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-33f5a680="" class="popover-box user-popover"><!---->  <a data-v-33f5a680="" href="https://juejin.cn/user/659362706368392" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-0b45085c="" data-v-33f5a680="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/5161301d871200ca8a0797ac1aafa319_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-33f5a680="" class="content-box"><div data-v-33f5a680="" class="content-wrapper"><span data-v-33f5a680="" class="delete">
        删除
      </span> <div data-v-33f5a680="" class="user-box"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-33f5a680="" class="popover-box user-popover"><!---->  <a data-v-68a20f0a="" data-v-33f5a680="" href="https://juejin.cn/user/659362706368392" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-68a20f0a="" class="name" style="max-width: 10em;">
    HolmesZhao
  </span> <!----> <!----> <!----> </a></div> <!----> <div data-v-33f5a680="" class="rely-box"><span data-v-33f5a680="">回复</span> <div data-v-f1a2074a="" data-v-1120b3da="" data-v-33f5a680="" class="popover-box user-popover"><!---->  <a data-v-33f5a680="" href="https://juejin.cn/user/2119514146743272" target="" rel="" class="repliedname" data-v-f1a2074a="" style="max-width: 10em;">
              fuyoufang
            </a></div></div> <time data-v-33f5a680="" datetime="1664334316000" title="Wed Sep 28 2022 11:05:16 GMT+0800 (中国标准时间)" class="time">
          5月前
        </time></div> <div data-v-33f5a680="" class="content extend">`Existential Container 是一个五个词大小的容器，前三个词为 value buffer. 第四个词存储真实类型所对应 Value Witness Table 的指针`<br><br>前三个 buffer 只能存下三个 8 字节的<br><br>`如果真实类型的大小超过三个词，或者真实类型是引用类型，则会在堆上开辟空间存储，并将指针存储到 value buffer 中。（示意图中忽略了堆对象的 0x0 和 0x8 偏移的内容）`</div> <div data-v-33f5a680="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-33f5a680="" class="limit-btn" style="">
        收起
      </div> <!----> <div data-v-33f5a680="" class="parent-wrapper"><div data-v-33f5a680="">“</div> <div data-v-33f5a680="" class="parent-content">不对吧，point 的 x 和 y 应该是放在Existential Container，不需要另外占用空间了</div> <div data-v-33f5a680="">”</div></div> <div data-v-33f5a680="" class="action-box"><div data-v-33f5a680="" class="item dig-item"><svg data-v-33f5a680="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-33f5a680="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-33f5a680="" class="item"><svg data-v-33f5a680="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-33f5a680="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <!----></div></div></div> <!----></div></div></div></div></div> <!----></div></div> <div data-v-1b688d7c="" data-v-1c9ebbff="" class="action-box action-bar" data-v-4b9f9746=""><div data-v-1b688d7c="" class="praise-action action active"><div data-v-1b688d7c="" class="action-title-box"><img data-v-1b688d7c="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/c794682f2184652c07e62d648e048460.svg"> <span data-v-1b688d7c="" class="action-title">
          39
        </span></div></div> <div data-v-1b688d7c="" class="comment-action action"><div data-v-1b688d7c="" class="action-title-box"><img data-v-1b688d7c="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/336af4d1fafabcca3b770c8ad7a50781.svg"> <span data-v-1b688d7c="" class="action-title">
          9
        </span></div></div> <div data-v-1b688d7c="" class="collect-action action"><div data-v-1b688d7c="" class="action-title-box"><img data-v-1b688d7c="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/3d482c7a948bac826e155953b2a28a9e.svg"> <span data-v-1b688d7c="" class="action-title">收藏</span></div></div> <!----></div></div> <div data-v-1c9ebbff="" data-v-4b9f9746="" class="main-area recommended-area shadow"><div data-v-1c9ebbff="" data-v-4b9f9746="" class="recommended-list-title-wrapper"><div data-v-1c9ebbff="" data-v-4b9f9746="" class="title"><span data-v-1c9ebbff="" data-v-4b9f9746="" class="title-content">相关推荐</span></div></div> <div data-v-3ff8f708="" data-v-57c9777c="" data-v-1c9ebbff="" name="entry-list" tag="div" class="entry-list list recommended-entry-list" data-v-4b9f9746=""><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="7002215196697722887" data-original-type="0" data-draft-id="6997789656414683149" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/3993032115367118" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        Style_月月
      </div></a> <div data-v-5380cbb8="" class="date">1年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/Swift" target="_blank" rel="" class="tag">
        Swift
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/7002215196697722887" target="_blank" rel="" title="Swift-进阶 14：泛型" class="title">Swift-进阶 14：泛型</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/7002215196697722887" target="_blank" rel=""><div data-v-5380cbb8="">这是我参与8月更文挑战的第22天，活动详情查看：8月更文挑战 本文主要介绍泛型及其底层原理 泛型 泛型主要用于解决代码的抽象能力 + 代码的复用性 例如下面的例子，其中的T就是泛型 类型约束 在一个类</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">1305</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            3
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            1
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-5380cbb8="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/448bd02278e2486ca8fd75a46e463994_tplv-k3u1fbpfcp-no-mark_300_300_300_200.awebp" alt="Swift-进阶 14：泛型" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="7140472064577634341" data-original-type="0" data-draft-id="7140471418835337253" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/544946870056199" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        进阶的派大星
      </div></a> <div data-v-5380cbb8="" class="date">5月前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E5%90%8E%E7%AB%AF" target="_blank" rel="" class="tag">
        后端
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E9%9D%A2%E8%AF%95" target="_blank" rel="" class="tag">
        面试
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/7140472064577634341" target="_blank" rel="" title="慢慢的喜欢上泛型  之前确实冷落了" class="title">慢慢的喜欢上泛型  之前确实冷落了</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/7140472064577634341" target="_blank" rel=""><div data-v-5380cbb8="">什么泛型 泛型带来的好处 那么泛型的好处就是在编译的时候能够检查类型安全，并且所有的强制转换都是自动和隐式的** 泛型中通配符 常用的 T，E，K，V，？ ？表</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">1.5w</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            76
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            22
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-5380cbb8="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/9c6b4faa4d8d49138521729dd61d0f04_tplv-k3u1fbpfcp-no-mark_300_300_300_200.awebp" alt="慢慢的喜欢上泛型  之前确实冷落了" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="7028506186743808008" data-original-type="0" data-draft-id="7028383975391854628" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/870468937846638" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        DamonLu
      </div></a> <div data-v-5380cbb8="" class="date">1年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/Swift" target="_blank" rel="" class="tag">
        Swift
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/7028506186743808008" target="_blank" rel="" title="让你的 Swift 代码更 Swift" class="title">让你的 Swift 代码更 Swift</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/7028506186743808008" target="_blank" rel=""><div data-v-5380cbb8="">Swift 有很多其他语言所没有的独特的结构和方法，因此很多刚开始接触 Swift 的开发者并没有发挥它本身的优势。 所以，我们就来看一看那些让你的 Swift 代码更 Swift 的写法吧~</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">1.5w</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            149
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            7
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-5380cbb8="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/0a6b9147ea4f42f6a53e696aee24037c_tplv-k3u1fbpfcp-no-mark_300_300_300_200.awebp" alt="让你的 Swift 代码更 Swift" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="7034323356459466760" data-original-type="0" data-draft-id="7034312504008409119" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/3984285870341288" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        非优秀程序员
      </div></a> <div data-v-5380cbb8="" class="date">1年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E5%89%8D%E7%AB%AF" target="_blank" rel="" class="tag">
        前端
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/JavaScript" target="_blank" rel="" class="tag">
        JavaScript
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/7034323356459466760" target="_blank" rel="" title="如何用 CSS 中写出超级美丽的阴影效果" class="title">如何用 CSS 中写出超级美丽的阴影效果</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/7034323356459466760" target="_blank" rel=""><div data-v-5380cbb8="">「这是我参与11月更文挑战的第7天，活动详情查看：2021最后一次更文挑战」。 在我看来，最好的网站和Web应用程序对它们具有切实的"真实"质量。实现这种质量涉及很多因素，但阴影是一个关键因素。 然而</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">114.4w</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            1027
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            67
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="7053978539523047437" data-original-type="0" data-draft-id="7052883855530786829" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/3544481220795998" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        LevySu
      </div></a> <div data-v-5380cbb8="" class="date">1年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/Swift" target="_blank" rel="" class="tag">
        Swift
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/7053978539523047437" target="_blank" rel="" title="iOS瘦身！一个让50%本地图片消失的方案" class="title">iOS瘦身！一个让50%本地图片消失的方案</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/7053978539523047437" target="_blank" rel=""><div data-v-5380cbb8="">安装包瘦身一直是老生常谈的问题，几乎每个大一点的项目都要经历。我们团队也做了很多关于安装包瘦身的事情，通过各种方案在不删减业务的情况下，累计安装包大小减少**100M**+，减少占总包体约**38%+</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">2.8w</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            139
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            50
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="7088630212371415076" data-original-type="0" data-draft-id="7088629551571402765" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/1099167356171918" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        Roll圈圈
      </div></a> <div data-v-5380cbb8="" class="date">10月前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/Android" target="_blank" rel="" class="tag">
        Android
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/7088630212371415076" target="_blank" rel="" title="想没想过自己做个APP？来，机会来了" class="title">想没想过自己做个APP？来，机会来了</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/7088630212371415076" target="_blank" rel=""><div data-v-5380cbb8="">想没想过自己做一个APP，自己当自己的产品，想怎么交互就怎么交互的那种。自己做设计，自己定逻辑，自己愉悦自己。</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">5.0w</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            580
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            137
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-5380cbb8="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/42a2c01105bf4f28ac489c4545c4c43f_tplv-k3u1fbpfcp-no-mark_300_300_300_200.awebp" alt="想没想过自己做个APP？来，机会来了" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6844904046436843527" data-original-type="0" data-draft-id="6845076606881382408" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/2400989094099086" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        yeyan1996
      </div></a> <div data-v-5380cbb8="" class="date">3年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/JavaScript" target="_blank" rel="" class="tag">
        JavaScript
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6844904046436843527" target="_blank" rel="" title="字节跳动面试官：请你实现一个大文件上传和断点续传" class="title">字节跳动面试官：请你实现一个大文件上传和断点续传</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6844904046436843527" target="_blank" rel=""><div data-v-5380cbb8="">这段时间面试官都挺忙的，频频出现在博客文章标题，虽然我不是特别想蹭热度，但是实在想不到好的标题了-。-，蹭蹭就蹭蹭 :)</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">28.3w</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            5923
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            584
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6983904373508145189" data-original-type="0" data-draft-id="6982201612479496228" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/2981531265821416" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        杰出D
      </div></a> <div data-v-5380cbb8="" class="date">1年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E5%89%8D%E7%AB%AF" target="_blank" rel="" class="tag">
        前端
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E7%AE%97%E6%B3%95" target="_blank" rel="" class="tag">
        算法
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6983904373508145189" target="_blank" rel="" title="面试了十几个高级前端，竟然连（扁平数据结构转Tree）都写不出来" class="title">面试了十几个高级前端，竟然连（扁平数据结构转Tree）都写不出来</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6983904373508145189" target="_blank" rel=""><div data-v-5380cbb8="">「本文已参与好文召集令活动，点击查看：后端、大前端双赛道投稿，2万元奖池等你挑战！」 前言 招聘季节一般都在金三银四，或者金九银十。最近在这五六月份，陆陆续续面试了十几个高级前端。有一套考察算法的小题</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">26.9w</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            3827
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            1962
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-5380cbb8="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/b9459a35f2c64193b5f85d87d9e71cc5_tplv-k3u1fbpfcp-no-mark_300_300_300_200.awebp" alt="面试了十几个高级前端，竟然连（扁平数据结构转Tree）都写不出来" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6963476650356916254" data-original-type="0" data-draft-id="6963441669110759455" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/2955079655898093" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        大帅老猿
      </div></a> <div data-v-5380cbb8="" class="date">1年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E5%89%8D%E7%AB%AF" target="_blank" rel="" class="tag">
        前端
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/JavaScript" target="_blank" rel="" class="tag">
        JavaScript
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6963476650356916254" target="_blank" rel="" title="产品经理：你能不能用div给我画条龙？" class="title">产品经理：你能不能用div给我画条龙？</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6963476650356916254" target="_blank" rel=""><div data-v-5380cbb8="">事情是这样的，前天上午产品经理说想要做一个心愿墙，问我能不能行 我心想，这太容易了，但为了多摸一天鱼，我说还是有点挑战的 结果下午，产品经理和设计师就给我发来了设计参考 他们说，心愿墙的设计大致是这样</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">13.2w</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            3098
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            635
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6844903885488783374" data-original-type="0" data-draft-id="6845076367613100045" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/3720403075993373" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        程序员依扬
      </div></a> <div data-v-5380cbb8="" class="date">3年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E9%9D%A2%E8%AF%95" target="_blank" rel="" class="tag">
        面试
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E5%89%8D%E7%AB%AF" target="_blank" rel="" class="tag">
        前端
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6844903885488783374" target="_blank" rel="" title="【1 月最新】前端 100 问：能搞懂 80% 的请把简历给我" class="title">【1 月最新】前端 100 问：能搞懂 80% 的请把简历给我</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6844903885488783374" target="_blank" rel=""><div data-v-5380cbb8="">半年时间，几千人参与，精选大厂前端面试高频 100 题，这就是「壹题」。 在 2019 年 1 月 21 日这天，「壹题」项目正式开始，在这之后每个工作日都会出一道高频面试题，主要涵盖阿里、腾讯、头条、百度、网易等大公司和常见题型。得益于大家热情参与，现在每道题都有很多答案，提…</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">62.5w</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            10890
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            372
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="7050377958241861663" data-original-type="0" data-draft-id="7050376815163998238" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/1494986085377223" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        自如大前端团队
      </div></a> <div data-v-5380cbb8="" class="date">1年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E6%9E%B6%E6%9E%84" target="_blank" rel="" class="tag">
        架构
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/7050377958241861663" target="_blank" rel="" title="自如iOS二进制方案落地(30分钟降低到10分钟以内)" class="title">自如iOS二进制方案落地(30分钟降低到10分钟以内)</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/7050377958241861663" target="_blank" rel=""><div data-v-5380cbb8="">自如iOS二进制方案实际落地经验！工程编译速度提升5倍！适用于大型项目，即使组件不能独立运行也能落地！</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">3.1w</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            71
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            6
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="7003689115413643295" data-original-type="0" data-draft-id="7003679404807159838" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/3650034335487975" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        Cooci
      </div></a> <div data-v-5380cbb8="" class="date">1年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E9%9D%A2%E8%AF%95" target="_blank" rel="" class="tag">
        面试
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/7003689115413643295" target="_blank" rel="" title="内卷吧! iOS开发君" class="title">内卷吧! iOS开发君</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/7003689115413643295" target="_blank" rel=""><div data-v-5380cbb8="">前序 前段时间因为课程需要 , 我出了一套iOS考试试卷 想着VIP大家做得非常不错. 带着分享的精神也开源了出来 一套iOS底层试卷-我想和你分享 结果反响巨大! 很多靓仔靓女纷纷私聊我....大致</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">3.7w</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            279
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            147
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-5380cbb8="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/82e5737802914635ac90f74046a681ee_tplv-k3u1fbpfcp-no-mark_300_300_300_200.awebp" alt="内卷吧! iOS开发君" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6844903549273374733" data-original-type="0" data-draft-id="6845075364654350349" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/1926000099460664" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        没故事的卓同学
      </div></a> <div data-v-5380cbb8="" class="date">5年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6844903549273374733" target="_blank" rel="" title="接手一个负分的 iOS 项目后我做了什么" class="title">接手一个负分的 iOS 项目后我做了什么</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6844903549273374733" target="_blank" rel=""><div data-v-5380cbb8="">半年前我加入一个刚刚拿到 A 轮资金的创业团队负责 iOS 项目。早期的时候公司生死未卜，只追求快速迭代找到一个正确的方向。这种早期默默无闻的团队也没什么工程追求，就是写的快就好了。但是确定方向后要长期发展，就不能再野蛮生长了。 基于过去半年我在这个项目里的实践经验，和大家分享…</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">2.4w</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            375
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            87
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-5380cbb8="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/160e08782299c8cf_tplv-t2oaga2asx-no-mark_300_300_300_200.awebp" alt="接手一个负分的 iOS 项目后我做了什么" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6844904046357118989" data-original-type="0" data-draft-id="6845076607195938829" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/817692379985752" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        恋猫de小郭
      </div></a> <div data-v-5380cbb8="" class="date">3年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/Flutter" target="_blank" rel="" class="tag">
        Flutter
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6844904046357118989" target="_blank" rel="" title="谁告诉你 Flutter 会干掉原生开发？" class="title">谁告诉你 Flutter 会干掉原生开发？</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6844904046357118989" target="_blank" rel=""><div data-v-5380cbb8="">如下图所示，今天刚好收到一个知乎问题，而刚刚好这个视频我也在抖音上看到过，播放量还不低，本来是“一笑而过”但是既然这么“有缘份”，那就关于 “Flutter 会干掉原生开发？” 这个问题再聊聊我的看法。 我在 2017 开始对 flutter 产生兴趣，至今已经写了 20 几篇…</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">2.9w</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            145
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            148
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6844903428259348494" data-original-type="1" data-draft-id="0" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/2875978145860263" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        SDK.cn
      </div></a> <div data-v-5380cbb8="" class="date">6年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/Swift" target="_blank" rel="" class="tag">
        Swift
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6844903428259348494" target="_blank" rel="" title="Swift，你不得不学的 5 个原因" class="title">Swift，你不得不学的 5 个原因</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6844903428259348494" target="_blank" rel=""><div data-v-5380cbb8="">自从 2014 年 WWDC，Swift 已经有了数不清的改进。苹果也在 2015 年开源了 Swift 的源代码。当苹果宣布 Swift 的时候，我有一点兴奋，甚至有一点吃惊。这并不是说我对 Objective-C 不感兴趣，恰恰相反，我是 Objective-C 的粉丝。然而，Swift 集成了许多我喜欢的其他语言特性，如：protocols，closures，generics 和 tuples。 </div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">1086</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            25
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            5
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-5380cbb8="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/61e6742d5c645b1ab33d.jpg_tplv-t2oaga2asx-no-mark_300_300_300_200.awebp" alt="Swift，你不得不学的 5 个原因" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6844903856489365518" data-original-type="0" data-draft-id="6845076325686837256" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/2400989094099086" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        yeyan1996
      </div></a> <div data-v-5380cbb8="" class="date">3年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/JavaScript" target="_blank" rel="" class="tag">
        JavaScript
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E5%89%8D%E7%AB%AF" target="_blank" rel="" class="tag">
        前端
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6844903856489365518" target="_blank" rel="" title="一个合格的中级前端工程师需要掌握的 28 个 JavaScript 技巧" class="title">一个合格的中级前端工程师需要掌握的 28 个 JavaScript 技巧</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6844903856489365518" target="_blank" rel=""><div data-v-5380cbb8="">2. 循环实现数组 map 方法 3. 使用 reduce 实现数组 map 方法 4. 循环实现数组 filter 方法 5. 使用 reduce 实现数组 filter 方法 6. 循环实现数组的</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">26.3w</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            5524
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            331
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6844903922679676935" data-original-type="1" data-draft-id="0" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/413072061127479" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        阴明
      </div></a> <div data-v-5380cbb8="" class="date">3年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E7%A8%8B%E5%BA%8F%E5%91%98" target="_blank" rel="" class="tag">
        程序员
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E5%89%8D%E7%AB%AF" target="_blank" rel="" class="tag">
        前端
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E5%90%8E%E7%AB%AF" target="_blank" rel="" class="tag">
        后端
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6844903922679676935" target="_blank" rel="" title="程序员真是太太太太太有趣了！！！" class="title">程序员真是太太太太太有趣了！！！</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6844903922679676935" target="_blank" rel=""><div data-v-5380cbb8="">网络上虽然已经有了很多关于程序员的话题，但大部分人对这个群体还是很陌生。我们在谈论程序员的时候，究竟该聊些什么呢？ 各位程序员大佬们，请让我听到你们的声音！不管你是前端开发、后端研发、测试开发、移动端开发、全栈工程师、运维工程师、网络工程师、架构师、研发经理还是其他职位，不管你…</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">2.8w</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            428
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            96
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6844903590138478600" data-original-type="0" data-draft-id="6845075408929423374" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/1081575169068238" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        LaiYoung_
      </div></a> <div data-v-5380cbb8="" class="date">4年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/iOS" target="_blank" rel="" class="tag">
        iOS
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/Apple" target="_blank" rel="" class="tag">
        Apple
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90" target="_blank" rel="" class="tag">
        图片资源
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6844903590138478600" target="_blank" rel="" title="iOS 性能优化总结" class="title">iOS 性能优化总结</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6844903590138478600" target="_blank" rel=""><div data-v-5380cbb8="">在 VSync 信号到来后，系统图形服务会通过 CADisplayLink 等机制通知 App，App 主线程开始在 CPU 中计算显示内容，比如视图的创建、布局计算、图片解码、文本绘制等。随后 CPU 会将计算好的内容提交到 GPU 去，由 GPU 进行变换、合成、渲染。随后…</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">2.2w</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            460
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            13
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6844903928442667015" data-original-type="0" data-draft-id="6845076436898807816" class="entry" style="margin-bottom: 0px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/3227821870163176" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        子弈
      </div></a> <div data-v-5380cbb8="" class="date">3年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E9%9D%A2%E8%AF%95" target="_blank" rel="" class="tag">
        面试
      </a><a data-v-5380cbb8="" href="https://juejin.cn/tag/%E5%89%8D%E7%AB%AF" target="_blank" rel="" class="tag">
        前端
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6844903928442667015" target="_blank" rel="" title="面试分享：两年工作经验成功面试阿里P6总结" class="title">面试分享：两年工作经验成功面试阿里P6总结</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6844903928442667015" target="_blank" rel=""><div data-v-5380cbb8="">本文主要给大家带来一些我面试的经历和经验，希望对正在求职的同学有所帮助。我先大致说下面试之前的个人情况：2017年7月正式入职海康威视数字技术股份有限公司，使用Vue.js技术栈。 我写的篇幅可能有点长，如果只想看成功的面试请直接从阿里企业智能事业部（一面）开始，大家见谅哈。 …</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">30.6w</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            3773
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            447
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-57c9777c="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-5380cbb8="" data-v-805bdd7e="" data-v-57c9777c="" data-entry-id="6844903986412126216" data-original-type="0" data-draft-id="6845076518528352263" class="entry" style="margin-bottom: 20px;"><div data-v-5380cbb8="" class="meta-container"><a data-v-5380cbb8="" href="https://juejin.cn/user/3298190612500696" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-1120b3da="" data-v-5380cbb8="" class="popover-box user-popover"><!---->  
        蓝师傅
      </div></a> <div data-v-5380cbb8="" class="date">3年前</div> <div data-v-5380cbb8="" class="tag_list"><a data-v-5380cbb8="" href="https://juejin.cn/tag/Android" target="_blank" rel="" class="tag">
        Android
      </a></div></div> <div data-v-5380cbb8="" class="content-wrapper" style="border-bottom: 0px;"><div data-v-5380cbb8="" class="content-main"><div data-v-5380cbb8="" class="title-row"> <!----> <!----> <!----> <a data-v-5380cbb8="" href="https://juejin.cn/post/6844903986412126216" target="_blank" rel="" title="面试官：简历上最好不要写Glide，不是问源码那么简单" class="title">面试官：简历上最好不要写Glide，不是问源码那么简单</a></div> <div data-v-5380cbb8="" class="abstract"><a data-v-5380cbb8="" href="https://juejin.cn/post/6844903986412126216" target="_blank" rel=""><div data-v-5380cbb8="">说到图片加载框架，大家最熟悉的莫过于Glide了，但我却不推荐简历上写熟悉Glide，除非你熟读它的源码，或者参与Glide的开发和维护。 使用Glide加载图片如此简单，这让很多开发者省下自己处理图片的时间，图片加载工作全部交给Glide来就完事，同时，很容易就把图片处理的相…</div></a></div> <ul data-v-5380cbb8="" class="action-list jh-timeline-action-area"><li data-v-5380cbb8="" class="item view"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">5.7w</span></li> <li data-v-5380cbb8="" class="item like"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            830
          </span></li> <li data-v-5380cbb8="" class="item comment"><i data-v-5380cbb8=""></i> <span data-v-5380cbb8="">
            112
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li></div></div> <!----> <div data-v-65597ac0="" data-v-1c9ebbff="" st:block="sidebar" class="sidebar sidebar top sticky" data-v-4b9f9746=""><div data-v-71f2d09e="" data-v-bdf6e7fa="" data-v-65597ac0="" class="sidebar-block author-block pure"><a data-v-bdf6e7fa="" href="https://juejin.cn/user/1750078240329479" target="_blank" rel="" class="user-item item" data-v-71f2d09e=""><img data-v-248050e4="" data-v-0b45085c="" data-v-bdf6e7fa="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/832db5b619587cd27ab334e1ecf7b3f0_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"> <div data-v-bdf6e7fa="" class="info-box"><a data-v-68a20f0a="" data-v-bdf6e7fa="" href="https://juejin.cn/user/1750078240329479" target="_blank" rel="" class="username"><span data-v-68a20f0a="" class="name" style="max-width: 128px;">
      Limchihi
    </span> <span data-v-3c1a13dc="" data-v-68a20f0a="" blank="true" class="rank"><img data-v-248050e4="" data-v-3c1a13dc="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/a3f5a3e7550645a08184e5c4247cc3d4_tplv-k3u1fbpfcp-no-mark_0_0_0_0.awebp" alt="lv-3" class="lazy" title="创作等级" loading="lazy"></span> <!----> <!----> </a> <!----></div></a> <div data-v-bdf6e7fa="" data-v-71f2d09e="" class="operate-btn"><button data-v-2afc21b6="" data-v-bdf6e7fa="" class="ui-btn follow-btn primary large default cancel attention" st:name="followBtn" data-v-71f2d09e=""><!----> 
    已关注
  </button> <a data-v-11443840="" data-v-bdf6e7fa="" href="https://juejin.cn/notification/im?participantId=1750078240329479" class="im-button im-btn" data-v-71f2d09e=""><!----> <div data-v-11443840="">私信</div></a></div> <div data-v-bdf6e7fa="" data-v-71f2d09e="" class="cut-off"></div>  <div data-v-bdf6e7fa="" data-v-71f2d09e="" class="stat-item item"><svg data-v-bdf6e7fa="" data-v-71f2d09e="" xmlns="http://www.w3.org/2000/svg" width="25" height="26" viewBox="0 0 25 26" class="zan"><g data-v-bdf6e7fa="" data-v-71f2d09e="" fill="none" fill-rule="evenodd" transform="translate(0 .57)"><ellipse data-v-bdf6e7fa="" data-v-71f2d09e="" cx="12.5" cy="12.57" fill="#E1EFFF" rx="12.5" ry="12.57"></ellipse><path data-v-bdf6e7fa="" data-v-71f2d09e="" fill="#7BB9FF" d="M8.596 11.238V19H7.033C6.463 19 6 18.465 6 17.807v-5.282c0-.685.483-1.287 1.033-1.287h1.563zm4.275-4.156A1.284 1.284 0 0 1 14.156 6c.885.016 1.412.722 1.595 1.07.334.638.343 1.687.114 2.361-.207.61-.687 1.412-.687 1.412h3.596c.38 0 .733.178.969.488.239.317.318.728.21 1.102l-1.628 5.645a1.245 1.245 0 0 1-1.192.922h-7.068v-7.889c1.624-.336 2.623-2.866 2.806-4.029z"></path></g></svg> <span data-v-bdf6e7fa="" data-v-71f2d09e="" class="content">
      获得点赞
      <span data-v-bdf6e7fa="" data-v-71f2d09e="" class="count">&nbsp;59</span></span></div> <div data-v-bdf6e7fa="" data-v-71f2d09e="" class="stat-item item"><svg data-v-bdf6e7fa="" data-v-71f2d09e="" width="25" height="25" viewBox="0 0 25 25" class="icon stat-view-icon"><g data-v-bdf6e7fa="" data-v-71f2d09e="" fill="none" fill-rule="evenodd"><circle data-v-bdf6e7fa="" data-v-71f2d09e="" cx="12.5" cy="12.5" r="12.5" fill="#E1EFFF"></circle><path data-v-bdf6e7fa="" data-v-71f2d09e="" fill="#7BB9FF" d="M4 12.5S6.917 7 12.75 7s8.75 5.5 8.75 5.5-2.917 5.5-8.75 5.5S4 12.5 4 12.5zm8.75 2.292c1.208 0 2.188-1.026 2.188-2.292 0-1.266-.98-2.292-2.188-2.292-1.208 0-2.188 1.026-2.188 2.292 0 1.266.98 2.292 2.188 2.292z"></path></g></svg> <span data-v-bdf6e7fa="" data-v-71f2d09e="" class="content">
      文章被阅读
      <span data-v-bdf6e7fa="" data-v-71f2d09e="" class="count">&nbsp;11,586</span></span></div> <!----></div> <!----> <a data-v-65597ac0="" href="https://juejin.cn/user/center/signin?from=item" target="" rel=""></a> <div data-v-71f2d09e="" data-v-7571c026="" data-v-65597ac0="" class="sidebar-block wechat-sidebar-block pure"><div data-v-19814543="" data-v-7571c026="" class="wechat-banner" data-v-71f2d09e=""><img data-v-19814543="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/default.640d9a7.png" loading="lazy" class="wechat-img square"></div> <div data-v-7571c026="" data-v-71f2d09e="" title="关闭" class="close-btn"><i data-v-7571c026="" class="byte-icon byte-icon--close-circle" data-v-71f2d09e=""><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path fill="none" d="M0 0h48v48H0z"></path><path d="M24 2c12.2 0 22 9.8 22 22s-9.8 22-22 22S2 36.2 2 24 11.8 2 24 2zm0 4C14.1 6 6 14.1 6 24s8.1 18 18 18 18-8.1 18-18S33.9 6 24 6zm-4.9 10.2l4.9 4.9 5-4.9c.4-.4 1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4l-5 4.9 5 5c.4.4.4 1 0 1.4l-1.4 1.4c-.4.4-1 .4-1.4 0l-5-5-4.9 5c-.4.4-1 .4-1.4 0l-1.4-1.4c-.4-.4-.4-1 0-1.4l4.9-5-4.9-4.9c-.4-.4-.4-1 0-1.4l1.4-1.4c.3-.4 1-.4 1.4 0z"></path></svg></i></div></div> <div data-v-71f2d09e="" data-v-17139de4="" data-v-65597ac0="" class="sidebar-block related-entry-sidebar-block shadow" st:block="relatedEntrySidebarBlock"><div data-v-71f2d09e="" class="block-title">相关文章</div> <div data-v-71f2d09e="" class="block-body"><div data-v-17139de4="" data-v-71f2d09e="" class="entry-list"><a data-v-17139de4="" href="https://juejin.cn/post/6870781128632664071" target="_blank" rel="" st:name="link" title="Swift 利器 -  Protocols 和 Extensions" class="item" data-v-71f2d09e=""><div data-v-17139de4="" class="entry-title">Swift 利器 -  Protocols 和 Extensions</div> <div data-v-17139de4="" class="entry-meta-box"><div data-v-17139de4="" class="entry-meta">21点赞</div> <div data-v-17139de4="" class="entry-meta">&nbsp;·&nbsp;</div> <div data-v-17139de4="" class="entry-meta">6评论</div></div></a><a data-v-17139de4="" href="https://juejin.cn/post/7064351631072526350" target="_blank" rel="" st:name="link" title="轻松拿下 TS 泛型" class="item" data-v-71f2d09e=""><div data-v-17139de4="" class="entry-title">轻松拿下 TS 泛型</div> <div data-v-17139de4="" class="entry-meta-box"><div data-v-17139de4="" class="entry-meta">625点赞</div> <div data-v-17139de4="" class="entry-meta">&nbsp;·&nbsp;</div> <div data-v-17139de4="" class="entry-meta">56评论</div></div></a><a data-v-17139de4="" href="https://juejin.cn/post/6844903650788114439" target="_blank" rel="" st:name="link" title="深入理解Java泛型" class="item" data-v-71f2d09e=""><div data-v-17139de4="" class="entry-title">深入理解Java泛型</div> <div data-v-17139de4="" class="entry-meta-box"><div data-v-17139de4="" class="entry-meta">204点赞</div> <div data-v-17139de4="" class="entry-meta">&nbsp;·&nbsp;</div> <div data-v-17139de4="" class="entry-meta">4评论</div></div></a><a data-v-17139de4="" href="https://juejin.cn/post/7166063196434857991" target="_blank" rel="" st:name="link" title="Swift：通过Protocol封装统和入参" class="item" data-v-71f2d09e=""><div data-v-17139de4="" class="entry-title">Swift：通过Protocol封装统和入参</div> <div data-v-17139de4="" class="entry-meta-box"><div data-v-17139de4="" class="entry-meta">24点赞</div> <div data-v-17139de4="" class="entry-meta">&nbsp;·&nbsp;</div> <div data-v-17139de4="" class="entry-meta">1评论</div></div></a><a data-v-17139de4="" href="https://juejin.cn/post/7141009567365726245" target="_blank" rel="" st:name="link" title="写点 SwiftUI: 不要再用 Gesture.onEnded(_:) 啦！" class="item" data-v-71f2d09e=""><div data-v-17139de4="" class="entry-title">写点 SwiftUI: 不要再用 Gesture.onEnded(_:) 啦！</div> <div data-v-17139de4="" class="entry-meta-box"><div data-v-17139de4="" class="entry-meta">4点赞</div> <div data-v-17139de4="" class="entry-meta">&nbsp;·&nbsp;</div> <div data-v-17139de4="" class="entry-meta">1评论</div></div></a></div></div></div> <div data-v-65597ac0="" class="sticky-block-box"><div data-v-71f2d09e="" data-v-65597ac0="" class="sidebar-block catalog-block catalog-block pure isExpand" style=""><nav data-v-21dfbf50="" class="article-catalog" data-v-71f2d09e="" style=""><div data-v-21dfbf50="" class="catalog-title">目录</div> <div data-v-21dfbf50="" class="catalog-body"><ul data-v-21dfbf50="" class="catalog-list" style="margin-top: 0px;"><li data-v-21dfbf50="" class="item d1"><div class="a-container"><a href="https://juejin.cn/post/7087517164046909448#heading-0" title="TLDR" class="catalog-aTag">
      TLDR
    </a></div> <!----></li><li data-v-21dfbf50="" class="item d1"><div class="a-container"><a href="https://juejin.cn/post/7087517164046909448#heading-1" title="SE-0335" class="catalog-aTag">
      SE-0335
    </a></div> <!----></li><li data-v-21dfbf50="" class="item d1 active"><div class="a-container"><a href="https://juejin.cn/post/7087517164046909448#heading-2" title="Existential Type" class="catalog-aTag">
      Existential Type
    </a></div> <!----></li><li data-v-21dfbf50="" class="item d1"><div class="a-container"><a href="https://juejin.cn/post/7087517164046909448#heading-3" title="protocol runtime" class="catalog-aTag">
      protocol runtime
    </a></div> <ul class="sub-list"><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/7087517164046909448#heading-4" title="内存布局" class="catalog-aTag">
      内存布局
    </a></div> <!----></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/7087517164046909448#heading-5" title="函数调用" class="catalog-aTag">
      函数调用
    </a></div> <!----></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/7087517164046909448#heading-6" title="实例管理" class="catalog-aTag">
      实例管理
    </a></div> <!----></li></ul></li><li data-v-21dfbf50="" class="item d1"><div class="a-container"><a href="https://juejin.cn/post/7087517164046909448#heading-7" title="泛型" class="catalog-aTag">
      泛型
    </a></div> <!----></li><li data-v-21dfbf50="" class="item d1"><div class="a-container"><a href="https://juejin.cn/post/7087517164046909448#heading-8" title="泛型特化后与 protocol 对象的运行时对比" class="catalog-aTag">
      泛型特化后与 protocol 对象的运行时对比
    </a></div> <ul class="sub-list"><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/7087517164046909448#heading-9" title="内存布局" class="catalog-aTag">
      内存布局
    </a></div> <!----></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/7087517164046909448#heading-10" title="函数调用/实例管理" class="catalog-aTag">
      函数调用/实例管理
    </a></div> <!----></li></ul></li><li data-v-21dfbf50="" class="item d1"><div class="a-container"><a href="https://juejin.cn/post/7087517164046909448#heading-11" title="总结" class="catalog-aTag">
      总结
    </a></div> <!----></li></ul></div></nav></div> <!----></div></div> <div data-v-fe76cb40="" data-v-1c9ebbff="" class="article-suspended-panel article-suspended-panel"><svg data-v-fe76cb40="" xmlns="http://www.w3.org/2000/svg" class="" style="display: none;"><symbol data-v-fe76cb40="" id="icon-collect" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path data-v-fe76cb40="" fill-rule="evenodd" clip-rule="evenodd" d="M5.24287 18.3845C4.89724 18.5507 4.48229 18.4053 4.31605 18.0596C4.26029 17.9437 4.23783 17.8146 4.25117 17.6866L4.75725 12.8332C4.77762 12.6379 4.71431 12.443 4.583 12.297L1.29207 8.63594C1.03567 8.35071 1.05905 7.91164 1.34428 7.65524C1.43464 7.574 1.54475 7.5179 1.66358 7.49254L6.47789 6.46509C6.66998 6.42409 6.83572 6.30367 6.93407 6.13365L9.39894 1.87248C9.59098 1.54049 10.0158 1.42704 10.3478 1.61907C10.453 1.67992 10.5403 1.76729 10.6012 1.87248L13.0661 6.13365C13.1644 6.30367 13.3301 6.42409 13.5222 6.46509L18.3365 7.49254C18.7116 7.57259 18.9508 7.94155 18.8707 8.31664C18.8454 8.43547 18.7893 8.54557 18.708 8.63594L15.4171 12.297C15.2858 12.443 15.2225 12.6379 15.2429 12.8332L15.7489 17.6866C15.7887 18.0681 15.5117 18.4096 15.1303 18.4493C15.0023 18.4627 14.8732 18.4402 14.7572 18.3845L10.3011 16.2412C10.1108 16.1497 9.8893 16.1497 9.69906 16.2412L5.24287 18.3845Z"></path></symbol><symbol data-v-fe76cb40="" id="icon-comment" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path data-v-fe76cb40="" fill-rule="evenodd" clip-rule="evenodd" d="M4.62739 1.25C2.9347 1.25 1.5625 2.6222 1.5625 4.31489L1.56396 12.643C1.56403 14.3356 2.9362 15.7078 4.62885 15.7078H6.48326L6.93691 17.6869L6.93884 17.6948C7.16894 18.6441 8.28598 19.0599 9.08073 18.4921L12.7965 15.7078H15.5001C17.1928 15.7078 18.565 14.3355 18.565 12.6428L18.5635 4.31477C18.5635 2.62213 17.1913 1.25 15.4986 1.25H4.62739ZM5.98265 9.89255C6.68783 9.89255 7.2595 9.32089 7.2595 8.61571C7.2595 7.91053 6.68783 7.33887 5.98265 7.33887C5.27747 7.33887 4.70581 7.91053 4.70581 8.61571C4.70581 9.32089 5.27747 9.89255 5.98265 9.89255ZM9.95604 9.89255C10.6612 9.89255 11.2329 9.32089 11.2329 8.61571C11.2329 7.91053 10.6612 7.33887 9.95604 7.33887C9.25086 7.33887 8.6792 7.91053 8.6792 8.61571C8.6792 9.32089 9.25086 9.89255 9.95604 9.89255ZM15.2124 8.61571C15.2124 9.32089 14.6407 9.89255 13.9355 9.89255C13.2304 9.89255 12.6587 9.32089 12.6587 8.61571C12.6587 7.91053 13.2304 7.33887 13.9355 7.33887C14.6407 7.33887 15.2124 7.91053 15.2124 8.61571Z"></path></symbol><symbol data-v-fe76cb40="" id="icon-zan" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path data-v-fe76cb40="" fill-rule="evenodd" clip-rule="evenodd" d="M13.0651 3.25923C12.6654 2.21523 12.1276 1.60359 11.4633 1.40559C10.8071 1.21 10.2539 1.48626 9.97848 1.67918C9.43962 2.05668 9.17297 2.64897 9.0009 3.12662C8.93522 3.30893 8.87504 3.50032 8.82077 3.67291L8.82077 3.67292C8.80276 3.73019 8.78541 3.78539 8.76872 3.8375C8.6974 4.06017 8.63455 4.23905 8.56561 4.38315C8.07104 5.41687 7.64014 6.034 7.2617 6.43277C6.89154 6.8228 6.5498 7.0275 6.18413 7.21038C5.8887 7.35813 5.69369 7.66144 5.69365 8.00211L5.69237 17.3908C5.6923 17.8783 6.08754 18.2736 6.57511 18.2736H14.8382C15.2621 18.2736 15.5829 18.1393 15.8149 17.9421C15.9234 17.8497 15.9985 17.7554 16.0484 17.6856C16.0695 17.6561 16.088 17.6282 16.0983 17.6126L16.1017 17.6075L16.1033 17.6051L16.1194 17.5857L16.1428 17.5478C16.913 16.3019 17.4472 15.3088 17.8659 14.1183C18.3431 12.7613 18.5849 11.5853 18.6874 10.6685C18.7871 9.77617 18.7612 9.07318 18.6558 8.68779C18.5062 8.14118 18.138 7.82653 17.7668 7.66617C17.4231 7.51771 17.0763 7.49836 16.8785 7.49807L13.1134 7.44551C13.662 5.19751 13.31 3.89889 13.0651 3.25923ZM1.251 8.0848C1.22726 7.5815 1.62891 7.16046 2.13277 7.16046H3.4408C3.92832 7.16046 4.32354 7.55568 4.32354 8.04321V17.4303C4.32354 17.9178 3.92832 18.313 3.4408 18.313H2.57554C2.10419 18.313 1.71599 17.9427 1.69378 17.4718L1.251 8.0848Z"></path></symbol><symbol data-v-fe76cb40="" id="icon-share" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path data-v-fe76cb40="" fill-rule="evenodd" clip-rule="evenodd" d="M10.4167 6.40399C5.35406 6.40399 1.25 10.5675 1.25 15.7035C1.25 16.0225 1.28448 16.4512 1.35344 16.9898C1.36807 17.1039 1.47243 17.1846 1.58655 17.17C1.6483 17.1621 1.70328 17.127 1.73643 17.0743L1.86865 16.8676C1.99553 16.6731 2.10644 16.5147 2.20137 16.3925C3.69554 14.4692 6.13777 13.3823 9.35515 13.3378L10.4167 13.3364V17.0757C10.4167 17.3101 10.6086 17.5 10.8453 17.5C10.959 17.5 11.068 17.4553 11.1483 17.3757L18.145 10.45C18.3961 10.2015 18.3961 9.79853 18.145 9.55L11.1483 2.62426C10.981 2.45858 10.7096 2.45858 10.5422 2.62426C10.4618 2.70383 10.4167 2.81174 10.4167 2.92426V6.40399Z"></path></symbol><symbol data-v-fe76cb40="" id="icon-report" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path data-v-fe76cb40="" fill-rule="evenodd" clip-rule="evenodd" d="M10.8389 1.89381C11.0873 2.03868 11.2939 2.24532 11.4388 2.49366L18.9369 15.0065C19.4007 15.8015 19.1322 16.8221 18.3371 17.2859C18.0822 17.4346 17.7924 17.5129 17.4973 17.5129H2.50041C1.57993 17.5129 0.83374 16.7667 0.83374 15.8462C0.83374 15.5512 0.912088 15.2614 1.06078 15.0065L8.5595 2.49366C9.0233 1.69857 10.0438 1.43001 10.8389 1.89381ZM10.3118 13.3459C10.6283 13.3459 10.8848 13.6025 10.8848 13.9189V14.4918C10.8848 14.8082 10.6283 15.0647 10.3118 15.0647H9.73893C9.42252 15.0647 9.16602 14.8082 9.16602 14.4918V13.9189C9.16602 13.6025 9.42252 13.3459 9.73893 13.3459H10.3118ZM10.8356 7.09513C10.8356 6.86502 10.6491 6.67847 10.419 6.67847H9.58512C9.35501 6.67847 9.16846 6.86502 9.16846 7.09513V12.0956C9.16846 12.3257 9.35501 12.5123 9.58512 12.5123H10.419C10.6491 12.5123 10.8356 12.3257 10.8356 12.0956V7.09513Z"></path></symbol><symbol data-v-fe76cb40="" id="icon-immerse" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path data-v-fe76cb40="" fill-rule="evenodd" clip-rule="evenodd" d="M0.25 1C0.25 0.585786 0.585786 0.25 1 0.25H4C4.41421 0.25 4.75 0.585786 4.75 1C4.75 1.41421 4.41421 1.75 4 1.75H1.75V4C1.75 4.41421 1.41421 4.75 1 4.75C0.585786 4.75 0.25 4.41421 0.25 4V1ZM0.25 19C0.25 19.4142 0.585786 19.75 1 19.75H4C4.41421 19.75 4.75 19.4142 4.75 19C4.75 18.5858 4.41421 18.25 4 18.25H1.75V16C1.75 15.5858 1.41421 15.25 1 15.25C0.585786 15.25 0.25 15.5858 0.25 16V19ZM19 0.25C19.4142 0.25 19.75 0.585786 19.75 1V4C19.75 4.41421 19.4142 4.75 19 4.75C18.5858 4.75 18.25 4.41421 18.25 4V1.75H16C15.5858 1.75 15.25 1.41421 15.25 1C15.25 0.585786 15.5858 0.25 16 0.25H19ZM19.75 19C19.75 19.4142 19.4142 19.75 19 19.75H16C15.5858 19.75 15.25 19.4142 15.25 19C15.25 18.5858 15.5858 18.25 16 18.25H18.25V16C18.25 15.5858 18.5858 15.25 19 15.25C19.4142 15.25 19.75 15.5858 19.75 16V19ZM7 5C5.89543 5 5 5.89543 5 7V13C5 14.1046 5.89543 15 7 15H13C14.1046 15 15 14.1046 15 13V7C15 5.89543 14.1046 5 13 5H7Z"></path></symbol><symbol data-v-fe76cb40="" id="icon-wechat" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path data-v-fe76cb40="" fill-rule="evenodd" clip-rule="evenodd" d="M13.5578 5.34061C12.0476 2.85722 8.90911 1.73257 6.11813 2.05358C4.56413 2.23231 3.0449 2.85861 1.88463 3.92471C1.00689 4.72863 0.354462 5.78486 0.109889 6.95889C-0.187864 8.37395 0.125815 9.85314 0.957723 11.0298C1.28982 11.4994 1.68479 11.9193 2.11951 12.2941C2.25136 12.4079 2.38694 12.5172 2.52543 12.6228C2.59301 12.6742 2.66115 12.7249 2.73011 12.7745C2.74195 12.7831 2.75392 12.7902 2.76512 12.7969C2.80389 12.8201 2.83351 12.8378 2.81653 12.8887L2.67458 13.3177C2.53986 13.7252 2.40492 14.1325 2.26998 14.5399C2.22084 14.6883 2.17169 14.8366 2.12256 14.985L2.61572 14.7368C2.85714 14.6151 3.09863 14.4935 3.34012 14.3719C3.58099 14.2507 3.82186 14.1294 4.06266 14.0081L4.40902 13.8337C4.42474 13.8257 4.44104 13.8164 4.45775 13.8069C4.51759 13.7728 4.58265 13.7356 4.64501 13.7481C4.76613 13.7723 4.88708 13.7972 5.00801 13.8221C5.08094 13.8372 5.15386 13.8522 5.22681 13.867C6.06287 14.0373 6.88508 14.1348 7.73859 14.0675C7.4486 13.0669 7.44915 12.0016 7.7559 11.0045C8.09853 9.88624 8.81438 8.89831 9.74448 8.19773C11.0171 7.23915 12.6431 6.81493 14.2212 6.99199C14.0895 6.4081 13.8688 5.85148 13.5578 5.34061ZM4.77922 5.02147C4.28094 5.02147 3.71299 5.35514 3.71299 5.90829C3.71299 6.46088 4.28066 6.79844 4.77922 6.79844C5.29233 6.79844 5.66293 6.42291 5.66293 5.90829C5.66293 5.39311 5.29205 5.02147 4.77922 5.02147ZM10.6158 5.90829C10.6158 6.42444 10.2434 6.79844 9.7296 6.79844C9.23076 6.79844 8.66641 6.46032 8.66641 5.90829C8.66641 5.3557 9.23104 5.02147 9.7296 5.02147C10.2431 5.02147 10.6158 5.39158 10.6158 5.90829ZM17.7911 8.53846C15.3552 6.80489 11.734 6.93368 9.53048 9.01108C8.77779 9.72181 8.22909 10.6485 8.04061 11.6744C7.78288 13.0799 8.22536 14.5441 9.17304 15.605C10.0674 16.6063 11.2889 17.2564 12.5986 17.5166C13.4216 17.6806 14.2559 17.6931 15.0799 17.5344C15.2863 17.4948 15.4911 17.4481 15.6954 17.3986C15.7826 17.3774 15.8697 17.3559 15.9568 17.334C15.9655 17.3319 15.9784 17.3272 15.9934 17.3219C16.0359 17.3068 16.0949 17.2858 16.118 17.2984C16.2476 17.3695 16.3771 17.4408 16.5066 17.5122L17.0557 17.8142L17.0577 17.8153L17.0598 17.8164C17.3912 17.9986 17.7227 18.1809 18.054 18.3634C17.9748 18.0977 17.895 17.832 17.8153 17.5664L17.8146 17.5641L17.6749 17.0981L17.5814 16.7863L17.5332 16.6257C17.5159 16.5675 17.5927 16.5183 17.6556 16.4779C17.6753 16.4653 17.6937 16.4535 17.7073 16.4426C18.0608 16.1622 18.3952 15.8558 18.6963 15.5191C19.1832 14.9747 19.5895 14.3498 19.8161 13.6505C20.0122 13.039 20.0488 12.392 19.9377 11.7604C19.7098 10.438 18.8643 9.30511 17.7911 8.53846ZM15.2396 11.0049C15.1595 10.6088 15.5334 10.1787 15.931 10.1787C16.3063 10.1787 16.7409 10.3931 16.8096 10.7989C16.8724 11.1695 16.556 11.4696 16.227 11.5617C15.8032 11.6802 15.3326 11.4649 15.2396 11.0049ZM12.0348 10.1787C11.6369 10.1787 11.2573 10.6064 11.3385 11.0049C11.4325 11.4667 11.9081 11.68 12.3327 11.5617C12.6626 11.4696 12.9753 11.1695 12.9134 10.7989C12.8453 10.3914 12.4112 10.1787 12.0348 10.1787Z"></path></symbol><symbol data-v-fe76cb40="" id="icon-weibo" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path data-v-fe76cb40="" fill-rule="evenodd" clip-rule="evenodd" d="M-0.000244141 13.0984C-0.000244141 8.70757 6.6145 3.5004 9.18008 4.57052C10.1717 4.98415 9.97381 6.1693 9.85415 6.88576C9.8069 7.16863 9.77186 7.37844 9.82705 7.43887C9.92921 7.55074 10.2955 7.42054 10.7994 7.2414C11.8362 6.87286 13.4557 6.2972 14.5566 7.19617C15.2665 7.77576 14.9657 8.72382 14.7905 9.27603C14.7289 9.4701 14.6829 9.61528 14.7017 9.6784C14.741 9.81053 14.9858 9.91133 15.317 10.0477C15.926 10.2984 16.8269 10.6692 17.2784 11.5759C18.3716 13.7713 15.2036 18.2504 8.62234 18.2504C3.25024 18.2504 -0.000244141 15.6688 -0.000244141 13.0984ZM8.45309 17.057C11.7733 16.7393 14.2944 14.7397 14.0842 12.5908C13.874 10.4418 11.012 8.95732 7.69179 9.27503C4.37159 9.59274 1.85045 11.5924 2.06068 13.7413C2.2709 15.8902 5.13288 17.3747 8.45309 17.057Z"></path><path data-v-fe76cb40="" fill-rule="evenodd" clip-rule="evenodd" d="M10.7098 12.7012C11.1162 14.1374 10.0604 15.6852 8.35157 16.1581C6.64275 16.6311 4.92801 15.8502 4.5216 14.4139C4.11518 12.9777 5.171 11.4299 6.87982 10.957C8.58865 10.484 10.3034 11.2649 10.7098 12.7012ZM7.67026 13.6265C7.89619 14.1072 7.61751 14.7092 7.04779 14.9711C6.47808 15.2331 5.83308 15.0558 5.60715 14.5751C5.38122 14.0945 5.6599 13.4925 6.22962 13.2306C6.79933 12.9686 7.44433 13.1459 7.67026 13.6265ZM8.41746 13.3766C8.63945 13.2745 8.74804 13.0399 8.66001 12.8526C8.57197 12.6654 8.32065 12.5963 8.09866 12.6984C7.87667 12.8004 7.76808 13.035 7.85612 13.2223C7.94415 13.4095 8.19547 13.4786 8.41746 13.3766Z"></path><path data-v-fe76cb40="" d="M13.648 3.54836C13.9523 3.47388 14.2712 3.43418 14.6004 3.43418C16.7813 3.43418 18.5492 5.18267 18.5492 7.33955C18.5492 7.81593 18.4633 8.27085 18.3066 8.69104C18.168 9.06261 18.3602 9.47493 18.7359 9.61199C19.1116 9.74904 19.5285 9.55894 19.6671 9.18737C19.8822 8.61063 19.9993 7.98781 19.9993 7.33955C19.9993 4.3906 17.5822 2 14.6004 2C14.1528 2 13.717 2.05403 13.2996 2.15619C12.9109 2.25133 12.6738 2.64011 12.77 3.02455C12.8662 3.40899 13.2593 3.6435 13.648 3.54836Z"></path><path data-v-fe76cb40="" d="M14.2887 6.05162C14.388 6.02824 14.4923 6.01569 14.6004 6.01569C15.3397 6.01569 15.939 6.6084 15.939 7.33955C15.939 7.49914 15.9108 7.65062 15.8596 7.7904C15.7232 8.16277 15.9179 8.57396 16.2944 8.70881C16.6709 8.84366 17.0867 8.65112 17.2231 8.27875C17.3307 7.98466 17.3891 7.66805 17.3891 7.33955C17.3891 5.81633 16.1406 4.58152 14.6004 4.58152C14.3784 4.58152 14.1614 4.60734 13.9529 4.65643C13.5633 4.74813 13.3227 5.1348 13.4154 5.52008C13.5082 5.90535 13.8991 6.14333 14.2887 6.05162Z"></path></symbol><symbol data-v-fe76cb40="" id="icon-qq" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path data-v-fe76cb40="" d="M11.8841 17.1943C11.1815 17.1943 10.5625 17.2136 10.0541 17.26C9.44625 17.2112 8.8365 17.1898 8.22671 17.1956C6.20498 17.1956 4.40588 17.9613 4.40588 18.5263C4.40588 19.0681 5.89998 19.0076 7.91657 18.987C8.64426 18.985 9.3699 18.9096 10.0824 18.7618C10.6796 18.8879 11.4079 18.9677 12.193 18.9741C14.2095 18.9947 15.7024 19.0552 15.7024 18.5173C15.7024 17.9549 13.9045 17.1943 11.8841 17.1943V17.1943Z"></path><path data-v-fe76cb40="" d="M16.9138 11.6311C16.5346 10.6112 16.1212 9.60428 15.6745 8.61206C15.6951 8.37141 15.7054 8.12818 15.7054 7.8811C15.7054 4.08086 13.7622 1 10.0649 1C6.36759 1 4.42307 4.08086 4.42307 7.8811C4.42307 8.11274 4.43208 8.34052 4.45138 8.56573C3.99804 9.5756 3.57913 10.6006 3.19536 11.6389C2.41678 13.7494 2.38203 15.6566 2.65357 15.7982C2.84661 15.8985 3.54797 15.1611 4.21845 13.9669C4.66115 16.7801 6.53102 18.8842 10.0649 18.8842C13.5871 18.8842 15.457 16.7916 15.9074 13.99C16.5728 15.1611 17.2664 15.8818 17.4569 15.7814C17.7284 15.6399 17.6937 13.7365 16.9138 11.6311V11.6311Z"></path><path data-v-fe76cb40="" d="M8.5542 3.2522C8.00598 3.26507 7.57358 3.90981 7.58902 4.69739C7.60447 5.48369 8.06132 6.11299 8.60954 6.1027C9.15776 6.0924 9.59016 5.44637 9.57472 4.65879C9.56056 3.87249 9.10243 3.24319 8.5542 3.25348V3.2522ZM11.5862 3.26764C11.0315 3.25734 10.5695 3.88278 10.5541 4.66651C10.5386 5.44895 10.9749 6.0924 11.5308 6.1027C12.0842 6.11299 12.5475 5.48755 12.5629 4.70512C12.5784 3.92139 12.1408 3.27794 11.5862 3.26764V3.26764Z"></path><path data-v-fe76cb40="" d="M13.6704 9.57861C12.5971 9.76521 11.354 9.87074 10.0285 9.87074C8.7287 9.87074 7.50742 9.76779 6.44959 9.58762C5.71605 10.4962 5.65942 11.8307 5.65942 13.3184C5.65942 16.0505 7.20371 18.2665 10.0645 18.2665C12.924 18.2665 14.4696 16.0505 14.4696 13.3184C14.4696 11.8243 14.4104 10.4859 13.6704 9.57861V9.57861Z"></path><path data-v-fe76cb40="" d="M10.0628 6.56616C8.14273 6.56616 6.58557 6.95223 6.58557 7.26238C6.58557 7.57124 8.62146 8.42188 10.0641 8.42188C11.5054 8.42188 13.5413 7.55065 13.5413 7.26238C13.5413 6.97411 11.9842 6.56745 10.0641 6.56745L10.0628 6.56616Z"></path><path data-v-fe76cb40="" d="M15.6744 8.6121L15.6757 8.59151C14.264 9.05866 12.2718 9.35078 10.0648 9.35078C7.8513 9.35078 5.85402 9.05737 4.441 8.58765C4.14115 9.25684 3.85546 9.93375 3.58521 10.6171C4.45644 10.9054 5.43192 11.1357 6.48332 11.2992V13.8858C6.48332 13.8858 7.22715 14.0235 7.92981 14.0531C8.42784 14.0737 8.95676 13.9888 8.95676 13.9888V11.5398C9.32095 11.5565 9.6903 11.5656 10.0635 11.5656C12.4919 11.5656 14.7311 11.2142 16.5251 10.6222C16.2566 9.94593 15.9729 9.27571 15.6744 8.6121V8.6121Z"></path><path data-v-fe76cb40="" d="M8.87981 4.24829C8.63787 4.24829 8.44226 4.53656 8.44226 4.89174C8.44226 5.24693 8.63787 5.5352 8.87981 5.5352C9.12046 5.5352 9.31736 5.24693 9.31736 4.89174C9.31736 4.53656 9.12046 4.24829 8.87981 4.24829V4.24829ZM12.0997 4.65624C12.0997 4.65624 11.9246 4.41816 11.4819 4.48122C11.0444 4.54428 10.8745 4.83126 10.8423 4.86215C10.8423 4.86215 10.7381 5.0243 10.8115 5.12467C10.8848 5.22505 11.0174 5.06676 11.0174 5.06676C11.0174 5.06676 11.2194 4.78364 11.4806 4.77335C11.6273 4.76349 11.7729 4.80489 11.8925 4.89046C11.8925 4.89046 12.0211 4.99856 12.0984 4.89046C12.1769 4.78364 12.0997 4.65624 12.0997 4.65624V4.65624Z"></path></symbol></svg> <div data-v-fe76cb40="" badge="39" class="panel-btn active with-badge"><svg data-v-0f838daa="" data-v-fe76cb40="" class="sprite-icon icon-zan"><use data-v-0f838daa="" xlink:href="#icon-zan"></use></svg></div> <div data-v-fe76cb40="" badge="9" class="panel-btn with-badge"><svg data-v-0f838daa="" data-v-fe76cb40="" class="sprite-icon icon-comment"><use data-v-0f838daa="" xlink:href="#icon-comment"></use></svg></div> <div data-v-fe76cb40="" class="panel-btn"><svg data-v-0f838daa="" data-v-fe76cb40="" class="sprite-icon icon-collect"><use data-v-0f838daa="" xlink:href="#icon-collect"></use></svg> <div data-v-d0b73df6="" data-v-fe76cb40="" class="collect-popover"><div data-v-d0b73df6="" class="title">收藏成功！</div> <div data-v-d0b73df6="" class="sub-title">
    已添加到「」，
    <span data-v-d0b73df6="" class="modify-btn">点击更改</span></div></div> <!----> <!----></div> <div data-v-fe76cb40="" class="share-btn panel-btn"><svg data-v-0f838daa="" data-v-fe76cb40="" class="sprite-icon icon-share"><use data-v-0f838daa="" xlink:href="#icon-share"></use></svg> <div data-v-fe76cb40="" class="share-popup"><ul data-v-fe76cb40=""><li data-v-fe76cb40="" class="share-item wechat"><svg data-v-0f838daa="" data-v-fe76cb40="" class="sprite-icon share-icon icon-wechat"><use data-v-0f838daa="" xlink:href="#icon-wechat"></use></svg> <span data-v-fe76cb40="" class="share-item-title">微信</span> <div data-v-fe76cb40="" class="wechat-qrcode"><img data-v-fe76cb40="" src="https://juejin.cn/post/7087517164046909448" class="wechat-qrcode-img" style="display: none;"> <span data-v-fe76cb40="" class="wechat-qrcode-title">微信扫码分享</span></div></li> <li data-v-fe76cb40="" class="share-item weibo"><svg data-v-0f838daa="" data-v-fe76cb40="" class="sprite-icon share-icon icon-weibo"><use data-v-0f838daa="" xlink:href="#icon-weibo"></use></svg> <span data-v-fe76cb40="" class="share-item-title">新浪微博</span></li> <li data-v-fe76cb40="" class="share-item qq"><svg data-v-0f838daa="" data-v-fe76cb40="" class="sprite-icon share-icon icon-qq"><use data-v-0f838daa="" xlink:href="#icon-qq"></use></svg> <span data-v-fe76cb40="" class="share-item-title">QQ</span></li></ul></div></div> <div data-v-fe76cb40="" class="divider"></div> <div data-v-fe76cb40="" class="panel-btn"><svg data-v-0f838daa="" data-v-fe76cb40="" class="sprite-icon icon-report"><use data-v-0f838daa="" xlink:href="#icon-report"></use></svg></div> <span data-v-fe76cb40="" class="tooltip"><span class="byte-tooltip__wrapper"><div data-v-fe76cb40="" class="panel-btn"><svg data-v-0f838daa="" data-v-fe76cb40="" class="sprite-icon icon-immerse"><use data-v-0f838daa="" xlink:href="#icon-immerse"></use></svg></div></span></span></div></div> <!----></main> <!----></div> <!----> <div class="global-component-box"><div data-v-262fe4c6="" class="alert-list alert-list"></div> <div data-v-0b2d23d8="" class="suspension-panel suspension-panel"><!----> <button data-v-0b2d23d8="" title="回到顶部" class="btn to-top-btn" style=""><svg data-v-0b2d23d8="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-0b2d23d8="" fill-rule="evenodd" clip-rule="evenodd" d="M2.75 1C2.33579 1 2 1.33579 2 1.75C2 2.16421 2.33579 2.5 2.75 2.5H13.25C13.6642 2.5 14 2.16421 14 1.75C14 1.33579 13.6642 1 13.25 1H2.75ZM7.24407 3.87287C7.64284 3.41241 8.35716 3.41241 8.75593 3.87287L13.0622 8.84535C13.6231 9.49299 13.163 10.5 12.3063 10.5H10V14C10 14.5523 9.55228 15 9 15H7C6.44772 15 6 14.5523 6 14V10.5H3.69371C2.83696 10.5 2.37691 9.49299 2.93778 8.84535L7.24407 3.87287Z" fill="#8A919F"></path></svg></button> <button data-v-0b2d23d8="" title="建议反馈" class="btn meiqia-btn" style=""><svg data-v-0b2d23d8="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-feedback"><path data-v-0b2d23d8="" fill-rule="evenodd" clip-rule="evenodd" d="M1.8252 4.002C1.8252 2.80032 2.79935 1.82617 4.00102 1.82617H12.001C13.2027 1.82617 14.1768 2.80032 14.1768 4.002V9.71628C14.1768 10.918 13.2027 11.8921 12.001 11.8921H9.43308L6.92709 14.1281C6.4455 14.5578 5.68234 14.216 5.68234 13.5706V11.8921H4.00102C2.79934 11.8921 1.8252 10.918 1.8252 9.71628V4.002ZM11.2414 7.86753C11.3826 7.65526 11.3249 7.36878 11.1126 7.22764C10.9004 7.08651 10.6139 7.14417 10.4728 7.35643C9.94042 8.15705 9.03153 8.68309 7.99997 8.68309C6.96841 8.68309 6.05952 8.15705 5.52719 7.35643C5.38605 7.14417 5.09957 7.08651 4.88731 7.22764C4.67504 7.36878 4.61738 7.65526 4.75852 7.86753C5.45467 8.91452 6.64645 9.60617 7.99997 9.60617C9.35349 9.60617 10.5453 8.91452 11.2414 7.86753Z" fill="#1E80FF"></path></svg></button></div> <!----> <!----> <!----> <!----> <!----></div> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----></div></div></div><script>window.__NUXT__=(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F){q.loading=a;q.skeleton=b;q.cursor=f;q.data=[];q.total=d;q.hasMore=b;return {layout:"default",data:[{renderPost:b,additionalDataUseCSR:b}],fetch:[{bdPageUrlForNav:"https:\u002F\u002Fbd.juejin.cn?utm_campaign=bd&utm_source=web&utm_medium=nav",queryString:e,isShowUserDropdownList:a,isShowAddMoreList:a,isFocus:a,isPhoneMenuShow:a,visibleBadge:a,placeholder:e,hiddenProperty:"hidden",searchHistoryVisible:a,searchHistoryItems:[],tabBadge:c,isChangePlaceholder:b,showMallBridge:a},{articleBanner:{url:"https:\u002F\u002Fjuejin.cn\u002Fextension\u002F?utm_source=standalone&utm_medium=post&utm_campaign=extension_promotion",title:"安装掘金浏览器插件",content:"多内容聚合浏览、多引擎快捷搜索、多工具便捷提效、多模式随心畅享，你想要的，这里都有！"},showExtension:b}],error:c,state:{view:{activityIndex:{activityList:[],pageInfo:{hasNextPage:a,endCursor:e},afterPosition:e,activityListIsLoading:b,activityListIsError:a,userActivityList:[],placeholder:e,actionType:{FETCH:"@\u002Fview\u002Factivity-index\u002FFETCH",FETCH_RECOMMEND_LIST:"@\u002Fview\u002Factivity-index\u002FFETCH_RECOMMEND_LIST",RESET_ACTIVITY_LIST:"@\u002Fview\u002Factivity-index\u002FRESET_ACTIVITY_LIST",FETCH_USER_ACTIVITY_LIST:"@\u002Fview\u002Factivity-index\u002FFETCH_USER_ACTIVITY_LIST",FETCH_NEW_COUNT:"@\u002Fview\u002Factivity-index\u002FFETCH_NEW_COUNT",DELETE_ACTIVITY:"@\u002Fview\u002Factivity-index\u002FDELETE_ACTIVITY",TOGGLE_FOLLOW_USER:"@\u002Fview\u002Factivity-index\u002FTOGGLE_FOLLOW_USER",FETCH_ENTRY_COMMENT_LIST:"@\u002Fview\u002Factivity-index\u002FFETCH_ENTRY_COMMENT_LIST",UPDATE_LIST_LOADING:"@\u002Fview\u002Factivity-index\u002FUPDATE_LIST_LOADING",RESET:"@\u002Fview\u002Factivity-index\u002FRESET"},hotList:{list:[],after:e,loading:a,hasNextPage:a,actionType:{UPDATE_STATE:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FFETCH",RESET:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FRESET"}},sidebar:{bannerList:[],actionType:{RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002FRESET",UPDATE_STATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002FUPDATE_STATE",FETCH_BANNER:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002FFETCH_BANNER"},recommend:{pageSize:h,page:d,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FUPDATE",FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FFETCH_MORE",RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FRESET"},after:d},followed:{pageSize:h,page:d,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FUPDATE",FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FFETCH_MORE",RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FRESET"},after:d},recommendPin:{list:[],after:e,loading:a,hasNextPage:b,actionType:{UPDATE_STATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FFETCH",RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FRESET"}}},topicPinList:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FUPDATE",FETCH:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FFETCH_MORE",RESET:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FRESET"},topicId:e,navList:[{type:k,name:k,title:"推荐 ",id:k},{type:m,name:m,title:"热门 ",id:m},{type:o,name:o,title:"关注 ",id:o},{type:i,name:"opensource",title:"开源推荐 ",id:"5c09ea2b092dcb42c740fe73"},{type:i,name:"recruitment",title:"内推招聘",id:"5abb61e1092dcb4620ca3322"},{type:i,name:"dating",title:"掘金相亲",id:"5abcaa67092dcb4620ca335c"},{type:i,name:"slacking",title:"上班摸鱼",id:"5c106be9092dcb2cc5de7257"},{type:i,name:"app",title:"应用安利",id:"5b514af1092dcb61bd72800d"},{type:i,name:"tool",title:"开发工具",id:"5abb67d2092dcb4620ca3324"},{type:i,name:"news",title:"New资讯",id:"5c46a17f092dcb4737217152"}],sortType:p}},search:{search_result_from:d,query:e,list:[],linkList:[],loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fsearch\u002FFETCH",FETCH_MORE:"@\u002Fview\u002Fsearch\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fsearch\u002FRESET"}},columnIndex:{list:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FRESET"},sort:n,category:"all"},hotList:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FUPDATE",FETCH:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FFETCH_MORE",RESET:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FRESET"}}},timelineIndex:{tdkTemplates:[],categoryNavList:[],tagNavList:[],splitTagList:[],timelineAdList:[],list:[],sort:p,category:k,categoryId:e,tagId:e,tag:"全部",actionType:{FETCH_TIMELINE_LIST:"@\u002Fview\u002FtimelineIndex\u002FFETCH_TIMELINE_LIST",FETCH_CATEGORY_LIST:"@\u002Fview\u002FtimelineIndex\u002FFETCH_CATEGORY_LIST",FETCH_TAG_LIST:"@\u002Fview\u002FtimelineIndex\u002FFETCH_TAG_LIST",DELETE_ENTRY:"@\u002Fview\u002FtimelineIndex\u002FDELETE_ENTRY",DELETE_USER_ENTRIES:"@\u002Fview\u002FtimelineIndex\u002FDELETE_USER_ENTRIES",DELETE_TAG_ENTRIES:"@\u002Fview\u002FtimelineIndex\u002FDELETE_TAG_ENTRIES",FETCH_MORE:"@\u002Fview\u002FtimelineIndex\u002FFETCH_MORE",FETCH:"@\u002Fview\u002FtimelineIndex\u002FFETCH",RESET:"@\u002Fview\u002FtimelineIndex\u002FRESET"},serverRenderTimelineList:a,timelineList:{list:[],cursor:f,skeleton:b,loading:a,hasMore:b,categoryId:e,tagId:e,sort:e,actionType:{UPDATE_STATE:"timeline-list\u002FUPDATE_STATE",FETCH_MORE:"timeline-list\u002FFETCH_MORE",FETCH:"timeline-list\u002FFETCH",RESET:"timeline-list\u002FRESET"}},recommendList:{list:[],cursor:f,loading:a,skeleton:b,hasMore:b,actionType:{UPDATE_STATE:"recommend-list\u002FUPDATE_STATE",FETCH_MORE:"recommend-list\u002FFETCH_MORE",FETCH:"recommend-list\u002FFETCH",RESET:"recommend-list\u002FRESET"}},followingList:{list:[],cursor:f,skeleton:b,loading:a,hasMore:b,actionType:{UPDATE_STATE:"following-list\u002FUPDATE_STATE",FETCH_MORE:"following-list\u002FFETCH_MORE",FETCH:"following-list\u002FFETCH",RESET:"following-list\u002FRESET"}}},subscribe:{subscribed:{list:[],cursor:f,skeleton:b,loading:a,hasMore:a,actionType:{UPDATE_STATE:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FUPDATE_STATE",FETCH_MORE:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FFETCH_MORE",FETCH:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FFETCH",RESET:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FRESET"}},all:{list:[],cursor:f,loading:a,skeleton:b,hasMore:a,linkList:e,actionType:{UPDATE_STATE:"view\u002Fsubscribe\u002Fall\u002Flist\u002FUPDATE_STATE",FETCH_MORE:"view\u002Fsubscribe\u002Fall\u002Flist\u002FFETCH_MORE",FETCH:"view\u002Fsubscribe\u002Fall\u002Flist\u002FFETCH",RESET:"view\u002Fsubscribe\u002Fall\u002Flist\u002FRESET"}}},entryPublic:{entry:{user:{}},relatedEntryList:[],relatedCollectionList:[],actionType:{FETCH:"@\u002Fview\u002FentryPublic\u002FFETCH",RESET:"@\u002Fview\u002FentryPublic\u002FRESET"}},user:{user:{},serverRendered:a,userAnnuals:[],actionType:{FETCH:"@\u002Fview\u002Fuser\u002FFETCH",RESET:"@\u002Fview\u002Fuser\u002FRESET",UPDATE:"@\u002Fview\u002Fuser\u002FUPDATE",FETCH_ANNUALS:"@\u002Fview\u002Fuser\u002FFETCH_ANNUALS"},detailList:{actionType:{RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FRESET"},likeList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FRESET"}},postList:{list:[],hasMore:a,skeleton:a,loading:a,sort:n,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FRESET"}},searchList:{list:[],hasMore:a,skeleton:a,loading:a,key_word:e,search_type:d,cursor:f,isPostSearch:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FRESET"}},tagList:{list:[],loading:a,skeleton:b,hasMore:a,cursor:f,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FRESET"}},collectionList:{list:[],userId:e,skeleton:b,hasMore:a,cursor:f,type:"created",loading:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FRESET",TOGGLE_FOLLOW_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FTOGGLE_FOLLOW_COLLECTION",FOLLOW_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FFOLLOW_COLLECTION",UNFOLLOW_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FUNFOLLOW_COLLECTION",DELELTE_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FDELELTE_COLLECTION",ADD_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FADD_COLLECTION",EDIT_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FEDIT_COLLECTION"}},followerList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FRESET"}},followingList:{list:[],cursor:f,hasMore:a,skeleton:a,loading:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FRESET"}},followingTeamsList:{list:[],cursor:f,hasMore:a,skeleton:a,loading:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FRESET"}},activityList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FRESET"}},bookList:{list:[],cursor:f,skeleton:b,hasMore:a,loading:a,type:"wrote",actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FRESET"}},pinList:{list:[],hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FRESET"}},courseList:{list:[],hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FRESET"}},pinPraisedList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FRESET"}},eventList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FRESET"}},selfColumnList:{list:[],hasMore:a,skeleton:a,loading:a,cursor:f,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FRESET"}},columnFollowedList:{list:[],hasMore:a,skeleton:a,loading:a,cursor:f,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FRESET",FILTER:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FFILTER"}},realtimes:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FRESET",DELETE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FDELETE"}},realtimeliked:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FRESET",DELETE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FDELETE"}}}},tag:{tag:{},actionType:{FETCH:"@\u002Fview\u002Ftag\u002FFETCH",FETCH_LIST:"@\u002Fview\u002Ftag\u002FFETCH_LIST",RESET:"@\u002Fview\u002Ftag\u002FRESET"},list:{list:[],cursor:f,loading:a,skeleton:a,hasMore:a,actionType:{UPDATE_STATE:"@\u002Fview\u002Ftag\u002Flist\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Ftag\u002Flist\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Ftag\u002Flist\u002FFETCH",RESET:"@\u002Fview\u002Ftag\u002Flist\u002FRESET"}}},notification:{user:{actionType:{READ_ALL:"@\u002Fview\u002Fnotification\u002Fuser\u002FREAD_ALL",RESET:"@\u002Fview\u002Fnotification\u002Fuser\u002FRESET"},listState:{list:[],cursor:f,hasMore:a,isLoading:a,messageType:3,msgTotal:d,msgSubMap:{"1":d,"2":d,"3":d,"4":d,"7":d}},list:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FRESET"}}},system:{actionType:{READ_ALL:"@\u002Fview\u002Fnotification\u002Fsystem\u002FREAD_ALL",RESET:"@\u002Fview\u002Fnotification\u002Fsystem\u002FRESET"},list:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FRESET"}}}},column:{serverRenderList:a,column:{id:w},entry:{id:w,screenshot:void 0,liked:a,article_id:w,article_info:{article_id:w,user_id:"1750078240329479",category_id:"6809635626661445640",tag_ids:[6809640399544517000],visible_level:d,link_url:e,cover_image:e,is_gfw:d,title:"写点 Swift: 为什么你需要使用泛型而不是 protocol",brief_content:"在 Swift 中，在没有类型抹除需求的前提下使用泛型会比直接使用 protocol 有更好的运行时性能表现。",is_english:d,is_original:g,user_index:8.69707517144841,original_type:d,original_author:e,content:e,ctime:"1650191231",mtime:"1650240460",rtime:"1650204685",draft_id:"7087516947029426207",view_count:5978,collect_count:52,digg_count:38,comment_count:9,hot_index:345,is_hot:d,rank_index:.00313517,status:l,verify_status:g,audit_status:l,mark_content:"欢迎大家关注我的微信公众号：小林居酒屋\n## TLDR\n\n在 Swift 中，在没有类型抹除需求的前提下使用泛型会比直接使用 `protocol` 有更好的运行时性能表现。\n\n```swift\nprotocol Foo { }\n\u002F\u002F ❌\nstruct Hello {\n  let foo: Foo\n}\n\u002F\u002F ⭕️\nstruct World\u003CT: Foo\u003E {\n  let foo: T\n}\n```\n\n## SE-0335\n\nSwift 5.6 又有一堆鲜滚热辣的 feature 出炉，其中又以 [SE-0335](https:\u002F\u002Fgithub.com\u002Fapple\u002Fswift-evolution\u002Fblob\u002Fmain\u002Fproposals\u002F0335-existential-any.md) 最为重要。\n\nSE-0335 带来了一个全新的关键字 `any` （注意不是 `Any`, `AnyObject`）:\n\n```swift\nprotocol Foo { }\nstruct Hello {\n  let foo: any Foo\n}\nfunc foo(_: any Foo) { }\n```\n\n所有的 **Existential types** 用 `any` 这个关键字修饰。在 Swift 5.6 中，`any` 可以使用，不添加此关键字的 `protocol` 对象会出现 warning. 在即（yao）将（yao）到（wu）来（qi）的 Swift 6.0 中，`any`  将被强制要求。\n\n从实现 [PR-40282](https:\u002F\u002Fgithub.com\u002Fapple\u002Fswift\u002Fpull\u002F40282) 来看，主要添加了编译期检查，没有发现编译后\u002F运行时有什么较大的改变。\n\n语言通常都是朝着更简洁更抽象的方向去迭代，但这个 proposal 的唯一工作就是给原本简洁明了的 `protocol` 对象强制塞上了一个新造的关键字，阿果你是不是工作量不饱和，还想让我们饱和！\n\n但如果仔细看提案的 Motivation，里面详细阐述了动机:\n\n\u003E The cost of using existential types should not be hidden, and programmers should explicitly opt into these semantics.\n\n**Existential types** 的运行时成本不可被忽略，通过显著提高直接使用 **Existential types** 的成本的方式，让开发者只有在必要时才使用。\n\n## Existential Type\n\n[Existential Type](https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FType_system#Existential_types) 在类型系统中，描述了一个抽象类型的接口。这个名称源于 Existential Quantification （存在量词， 数学符号 ∃ ）这个概念。既存在一种特定的类型，但在上下文中并不能理解其的真正具体类型。例如：\n\n```c\nT = ∃X { a: X; f: (X → int); }\n```\n\n这表示了一种类型 `T`，描述了一个模块接口，它表明了存在一种类型 `X`，有一个名为`a` 的 `X` 类型的数据成员和一个名为 `f` 的函数，该函数接收一个相同类型的 `X` 的参数并返回一个整数。`X` 的具体类型可以有不同的实现，如\n\n```c\nintT = { a: int; f: (int → int); }\nfloatT = { a: float; f: (float → int); }\n```\n\n在 Swift 中，这种概念由 `protocol` 对象进行具像化（在一些别的语言中，对象被限定为 `class` 的一个实例，但 Swift 的对象概念非常广泛，可以是 `struct`, `enum`, `class`, `protocol` 或者一个 `closures`。这又是另外一个话题了）。\n\nSwift 引入了 Existential Container, Protocol Witness Table, Value Witness Table 三种技术来解决 Reference type, Value type 的类型抹除和多态问题。\n\n## protocol runtime\n\n当开发者存储或者传递一个 `protocol` 时，其遵循该 `protocol` 的特定真实类型在编译器时还无法确定，只有在运行时才能获取真实类型。那么我们需要一些额外的运行时手段来解决存储，调用约定函数，和复制销毁等行为。\n\n### 内存布局\n\nSwift 有两种形式的类型，值类型和引用类型。它们的内存布局是不一样的，一般来说，值类型会直接保存在栈上，引用类型则保存在堆上。假设有一个 `protocol`，三个内存布局各不相同的对象：\n\n```swift\nprotocol Drawable { func draw() }\nstruct Point : Drawable {\n   var x, y: Double\n   func draw() { ... }\n}\nstruct Line : Drawable {\n   var x1, y1, x2, y2: Double\n   func draw() { ... }\n}\nclass SharedLine : Drawable {\n   var x1, y1, x2, y2: Double\n   func draw() { ... }\n}\n```\n\n这三种类型内存布局分别是，2 * 8 字节的栈空间，4 * 8 字节的栈空间，8 字节栈空间和  (2 + 4) * 8 字节的堆空间。显然，`protocol` 对象在存储和传递时，无法直接使用类型本身的内存布局。\n\nSwift 使用了 Existential Containers 来装载原本类型的 property 和其相关联的必要信息，以确保他们在运行时能有一个统一的内存布局。\n\nExistential Container 是一个五个词大小的容器，前三个词为 value buffer. 第四个词存储真实类型所对应 Value Witness Table 的指针, 第五个词是真实类型遵循当前 `protocol` 的函数表 `protocol` Witness Table 的指针\n\n![](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fab6730aa213f4695a5aa4353c227fbe0~tplv-k3u1fbpfcp-zoom-1.image)\n\n如果 `protocol` 的真实类型为值类型，且其足够小能被装进三个词大小的容器中，则其会被直接装载到 value buffer 中。\n\n![](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F5e74bf9265834a44a6b3e0b6b149b2b2~tplv-k3u1fbpfcp-zoom-1.image)\n\n如果真实类型的大小超过三个词，或者真实类型是引用类型，则会在堆上开辟空间存储，并将指针存储到 value buffer 中。（示意图中忽略了堆对象的 0x0 和 0x8 偏移的内容）\n\n![](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F5f30f7d7492743c7b89fb330bbaa0d61~tplv-k3u1fbpfcp-zoom-1.image)\n\n伪代码如下：\n\n```swift\nprotocol Foo { ... }\nstruct ExistentialContainer {\n  var valueBuffer: (Int, Int, Int)\n  var vwt: ValueWitnessTable\n  var pwt: ProtocolWitnessTable\n  init\u003CT: Foo\u003E(_ value: T) {\n    self.vwt = T.vwt\n    self.pwt = T.pwt\n    if value is class { \u002F\u002F reference type\n      self.valueBuffer = (value.ptr, nil, nil)\n    }\n    if value is struct { \u002F\u002F value type \n      if MemoryLayout\u003CT\u003E.size \u003E 3 * MemoryLayout\u003CInt\u003E.size { \u002F\u002F larger then 3 word\n        let newValue = heapAlloc(value)\n        self.valueBuffer = (value.ptr, nil, nil) \u002F\u002F alloc heap object to storage large value\n      } else {\n        self.valueBuffer = value.copy() \u002F\u002F copy the value to inline value buffer\n      }\n    }\n  }\n}\n```\n\n\n\n### 函数调用\n\n一个遵从了特定 `protocol` 的类型需要包含其约定的所有函数，但由于无法在编译期确定类型，自然也无法确定所调用的函数和其地址。这与 non-final class 是类似的，因此，`protocol` 对象也采用了和 non-final class 的 v-table 相似的技术手段，来解决约定函数地址的问题。每一个函数的地址都会按次序被保存在一张表中，这被称为 `protocol` Witness Table. \n\n每个遵循了特定 `protocol` 的具体类型，都会根据 `protocol` 生成对应的 `protocol` Witness Table. 对于同一个约定函数，它们的相对 `protocol` Witness Table 开始地址的偏移都是一样的。那么对于调用方而言，真实类型可以不被关注。调用时获取 `protocol` Witness Table，根据编译时的方法偏移量从表中取出方法的地址，跳到方法的地址执行。\n\n这一段代码：\n\n```swift\nprotocol Drawable { func draw() } \nstruct Point: Drawable { \n  func draw() { ... }\n} \nfunc foo(_ d: Drawable) {\n  d.draw()\n}\n\nfoo(Point())\n```\n\n其汇编的伪代码如下\n\n```assembly\n_main:\npush       rbp\nmov        rbp, rsp\nmov        rdi, qword [_protocol_witness_table_for_Point]\ncall       _foo\npop        rbp\nret\n\n_foo:\npush       rbp\nmov        rbp, rsp\ncall       [rdi + 0x8] # rdi is Drawable `protocol` Witness Table for Foo\npop        rbp\nret\n\n_protocol_witness_table_for_Point:\ndq         0x1230 \ndq         0x1238 # Point.draw() address\n```\n\n### 实例管理\n\nExistential Containers 采用 value buffer 的方式装载原类型，来抹平各个类型内存布局的不同。因此 Existential Containers 也需要去管理这些不同类型的生命周期，其采用了与 `protocol` Witness Table 一样的跳表机制，称为 Value Witness Table. 每一个具体的类型都有一个 Value Witness Table, 它提供了如何布置和管理该类型的信息和相关函数的地址，如初始化，赋值，复制，销毁，大小等。具体存储的信息可以参见 [ValueWitness.def](https:\u002F\u002Fgithub.com\u002Fapple\u002Fswift\u002Fblob\u002Fmain\u002Finclude\u002Fswift\u002FABI\u002FValueWitness.def).\n\n假设我们有一个函数，其参数为一个 `protocol` 对象，并在其中对这个对象进行修改 （mutating），最后再消费这个对象。\n\n```swift\nprotocol Changeable { mutating func change() }\nstruct Hello {\n  mutating func change() { ... }\n}\nfunc foo(_ value: Changeable) {\n  var copiedValue = value\n  copiedValue.change()\n  print(copiedValue)\n}\n```\n\n那么这会经历以下几个步骤。\n\n1. 在本地保存 Existential Container.\n2. 通过 Value Witness Table 获取原类型对应的大小，开辟临时栈空间。\n3. 通过 Value Witness Table 获取原类型的 copy 函数，复制一份原类型。\n4. 对复制后的对象进行修改。\n5. 消费复制后的对象。\n6. 销毁复制后的对象，并归还栈空间。\n\n伪代码如下：\n\n```swift\nfunc foo(_ value: ExistentialContainer) {\n  \u002F\u002F Stored existential container\n  let valueBuffer = value.valueBuffer\n  let vwt = value.vwt\n  let pwt = value.pwt\n  \n  \u002F\u002F alloc stack space for this functions\n\tlet size = value.vwt.size\n\taddRSP(size) \n  \n  \u002F\u002F Keep a local copy\n  let initializeWithCopy = vwt.initializeWithCopy\n\tvar localValue = initializeWithCopy(valueBuffer)\n  \n  \u002F\u002F call change() function\n\tlet change = pwt.change\n  change(&localValue) \u002F\u002F passed self as parameters\n  \n  print(localValue)\n  \n  \u002F\u002F destroy localValue\n \tlet destroy = vwt.destroy\n  destroy(&localValue)\n  \n  \u002F\u002F move RSP to raw state\n  resetRSP()\n}\n```\n\n从上文伪代码中我们可以发现，在运行时直接使用 `protocol` 对象相比直接使用固定类型和静态函数而言，每一步都会有一个额外的消耗。但如果需要多态性，这些代价可能都是你所需要付出的。而且相比直接使用 `class` 来实现多态性，还省去了引用计数的管理。\n\n\n## 泛型\n\n那么，我们有没有一种方式，既拥有多态性，又能减少运行时的动态消耗呢？\n\n![](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F4337c6de666842238c223df779538ed3~tplv-k3u1fbpfcp-zoom-1.image)\n\n可以通过泛型这种更静态的多态来解决运行时的损耗。\n\n对于泛型函数或泛型结构，编译器会编译生成一个通用实现。与直接使用 `protocol` 对象相比，虽不再使用 Existential Container, 但其内存布局，函数调用和实例管理都十分类似，运行时的动态消耗和性能表现自然也是相似的，有一定的损耗。真正能减少运行时动态消耗的是编译器的泛型特化的优化。\n\n对于下面的例子 `foo(_:)`, Swift 编译时在当前 context 下将泛型 `D` 绑定至 foo 中\n\n```swift\nprotocol Drawable { func draw() } \nfunc foo\u003CD: Drawable\u003E(_ value: D)\nstruct Point: Drawable { }\n\nfoo(Point()) \u002F\u002F Is foo\u003CPoint\u003E(Point())\n```\n\n当开发者去存储或者传递 `protocol` 对象时，总是以一个具体类型起始，如果根据这个 context，将整条调用链中所有未确定类型替换成当前具体类型，这便是泛型的类型调用链替换。\n\n对于下面的例子 `foo(_:)`：\n\n```swift\nprotocol Drawable { func draw() } \nfunc foo\u003CD: Drawable\u003E(_ value: D)\nstruct Point: Drawable { }\nstruct Line: Drawable { } \nfoo(Point())\nfoo(Line())\n\n\u002F\u002F generic specialization \u003CPoint\u003E of foo\u003CD\u003E(_:D)\nfunc foo(_ value: Point)\n\u002F\u002F generic specialization \u003CLine\u003E of foo\u003CD\u003E(_:D)\nfunc foo(_ value: Line)\n```\n\n除了生成通用版本的二进制外，还会生成入参为 `Point`  和 `Line` 特化版本的 `foo(_:)`，并使用其来替代调用链中 `foo(_:)` 通用版本。此时 `protocol` 对象中内存布局，函数调用和实例管理这几个需要运行时决议的部分，已全部可以在编译时确定。\n\n## 泛型特化后与 `protocol` 对象的运行时对比\n\n泛型特化后的函数和结构，其优化行为与静态函数和固定结构一样。\n这里以两个类型 `Point` 和 `Line` 为例子，对比泛型特化后与直接使用 `protocol` 对象。下列所有情况都基于 64 位系统。\n\n```swift\nprotocol Drawable { func draw() } \nstruct Point: Drawable { \n  var x, y: Double\n}\nstruct Line: Drawable { \n  var x1, y1, x2, y2: Double\n}\n```\n\n### 内存布局\n\n以 A，B 两种类型为例子，都存储一个 Point 和一个 Line 实例：\n\n```swift\nstruct A {\n  var first, second: Drawable\n}\nstruct B\u003CFirst: Drawable, Second: Drawable\u003E {\n  var first: Frist\n  var second: Second\n}\n\nA(Point(), Line())\nB(Point(), Line())\n```\n\nA 在栈上存储了两个 Existential Container 和在堆上的一个  `Line` 空间，总共 2 * 5 * 8 + (2 + 4) * 8 字节。\n\n![](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F16de7238fd0f47ef98bff7621b9b233a~tplv-k3u1fbpfcp-zoom-1.image)\n\nB 直接在栈上存储了 Point 和 Line，总共 (2 + 4) * 8 字节。\n\n![](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F45a10d5a103a4f2fb1412df66553e573~tplv-k3u1fbpfcp-zoom-1.image)\n\n在这个 case 下，内存结构的变化除了可以节省内存空间外，还可以通过减少单次复制成本和堆空间开辟次数来提高速度。\n\n栈空间占用由原来 (2 * 5 * 8) 字节下降到了 (6 * 8) 字节， 堆空间原来 (6 * 8) 字节下降至 0 字节。单个结构体节省了 40% 的栈空间和 100% 的堆空间。\n\n结构内存占用下降和无需开辟堆空间后，单次复制的成本显然会随之降低（在 Swift 中，值复制的操作十分常见，也可以通过 copy on write 来解决频繁复制的问题）。\n\n在调用函数时，按照 Swift 的调用约定，结构体在小于一定大小的情况下，可以直接使用约定寄存器传递参数，而超过一定尺寸的结构体则需要开辟堆空间，传递一个指针作为参数。\n\n### 函数调用\u002F实例管理\n\n上文提到，调用 `protocol` 对象的函数，需要在运行时进行查表动态派发。而被泛型特化的函数，由于有了更充分的 context，编译器直接会将上下文中使用动态派发调用的函数替换成静态派发的函数。\n\n在汇编角度则是从\n\n```assembly\ncall [rbx + 0x8]\n```\n\n转换成了\n\n```assembly\ncall _Line_Draw\n```\n\n但单单从动态派发转换成静态派发，其性能提升是有限的（减少了一次查表的操作），性能提升的大部分，在于编译器对静态函数的优化。\n\n动态派发的 `protocol` 对象函数，在编译期的优化是极其有限的，如内联等优化就几乎没有。泛型特化后的静态函数，编译器有了更多的 context 和机会对其进行优化，如裁减特化函数中的死分支（如在某种特定类型下确定不会执行的分支），删除原函数泛型通用版本，内联展开，完全展开后删除原函数等操作。\n\n这也是使用泛型后，虽然单个函数特化出了多个不同的版本，但包体积可能没有较大变化的原因。\n\n`protocol` 对象对实例的管理会需要依靠 Value Witness Table. 其优化方式与函数派发相近，实例生命周期的操作大部分情况下都会被内联展开，如值类型被回收时会直接移动栈顶指针，无需再调用 `destory` 函数。\n\n## 总结\n\nSwift is a Protocol-Oriented Programming Language.\n\nSwift 使用 `protocol` 来解决了无继承或引用语义的多态性。由于其简洁隐蔽与其他类型完全一致的语法，开发者们非常容易在代码中直接存储或传递一个 protocol, 但它的成本并不是可忽略的。\n\n提案 SE-0335 通过关键字 `any` 的方式，将以前隐藏在代码中的 `protocol` 高亮出来，在语言层面解决了 `protocol` 过于隐蔽的问题。而开发者所要所要做的，除了根据 warning (5.6), error (6.0) 无脑填上 `any` 外，可能还需要多一步的思考，是否可以通过使用更多的泛型来替代 `protocol` 对象，和善用 `where` 关键字限定，来减少运行时的损耗。\n\n\n",display_count:d,is_markdown:g,app_html_content:e},author_user_info:{user_id:"1750078240329479",user_name:"Limchihi",company:e,job_title:e,avatar_large:"https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F832db5b619587cd27ab334e1ecf7b3f0~300x300.image",level:3,description:e,followee_count:15,follower_count:h,post_article_count:3,digg_article_count:6,got_digg_count:59,got_view_count:11586,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:327,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:1750078240329479,jpower:327,jscore:24.4,jpower_level:3,jscore_level:l,jscore_title:"见习掘友",author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:30,jscore_this_level_mini_score:d},is_vip:a,become_author_days:d,collection_set_article_count:d},category:{category_id:"6809635626661445640",category_name:"iOS",category_url:"ios",rank:4,back_ground:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F34589746327a360a.png",icon:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F4a218bdf1f6969fd.png",ctime:1461266350,mtime:1432503174,show_type:3,item_type:l,promote_tag_cap:4,promote_priority:4,id:"6809635626661445640",name:"iOS",title:"iOS",alias:"ios"},tags:[{entriesCount:void 0,subscribed:a,id:"6809640399544516616",tag_id:"6809640399544516616",tag_name:"iOS",color:"#616161",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F155962881259379c25251a455680e3249366e3a3ac373.jpg~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:g,ctime:1435964171,mtime:1677909246,id_type:9,tag_alias:e,post_article_count:34105,concern_user_count:192620,title:"iOS",tagId:"6809640399544516616",articleCount:34105,subscribersCount:192620,createdAt:c,updatedAt:c}],user_interact:{id:7087517164046909000,omitempty:l,user_id:2894327269039357,is_digg:a,is_follow:a,is_collect:a},org:{org_info:c,org_user:c,is_followed:a},req_id:"20230304161731DF36539EEB7C611BB9F6",status:{push_status:d},author_interact:c,extra:{boost_type:e},title:"写点 Swift: 为什么你需要使用泛型而不是 protocol",user:{id:"1750078240329479",self_description:void 0,followed:a,viewerIsFollowing:void 0,community:void 0,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:3,user_id:"1750078240329479",user_name:"Limchihi",company:e,job_title:e,avatar_large:"https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F832db5b619587cd27ab334e1ecf7b3f0~300x300.image",description:e,followee_count:15,follower_count:h,post_article_count:3,digg_article_count:6,got_digg_count:59,got_view_count:11586,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:327,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:1750078240329479,jpower:327,jscore:24.4,jpower_level:3,jscore_level:l,jscore_title:"见习掘友",author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:30,jscore_this_level_mini_score:d},is_vip:a,become_author_days:d,collection_set_article_count:d,juejinPower:327,jobTitle:e,roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"Limchihi",blogAddress:void 0,selfDescription:e,beLikedCount:59,beReadCount:11586,followerCount:h,followingCount:15,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:3,pinCount:d,likedArticleCount:6,likedPinCount:d,avatar:"https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F832db5b619587cd27ab334e1ecf7b3f0~300x300.image",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:15,applyEventCount:d,need_lead:d,followTopicCnt:d},viewCount:void 0,commentsCount:9,isEvent:void 0,abstract:"在 Swift 中，在没有类型抹除需求的前提下使用泛型会比直接使用 protocol 有更好的运行时性能表现。",latestCommentAt:c,createdAt:new Date(1650191231000),updatedAt:c,isTopicEvent:a,likedCount:38,likeCount:38,content:e,originalUrl:e,type:"post",collected:a,viewsCount:5978,username:"Limchihi",viewerHasLiked:a,draftId:"7087516947029426207",collectionCount:52},entryView:{},author:{id:"1750078240329479",self_description:void 0,followed:a,viewerIsFollowing:void 0,community:void 0,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:3,user_id:"1750078240329479",user_name:"Limchihi",company:e,job_title:e,avatar_large:"https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F832db5b619587cd27ab334e1ecf7b3f0~300x300.image",description:e,followee_count:15,follower_count:h,post_article_count:3,digg_article_count:6,got_digg_count:59,got_view_count:11586,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:327,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:1750078240329479,jpower:327,jscore:24.4,jpower_level:3,jscore_level:l,jscore_title:"见习掘友",author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:30,jscore_this_level_mini_score:d},is_vip:a,become_author_days:d,collection_set_article_count:d,juejinPower:327,jobTitle:e,roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"Limchihi",blogAddress:void 0,selfDescription:e,beLikedCount:59,beReadCount:11586,followerCount:h,followingCount:15,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:3,pinCount:d,likedArticleCount:6,likedPinCount:d,avatar:"https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F832db5b619587cd27ab334e1ecf7b3f0~300x300.image",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:15,applyEventCount:d,need_lead:d,followTopicCnt:d},adEntryList:[],relatedEntryList:[],linkVotingList:[],userAnnuals:[],columnList:[],resultHtml:"\u003Cstyle\u003E.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre\u003Ecode{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:\"\"}.markdown-body blockquote\u003Ep{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}\u003C\u002Fstyle\u003E\u003Cstyle data-highlight data-highlight-key=\"juejin\"\u003E.markdown-body pre,.markdown-body pre\u003Ecode.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}\u003C\u002Fstyle\u003E\u003Cp\u003E欢迎大家关注我的微信公众号：小林居酒屋\u003C\u002Fp\u003E\n\u003Ch2 data-id=\"heading-0\"\u003ETLDR\u003C\u002Fh2\u003E\n\u003Cp\u003E在 Swift 中，在没有类型抹除需求的前提下使用泛型会比直接使用 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 有更好的运行时性能表现。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-swift copyable\" lang=\"swift\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eprotocol\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EFoo\u003C\u002Fspan\u003E { }\n\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F ❌\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EHello\u003C\u002Fspan\u003E {\n  \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E foo: \u003Cspan class=\"hljs-type\"\u003EFoo\u003C\u002Fspan\u003E\n}\n\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F ⭕️\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EWorld\u003C\u002Fspan\u003E&#x3C;\u003Cspan class=\"hljs-title class_\"\u003ET\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-title class_\"\u003EFoo\u003C\u002Fspan\u003E\u003E {\n  \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E foo: \u003Cspan class=\"hljs-type\"\u003ET\u003C\u002Fspan\u003E\n}\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch2 data-id=\"heading-1\"\u003ESE-0335\u003C\u002Fh2\u003E\n\u003Cp\u003ESwift 5.6 又有一堆鲜滚热辣的 feature 出炉，其中又以 \u003Ca href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fapple%2Fswift-evolution%2Fblob%2Fmain%2Fproposals%2F0335-existential-any.md\" target=\"_blank\" title=\"https:\u002F\u002Fgithub.com\u002Fapple\u002Fswift-evolution\u002Fblob\u002Fmain\u002Fproposals\u002F0335-existential-any.md\" ref=\"nofollow noopener noreferrer\"\u003ESE-0335\u003C\u002Fa\u003E 最为重要。\u003C\u002Fp\u003E\n\u003Cp\u003ESE-0335 带来了一个全新的关键字 \u003Ccode\u003Eany\u003C\u002Fcode\u003E （注意不是 \u003Ccode\u003EAny\u003C\u002Fcode\u003E, \u003Ccode\u003EAnyObject\u003C\u002Fcode\u003E）:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-swift copyable\" lang=\"swift\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eprotocol\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EFoo\u003C\u002Fspan\u003E { }\n\u003Cspan class=\"hljs-keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EHello\u003C\u002Fspan\u003E {\n  \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E foo: \u003Cspan class=\"hljs-keyword\"\u003Eany\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-type\"\u003EFoo\u003C\u002Fspan\u003E\n}\n\u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003Efoo\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-keyword\"\u003E_\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-keyword\"\u003Eany\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-type\"\u003EFoo\u003C\u002Fspan\u003E) { }\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E所有的 \u003Cstrong\u003EExistential types\u003C\u002Fstrong\u003E 用 \u003Ccode\u003Eany\u003C\u002Fcode\u003E 这个关键字修饰。在 Swift 5.6 中，\u003Ccode\u003Eany\u003C\u002Fcode\u003E 可以使用，不添加此关键字的 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 对象会出现 warning. 在即（yao）将（yao）到（wu）来（qi）的 Swift 6.0 中，\u003Ccode\u003Eany\u003C\u002Fcode\u003E  将被强制要求。\u003C\u002Fp\u003E\n\u003Cp\u003E从实现 \u003Ca href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fapple%2Fswift%2Fpull%2F40282\" target=\"_blank\" title=\"https:\u002F\u002Fgithub.com\u002Fapple\u002Fswift\u002Fpull\u002F40282\" ref=\"nofollow noopener noreferrer\"\u003EPR-40282\u003C\u002Fa\u003E 来看，主要添加了编译期检查，没有发现编译后\u002F运行时有什么较大的改变。\u003C\u002Fp\u003E\n\u003Cp\u003E语言通常都是朝着更简洁更抽象的方向去迭代，但这个 proposal 的唯一工作就是给原本简洁明了的 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 对象强制塞上了一个新造的关键字，阿果你是不是工作量不饱和，还想让我们饱和！\u003C\u002Fp\u003E\n\u003Cp\u003E但如果仔细看提案的 Motivation，里面详细阐述了动机:\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EThe cost of using existential types should not be hidden, and programmers should explicitly opt into these semantics.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003E\u003Cstrong\u003EExistential types\u003C\u002Fstrong\u003E 的运行时成本不可被忽略，通过显著提高直接使用 \u003Cstrong\u003EExistential types\u003C\u002Fstrong\u003E 的成本的方式，让开发者只有在必要时才使用。\u003C\u002Fp\u003E\n\u003Ch2 data-id=\"heading-2\"\u003EExistential Type\u003C\u002Fh2\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FType_system%23Existential_types\" target=\"_blank\" title=\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FType_system#Existential_types\" ref=\"nofollow noopener noreferrer\"\u003EExistential Type\u003C\u002Fa\u003E 在类型系统中，描述了一个抽象类型的接口。这个名称源于 Existential Quantification （存在量词， 数学符号 ∃ ）这个概念。既存在一种特定的类型，但在上下文中并不能理解其的真正具体类型。例如：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-c copyable\" lang=\"c\"\u003ET = ∃X { a: X; f: (X → \u003Cspan class=\"hljs-type\"\u003Eint\u003C\u002Fspan\u003E); }\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E这表示了一种类型 \u003Ccode\u003ET\u003C\u002Fcode\u003E，描述了一个模块接口，它表明了存在一种类型 \u003Ccode\u003EX\u003C\u002Fcode\u003E，有一个名为\u003Ccode\u003Ea\u003C\u002Fcode\u003E 的 \u003Ccode\u003EX\u003C\u002Fcode\u003E 类型的数据成员和一个名为 \u003Ccode\u003Ef\u003C\u002Fcode\u003E 的函数，该函数接收一个相同类型的 \u003Ccode\u003EX\u003C\u002Fcode\u003E 的参数并返回一个整数。\u003Ccode\u003EX\u003C\u002Fcode\u003E 的具体类型可以有不同的实现，如\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-c copyable\" lang=\"c\"\u003EintT = { a: \u003Cspan class=\"hljs-type\"\u003Eint\u003C\u002Fspan\u003E; f: (\u003Cspan class=\"hljs-type\"\u003Eint\u003C\u002Fspan\u003E → \u003Cspan class=\"hljs-type\"\u003Eint\u003C\u002Fspan\u003E); }\nfloatT = { a: \u003Cspan class=\"hljs-type\"\u003Efloat\u003C\u002Fspan\u003E; f: (\u003Cspan class=\"hljs-type\"\u003Efloat\u003C\u002Fspan\u003E → \u003Cspan class=\"hljs-type\"\u003Eint\u003C\u002Fspan\u003E); }\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E在 Swift 中，这种概念由 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 对象进行具像化（在一些别的语言中，对象被限定为 \u003Ccode\u003Eclass\u003C\u002Fcode\u003E 的一个实例，但 Swift 的对象概念非常广泛，可以是 \u003Ccode\u003Estruct\u003C\u002Fcode\u003E, \u003Ccode\u003Eenum\u003C\u002Fcode\u003E, \u003Ccode\u003Eclass\u003C\u002Fcode\u003E, \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 或者一个 \u003Ccode\u003Eclosures\u003C\u002Fcode\u003E。这又是另外一个话题了）。\u003C\u002Fp\u003E\n\u003Cp\u003ESwift 引入了 Existential Container, Protocol Witness Table, Value Witness Table 三种技术来解决 Reference type, Value type 的类型抹除和多态问题。\u003C\u002Fp\u003E\n\u003Ch2 data-id=\"heading-3\"\u003Eprotocol runtime\u003C\u002Fh2\u003E\n\u003Cp\u003E当开发者存储或者传递一个 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 时，其遵循该 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 的特定真实类型在编译器时还无法确定，只有在运行时才能获取真实类型。那么我们需要一些额外的运行时手段来解决存储，调用约定函数，和复制销毁等行为。\u003C\u002Fp\u003E\n\u003Ch3 data-id=\"heading-4\"\u003E内存布局\u003C\u002Fh3\u003E\n\u003Cp\u003ESwift 有两种形式的类型，值类型和引用类型。它们的内存布局是不一样的，一般来说，值类型会直接保存在栈上，引用类型则保存在堆上。假设有一个 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E，三个内存布局各不相同的对象：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-swift copyable\" lang=\"swift\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eprotocol\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EDrawable\u003C\u002Fspan\u003E { \u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003Edraw\u003C\u002Fspan\u003E() }\n\u003Cspan class=\"hljs-keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EPoint\u003C\u002Fspan\u003E : \u003Cspan class=\"hljs-title class_\"\u003EDrawable\u003C\u002Fspan\u003E {\n   \u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E x, y: \u003Cspan class=\"hljs-type\"\u003EDouble\u003C\u002Fspan\u003E\n   \u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003Edraw\u003C\u002Fspan\u003E() { \u003Cspan class=\"hljs-operator\"\u003E...\u003C\u002Fspan\u003E }\n}\n\u003Cspan class=\"hljs-keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003ELine\u003C\u002Fspan\u003E : \u003Cspan class=\"hljs-title class_\"\u003EDrawable\u003C\u002Fspan\u003E {\n   \u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E x1, y1, x2, y2: \u003Cspan class=\"hljs-type\"\u003EDouble\u003C\u002Fspan\u003E\n   \u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003Edraw\u003C\u002Fspan\u003E() { \u003Cspan class=\"hljs-operator\"\u003E...\u003C\u002Fspan\u003E }\n}\n\u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003ESharedLine\u003C\u002Fspan\u003E : \u003Cspan class=\"hljs-title class_\"\u003EDrawable\u003C\u002Fspan\u003E {\n   \u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E x1, y1, x2, y2: \u003Cspan class=\"hljs-type\"\u003EDouble\u003C\u002Fspan\u003E\n   \u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003Edraw\u003C\u002Fspan\u003E() { \u003Cspan class=\"hljs-operator\"\u003E...\u003C\u002Fspan\u003E }\n}\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E这三种类型内存布局分别是，2 * 8 字节的栈空间，4 * 8 字节的栈空间，8 字节栈空间和  (2 + 4) * 8 字节的堆空间。显然，\u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 对象在存储和传递时，无法直接使用类型本身的内存布局。\u003C\u002Fp\u003E\n\u003Cp\u003ESwift 使用了 Existential Containers 来装载原本类型的 property 和其相关联的必要信息，以确保他们在运行时能有一个统一的内存布局。\u003C\u002Fp\u003E\n\u003Cp\u003EExistential Container 是一个五个词大小的容器，前三个词为 value buffer. 第四个词存储真实类型所对应 Value Witness Table 的指针, 第五个词是真实类型遵循当前 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 的函数表 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E Witness Table 的指针\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fab6730aa213f4695a5aa4353c227fbe0~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E如果 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 的真实类型为值类型，且其足够小能被装进三个词大小的容器中，则其会被直接装载到 value buffer 中。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F5e74bf9265834a44a6b3e0b6b149b2b2~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E如果真实类型的大小超过三个词，或者真实类型是引用类型，则会在堆上开辟空间存储，并将指针存储到 value buffer 中。（示意图中忽略了堆对象的 0x0 和 0x8 偏移的内容）\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F5f30f7d7492743c7b89fb330bbaa0d61~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E伪代码如下：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-swift copyable\" lang=\"swift\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eprotocol\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EFoo\u003C\u002Fspan\u003E { \u003Cspan class=\"hljs-operator\"\u003E...\u003C\u002Fspan\u003E }\n\u003Cspan class=\"hljs-keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EExistentialContainer\u003C\u002Fspan\u003E {\n  \u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E valueBuffer: (\u003Cspan class=\"hljs-type\"\u003EInt\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-type\"\u003EInt\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-type\"\u003EInt\u003C\u002Fspan\u003E)\n  \u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E vwt: \u003Cspan class=\"hljs-type\"\u003EValueWitnessTable\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E pwt: \u003Cspan class=\"hljs-type\"\u003EProtocolWitnessTable\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Einit\u003C\u002Fspan\u003E&#x3C;\u003Cspan class=\"hljs-type\"\u003ET\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-type\"\u003EFoo\u003C\u002Fspan\u003E\u003E(\u003Cspan class=\"hljs-keyword\"\u003E_\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-params\"\u003Evalue\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-type\"\u003ET\u003C\u002Fspan\u003E) {\n    \u003Cspan class=\"hljs-keyword\"\u003Eself\u003C\u002Fspan\u003E.vwt \u003Cspan class=\"hljs-operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-type\"\u003ET\u003C\u002Fspan\u003E.vwt\n    \u003Cspan class=\"hljs-keyword\"\u003Eself\u003C\u002Fspan\u003E.pwt \u003Cspan class=\"hljs-operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-type\"\u003ET\u003C\u002Fspan\u003E.pwt\n    \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E value \u003Cspan class=\"hljs-keyword\"\u003Eis\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Eclass\u003C\u002Fspan\u003E { \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F reference type\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-keyword\"\u003Eself\u003C\u002Fspan\u003E.valueBuffer \u003Cspan class=\"hljs-operator\"\u003E=\u003C\u002Fspan\u003E (value.ptr, \u003Cspan class=\"hljs-literal\"\u003Enil\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-literal\"\u003Enil\u003C\u002Fspan\u003E)\n    }\n    \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E value \u003Cspan class=\"hljs-keyword\"\u003Eis\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Estruct\u003C\u002Fspan\u003E { \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F value type \u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-type\"\u003EMemoryLayout\u003C\u002Fspan\u003E&#x3C;\u003Cspan class=\"hljs-type\"\u003ET\u003C\u002Fspan\u003E\u003E.size \u003Cspan class=\"hljs-operator\"\u003E\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E3\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-operator\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-type\"\u003EMemoryLayout\u003C\u002Fspan\u003E&#x3C;\u003Cspan class=\"hljs-type\"\u003EInt\u003C\u002Fspan\u003E\u003E.size { \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F larger then 3 word\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E newValue \u003Cspan class=\"hljs-operator\"\u003E=\u003C\u002Fspan\u003E heapAlloc(value)\n        \u003Cspan class=\"hljs-keyword\"\u003Eself\u003C\u002Fspan\u003E.valueBuffer \u003Cspan class=\"hljs-operator\"\u003E=\u003C\u002Fspan\u003E (value.ptr, \u003Cspan class=\"hljs-literal\"\u003Enil\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-literal\"\u003Enil\u003C\u002Fspan\u003E) \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F alloc heap object to storage large value\u003C\u002Fspan\u003E\n      } \u003Cspan class=\"hljs-keyword\"\u003Eelse\u003C\u002Fspan\u003E {\n        \u003Cspan class=\"hljs-keyword\"\u003Eself\u003C\u002Fspan\u003E.valueBuffer \u003Cspan class=\"hljs-operator\"\u003E=\u003C\u002Fspan\u003E value.copy() \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F copy the value to inline value buffer\u003C\u002Fspan\u003E\n      }\n    }\n  }\n}\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 data-id=\"heading-5\"\u003E函数调用\u003C\u002Fh3\u003E\n\u003Cp\u003E一个遵从了特定 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 的类型需要包含其约定的所有函数，但由于无法在编译期确定类型，自然也无法确定所调用的函数和其地址。这与 non-final class 是类似的，因此，\u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 对象也采用了和 non-final class 的 v-table 相似的技术手段，来解决约定函数地址的问题。每一个函数的地址都会按次序被保存在一张表中，这被称为 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E Witness Table.\u003C\u002Fp\u003E\n\u003Cp\u003E每个遵循了特定 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 的具体类型，都会根据 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 生成对应的 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E Witness Table. 对于同一个约定函数，它们的相对 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E Witness Table 开始地址的偏移都是一样的。那么对于调用方而言，真实类型可以不被关注。调用时获取 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E Witness Table，根据编译时的方法偏移量从表中取出方法的地址，跳到方法的地址执行。\u003C\u002Fp\u003E\n\u003Cp\u003E这一段代码：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-swift copyable\" lang=\"swift\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eprotocol\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EDrawable\u003C\u002Fspan\u003E { \u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003Edraw\u003C\u002Fspan\u003E() } \n\u003Cspan class=\"hljs-keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EPoint\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-title class_\"\u003EDrawable\u003C\u002Fspan\u003E { \n  \u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003Edraw\u003C\u002Fspan\u003E() { \u003Cspan class=\"hljs-operator\"\u003E...\u003C\u002Fspan\u003E }\n} \n\u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003Efoo\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-keyword\"\u003E_\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-params\"\u003Ed\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-type\"\u003EDrawable\u003C\u002Fspan\u003E) {\n  d.draw()\n}\n\nfoo(\u003Cspan class=\"hljs-type\"\u003EPoint\u003C\u002Fspan\u003E())\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E其汇编的伪代码如下\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-assembly copyable\" lang=\"assembly\"\u003E_main:\npush       rbp\nmov        rbp, rsp\nmov        rdi, qword [_protocol_witness_table_for_Point]\ncall       _foo\npop        rbp\nret\n\n_foo:\npush       rbp\nmov        rbp, rsp\ncall       [rdi + 0x8] # rdi is Drawable `protocol` Witness Table for Foo\npop        rbp\nret\n\n_protocol_witness_table_for_Point:\ndq         0x1230 \ndq         0x1238 # Point.draw() address\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 data-id=\"heading-6\"\u003E实例管理\u003C\u002Fh3\u003E\n\u003Cp\u003EExistential Containers 采用 value buffer 的方式装载原类型，来抹平各个类型内存布局的不同。因此 Existential Containers 也需要去管理这些不同类型的生命周期，其采用了与 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E Witness Table 一样的跳表机制，称为 Value Witness Table. 每一个具体的类型都有一个 Value Witness Table, 它提供了如何布置和管理该类型的信息和相关函数的地址，如初始化，赋值，复制，销毁，大小等。具体存储的信息可以参见 \u003Ca href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fapple%2Fswift%2Fblob%2Fmain%2Finclude%2Fswift%2FABI%2FValueWitness.def\" target=\"_blank\" title=\"https:\u002F\u002Fgithub.com\u002Fapple\u002Fswift\u002Fblob\u002Fmain\u002Finclude\u002Fswift\u002FABI\u002FValueWitness.def\" ref=\"nofollow noopener noreferrer\"\u003EValueWitness.def\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003E假设我们有一个函数，其参数为一个 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 对象，并在其中对这个对象进行修改 （mutating），最后再消费这个对象。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-swift copyable\" lang=\"swift\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eprotocol\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EChangeable\u003C\u002Fspan\u003E { \u003Cspan class=\"hljs-keyword\"\u003Emutating\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003Echange\u003C\u002Fspan\u003E() }\n\u003Cspan class=\"hljs-keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EHello\u003C\u002Fspan\u003E {\n  \u003Cspan class=\"hljs-keyword\"\u003Emutating\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003Echange\u003C\u002Fspan\u003E() { \u003Cspan class=\"hljs-operator\"\u003E...\u003C\u002Fspan\u003E }\n}\n\u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003Efoo\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-keyword\"\u003E_\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-params\"\u003Evalue\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-type\"\u003EChangeable\u003C\u002Fspan\u003E) {\n  \u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E copiedValue \u003Cspan class=\"hljs-operator\"\u003E=\u003C\u002Fspan\u003E value\n  copiedValue.change()\n  \u003Cspan class=\"hljs-built_in\"\u003Eprint\u003C\u002Fspan\u003E(copiedValue)\n}\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E那么这会经历以下几个步骤。\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E在本地保存 Existential Container.\u003C\u002Fli\u003E\n\u003Cli\u003E通过 Value Witness Table 获取原类型对应的大小，开辟临时栈空间。\u003C\u002Fli\u003E\n\u003Cli\u003E通过 Value Witness Table 获取原类型的 copy 函数，复制一份原类型。\u003C\u002Fli\u003E\n\u003Cli\u003E对复制后的对象进行修改。\u003C\u002Fli\u003E\n\u003Cli\u003E消费复制后的对象。\u003C\u002Fli\u003E\n\u003Cli\u003E销毁复制后的对象，并归还栈空间。\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E伪代码如下：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-swift copyable\" lang=\"swift\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003Efoo\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-keyword\"\u003E_\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-params\"\u003Evalue\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-type\"\u003EExistentialContainer\u003C\u002Fspan\u003E) {\n  \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F Stored existential container\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E valueBuffer \u003Cspan class=\"hljs-operator\"\u003E=\u003C\u002Fspan\u003E value.valueBuffer\n  \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E vwt \u003Cspan class=\"hljs-operator\"\u003E=\u003C\u002Fspan\u003E value.vwt\n  \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E pwt \u003Cspan class=\"hljs-operator\"\u003E=\u003C\u002Fspan\u003E value.pwt\n  \n  \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F alloc stack space for this functions\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E size \u003Cspan class=\"hljs-operator\"\u003E=\u003C\u002Fspan\u003E value.vwt.size\n\taddRSP(size) \n  \n  \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F Keep a local copy\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E initializeWithCopy \u003Cspan class=\"hljs-operator\"\u003E=\u003C\u002Fspan\u003E vwt.initializeWithCopy\n\t\u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E localValue \u003Cspan class=\"hljs-operator\"\u003E=\u003C\u002Fspan\u003E initializeWithCopy(valueBuffer)\n  \n  \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F call change() function\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E change \u003Cspan class=\"hljs-operator\"\u003E=\u003C\u002Fspan\u003E pwt.change\n  change(\u003Cspan class=\"hljs-operator\"\u003E&#x26;\u003C\u002Fspan\u003ElocalValue) \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F passed self as parameters\u003C\u002Fspan\u003E\n  \n  \u003Cspan class=\"hljs-built_in\"\u003Eprint\u003C\u002Fspan\u003E(localValue)\n  \n  \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F destroy localValue\u003C\u002Fspan\u003E\n \t\u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E destroy \u003Cspan class=\"hljs-operator\"\u003E=\u003C\u002Fspan\u003E vwt.destroy\n  destroy(\u003Cspan class=\"hljs-operator\"\u003E&#x26;\u003C\u002Fspan\u003ElocalValue)\n  \n  \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F move RSP to raw state\u003C\u002Fspan\u003E\n  resetRSP()\n}\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E从上文伪代码中我们可以发现，在运行时直接使用 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 对象相比直接使用固定类型和静态函数而言，每一步都会有一个额外的消耗。但如果需要多态性，这些代价可能都是你所需要付出的。而且相比直接使用 \u003Ccode\u003Eclass\u003C\u002Fcode\u003E 来实现多态性，还省去了引用计数的管理。\u003C\u002Fp\u003E\n\u003Ch2 data-id=\"heading-7\"\u003E泛型\u003C\u002Fh2\u003E\n\u003Cp\u003E那么，我们有没有一种方式，既拥有多态性，又能减少运行时的动态消耗呢？\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F4337c6de666842238c223df779538ed3~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E可以通过泛型这种更静态的多态来解决运行时的损耗。\u003C\u002Fp\u003E\n\u003Cp\u003E对于泛型函数或泛型结构，编译器会编译生成一个通用实现。与直接使用 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 对象相比，虽不再使用 Existential Container, 但其内存布局，函数调用和实例管理都十分类似，运行时的动态消耗和性能表现自然也是相似的，有一定的损耗。真正能减少运行时动态消耗的是编译器的泛型特化的优化。\u003C\u002Fp\u003E\n\u003Cp\u003E对于下面的例子 \u003Ccode\u003Efoo(_:)\u003C\u002Fcode\u003E, Swift 编译时在当前 context 下将泛型 \u003Ccode\u003ED\u003C\u002Fcode\u003E 绑定至 foo 中\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-swift copyable\" lang=\"swift\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eprotocol\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EDrawable\u003C\u002Fspan\u003E { \u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003Edraw\u003C\u002Fspan\u003E() } \n\u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003Efoo\u003C\u002Fspan\u003E&#x3C;\u003Cspan class=\"hljs-type\"\u003ED\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-type\"\u003EDrawable\u003C\u002Fspan\u003E\u003E(\u003Cspan class=\"hljs-keyword\"\u003E_\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-params\"\u003Evalue\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-type\"\u003ED\u003C\u002Fspan\u003E)\n\u003Cspan class=\"hljs-keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EPoint\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-title class_\"\u003EDrawable\u003C\u002Fspan\u003E { }\n\nfoo(\u003Cspan class=\"hljs-type\"\u003EPoint\u003C\u002Fspan\u003E()) \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F Is foo&#x3C;Point\u003E(Point())\u003C\u002Fspan\u003E\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E当开发者去存储或者传递 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 对象时，总是以一个具体类型起始，如果根据这个 context，将整条调用链中所有未确定类型替换成当前具体类型，这便是泛型的类型调用链替换。\u003C\u002Fp\u003E\n\u003Cp\u003E对于下面的例子 \u003Ccode\u003Efoo(_:)\u003C\u002Fcode\u003E：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-swift copyable\" lang=\"swift\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eprotocol\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EDrawable\u003C\u002Fspan\u003E { \u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003Edraw\u003C\u002Fspan\u003E() } \n\u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003Efoo\u003C\u002Fspan\u003E&#x3C;\u003Cspan class=\"hljs-type\"\u003ED\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-type\"\u003EDrawable\u003C\u002Fspan\u003E\u003E(\u003Cspan class=\"hljs-keyword\"\u003E_\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-params\"\u003Evalue\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-type\"\u003ED\u003C\u002Fspan\u003E)\n\u003Cspan class=\"hljs-keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EPoint\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-title class_\"\u003EDrawable\u003C\u002Fspan\u003E { }\n\u003Cspan class=\"hljs-keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003ELine\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-title class_\"\u003EDrawable\u003C\u002Fspan\u003E { } \nfoo(\u003Cspan class=\"hljs-type\"\u003EPoint\u003C\u002Fspan\u003E())\nfoo(\u003Cspan class=\"hljs-type\"\u003ELine\u003C\u002Fspan\u003E())\n\n\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F generic specialization &#x3C;Point\u003E of foo&#x3C;D\u003E(_:D)\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003Efoo\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-keyword\"\u003E_\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-params\"\u003Evalue\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-type\"\u003EPoint\u003C\u002Fspan\u003E)\n\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F generic specialization &#x3C;Line\u003E of foo&#x3C;D\u003E(_:D)\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003Efoo\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-keyword\"\u003E_\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-params\"\u003Evalue\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-type\"\u003ELine\u003C\u002Fspan\u003E)\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E除了生成通用版本的二进制外，还会生成入参为 \u003Ccode\u003EPoint\u003C\u002Fcode\u003E  和 \u003Ccode\u003ELine\u003C\u002Fcode\u003E 特化版本的 \u003Ccode\u003Efoo(_:)\u003C\u002Fcode\u003E，并使用其来替代调用链中 \u003Ccode\u003Efoo(_:)\u003C\u002Fcode\u003E 通用版本。此时 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 对象中内存布局，函数调用和实例管理这几个需要运行时决议的部分，已全部可以在编译时确定。\u003C\u002Fp\u003E\n\u003Ch2 data-id=\"heading-8\"\u003E泛型特化后与 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 对象的运行时对比\u003C\u002Fh2\u003E\n\u003Cp\u003E泛型特化后的函数和结构，其优化行为与静态函数和固定结构一样。\n这里以两个类型 \u003Ccode\u003EPoint\u003C\u002Fcode\u003E 和 \u003Ccode\u003ELine\u003C\u002Fcode\u003E 为例子，对比泛型特化后与直接使用 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 对象。下列所有情况都基于 64 位系统。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-swift copyable\" lang=\"swift\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eprotocol\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EDrawable\u003C\u002Fspan\u003E { \u003Cspan class=\"hljs-keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003Edraw\u003C\u002Fspan\u003E() } \n\u003Cspan class=\"hljs-keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EPoint\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-title class_\"\u003EDrawable\u003C\u002Fspan\u003E { \n  \u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E x, y: \u003Cspan class=\"hljs-type\"\u003EDouble\u003C\u002Fspan\u003E\n}\n\u003Cspan class=\"hljs-keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003ELine\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-title class_\"\u003EDrawable\u003C\u002Fspan\u003E { \n  \u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E x1, y1, x2, y2: \u003Cspan class=\"hljs-type\"\u003EDouble\u003C\u002Fspan\u003E\n}\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 data-id=\"heading-9\"\u003E内存布局\u003C\u002Fh3\u003E\n\u003Cp\u003E以 A，B 两种类型为例子，都存储一个 Point 和一个 Line 实例：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-swift copyable\" lang=\"swift\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EA\u003C\u002Fspan\u003E {\n  \u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E first, second: \u003Cspan class=\"hljs-type\"\u003EDrawable\u003C\u002Fspan\u003E\n}\n\u003Cspan class=\"hljs-keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EB\u003C\u002Fspan\u003E&#x3C;\u003Cspan class=\"hljs-title class_\"\u003EFirst\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-title class_\"\u003EDrawable\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-title class_\"\u003ESecond\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-title class_\"\u003EDrawable\u003C\u002Fspan\u003E\u003E {\n  \u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E first: \u003Cspan class=\"hljs-type\"\u003EFrist\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E second: \u003Cspan class=\"hljs-type\"\u003ESecond\u003C\u002Fspan\u003E\n}\n\n\u003Cspan class=\"hljs-type\"\u003EA\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-type\"\u003EPoint\u003C\u002Fspan\u003E(), \u003Cspan class=\"hljs-type\"\u003ELine\u003C\u002Fspan\u003E())\n\u003Cspan class=\"hljs-type\"\u003EB\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-type\"\u003EPoint\u003C\u002Fspan\u003E(), \u003Cspan class=\"hljs-type\"\u003ELine\u003C\u002Fspan\u003E())\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EA 在栈上存储了两个 Existential Container 和在堆上的一个  \u003Ccode\u003ELine\u003C\u002Fcode\u003E 空间，总共 2 * 5 * 8 + (2 + 4) * 8 字节。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F16de7238fd0f47ef98bff7621b9b233a~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EB 直接在栈上存储了 Point 和 Line，总共 (2 + 4) * 8 字节。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F45a10d5a103a4f2fb1412df66553e573~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E在这个 case 下，内存结构的变化除了可以节省内存空间外，还可以通过减少单次复制成本和堆空间开辟次数来提高速度。\u003C\u002Fp\u003E\n\u003Cp\u003E栈空间占用由原来 (2 * 5 * 8) 字节下降到了 (6 * 8) 字节， 堆空间原来 (6 * 8) 字节下降至 0 字节。单个结构体节省了 40% 的栈空间和 100% 的堆空间。\u003C\u002Fp\u003E\n\u003Cp\u003E结构内存占用下降和无需开辟堆空间后，单次复制的成本显然会随之降低（在 Swift 中，值复制的操作十分常见，也可以通过 copy on write 来解决频繁复制的问题）。\u003C\u002Fp\u003E\n\u003Cp\u003E在调用函数时，按照 Swift 的调用约定，结构体在小于一定大小的情况下，可以直接使用约定寄存器传递参数，而超过一定尺寸的结构体则需要开辟堆空间，传递一个指针作为参数。\u003C\u002Fp\u003E\n\u003Ch3 data-id=\"heading-10\"\u003E函数调用\u002F实例管理\u003C\u002Fh3\u003E\n\u003Cp\u003E上文提到，调用 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 对象的函数，需要在运行时进行查表动态派发。而被泛型特化的函数，由于有了更充分的 context，编译器直接会将上下文中使用动态派发调用的函数替换成静态派发的函数。\u003C\u002Fp\u003E\n\u003Cp\u003E在汇编角度则是从\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-assembly copyable\" lang=\"assembly\"\u003Ecall [rbx + 0x8]\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E转换成了\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-assembly copyable\" lang=\"assembly\"\u003Ecall _Line_Draw\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E但单单从动态派发转换成静态派发，其性能提升是有限的（减少了一次查表的操作），性能提升的大部分，在于编译器对静态函数的优化。\u003C\u002Fp\u003E\n\u003Cp\u003E动态派发的 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 对象函数，在编译期的优化是极其有限的，如内联等优化就几乎没有。泛型特化后的静态函数，编译器有了更多的 context 和机会对其进行优化，如裁减特化函数中的死分支（如在某种特定类型下确定不会执行的分支），删除原函数泛型通用版本，内联展开，完全展开后删除原函数等操作。\u003C\u002Fp\u003E\n\u003Cp\u003E这也是使用泛型后，虽然单个函数特化出了多个不同的版本，但包体积可能没有较大变化的原因。\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 对象对实例的管理会需要依靠 Value Witness Table. 其优化方式与函数派发相近，实例生命周期的操作大部分情况下都会被内联展开，如值类型被回收时会直接移动栈顶指针，无需再调用 \u003Ccode\u003Edestory\u003C\u002Fcode\u003E 函数。\u003C\u002Fp\u003E\n\u003Ch2 data-id=\"heading-11\"\u003E总结\u003C\u002Fh2\u003E\n\u003Cp\u003ESwift is a Protocol-Oriented Programming Language.\u003C\u002Fp\u003E\n\u003Cp\u003ESwift 使用 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 来解决了无继承或引用语义的多态性。由于其简洁隐蔽与其他类型完全一致的语法，开发者们非常容易在代码中直接存储或传递一个 protocol, 但它的成本并不是可忽略的。\u003C\u002Fp\u003E\n\u003Cp\u003E提案 SE-0335 通过关键字 \u003Ccode\u003Eany\u003C\u002Fcode\u003E 的方式，将以前隐藏在代码中的 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 高亮出来，在语言层面解决了 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 过于隐蔽的问题。而开发者所要所要做的，除了根据 warning (5.6), error (6.0) 无脑填上 \u003Ccode\u003Eany\u003C\u002Fcode\u003E 外，可能还需要多一步的思考，是否可以通过使用更多的泛型来替代 \u003Ccode\u003Eprotocol\u003C\u002Fcode\u003E 对象，和善用 \u003Ccode\u003Ewhere\u003C\u002Fcode\u003E 关键字限定，来减少运行时的损耗。\u003C\u002Fp\u003E",hitArticleCache:b,showSidebar:a,actionType:{FETCH:"view\u002Fcolumn\u002FFETCH",FETCH_ADDITIONAL:"view\u002Fcolumn\u002FFETCH_ADDITIONAL",FETCH_SIDEBAR_ADENTRY:"view\u002Fcolumn\u002FFETCH_SIDEBAR_ADENTRY",FETCH_AUTHOR_EXTRA:"view\u002Fcolumn\u002FFETCH_AUTHOR_EXTRA",RESET:"view\u002Fcolumn\u002FRESET"},recommendedArticleList:{list:[],cursor:f,loading:a,skeleton:a,hasMore:a,articleId:e,actionType:{UPDATE_STATE:"view\u002Fcolumn\u002Frecommend-List\u002FUPDATE_STATE",FETCH_MORE:"view\u002Fcolumn\u002Frecommend-List\u002FFETCH_MORE",FETCH:"view\u002Fcolumn\u002Frecommend-List\u002FFETCH",RESET:"view\u002Fcolumn\u002Frecommend-List\u002FRESET"}}},collection:{collection:{author:{}},actionType:{FETCH:"@\u002Fview\u002Fcollection\u002FFETCH",REFRESH:"@\u002Fview\u002Fcollection\u002FREFRESH",RESET:"@\u002Fview\u002Fcollection\u002FRESET"},list:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fcollection\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002Fcollection\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fcollection\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fcollection\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fcollection\u002Flist\u002FRESET"},id:e,sort:n}},gettingStarted:{category:{},actionType:{UPDATE_STATE:"@\u002Fview\u002FgettingStarted\u002FUPDATE_STATE",FOLLOW:"@\u002Fview\u002FgettingStarted\u002FFOLLOW",RESET:"@\u002Fview\u002FgettingStarted\u002FRESET",UPDATE_CATEGORY:"@\u002Fview\u002FgettingStarted\u002FUPDATE_CATEGORY"}},pin:{pin:{user:{},imageUrlList:[]},pinList:[],actionType:{FETCH:"@\u002Fview\u002Fpin\u002FFETCH",RESET:"@\u002Fview\u002Fpin\u002FRESET"},sidebar:{list:[],after:e,loading:a,isRecommend:a,hasNextPage:b,actionType:{UPDATE_STATE:"@\u002Fview\u002Fpin\u002Fsidebar\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fpin\u002Fsidebar\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Fpin\u002Fsidebar\u002FFETCH",RESET:"@\u002Fview\u002Fpin\u002Fsidebar\u002FRESET"}},commentList:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fpin\u002FcommentList\u002FUPDATE",FETCH:"@\u002Fview\u002Fpin\u002FcommentList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fpin\u002FcommentList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fpin\u002FcommentList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fpin\u002FcommentList\u002FRESET"},pinId:c},subCommentList:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FUPDATE",FETCH:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FRESET"},commentId:c}},topic:{topic:e,followedTopicList:[],actionType:{FETCH:"@\u002Fview\u002Ftopic\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Ftopic\u002FUPDATE_STATE",RESET:"@\u002Fview\u002Ftopic\u002FRESET"},allTopicList:{pageSize:x,page:d,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FRESET"},sortType:m},pinlist:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002FpinList\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002FpinList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002FpinList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002FpinList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002FpinList\u002FRESET"},sortType:p},sidebar:{actionType:{RESET:"@\u002Fview\u002Ftopic\u002Fsidebar\u002FRESET",UPDATE_STATE:"@\u002Fview\u002Ftopic\u002Fsidebar\u002FUPDATE_STATE"},attender:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FRESET"},topicId:c}},followedList:{pageSize:x,page:d,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FRESET"},after:d}},recommendationIndex:{actionType:{FETCH_USER:"@\u002Fview\u002Frecommendation\u002FFETCH_USER",FETCH_MORE:"@\u002Fview\u002Frecommendation\u002FFETCH_MORE",RESET:"@\u002Fview\u002Frecommendation\u002FRESET",FETCH:"@\u002Fview\u002Frecommendation\u002FFETCH"},cursor:e,hasMore:e,userList:[],loading:a,skeleton:b,category:k,categoryNavList:[],serverRenderUserList:a},event:{event:{},loading:a,user:{},actionType:{FETCH:"view\u002Fevent\u002FFETCH",RESET:"view\u002Fevent\u002FRESET"}},academyIndex:{academy:{},bannerList:[],qualitiedList:[],latestList:[],offlineList:[],loading:a,user:{},actionType:{FETCH:"view\u002Facademy\u002FFETCH",RESET:"view\u002Facademy\u002FRESET"}},coursesIndex:{loading:a,list:[],sort:"online",actionType:{FETCH:"view\u002Fcourses\u002FFETCH",RESET:"view\u002Fcourses\u002FRESET",FETCH_MORE:"view\u002Fcourses\u002FFETCH_MORE"}},team:{team:{},loading:b,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FFETCH",RESET:"@\u002Fview\u002Fteam\u002FRESET",UPDATE:"@\u002Fview\u002Fteam\u002FUPDATE",FOLLOW:"@\u002Fview\u002Fteam\u002FFOLLOW"},detailList:{actionType:{RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002FRESET"},posts:{list:[],hasMore:a,skeleton:a,loading:a,sort:n,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FRESET"}},pins:{list:[],hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FRESET"}},hire:{list:[],hasMore:a,cursor:f,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FRESET"}}}},couponList:{list:{"0":q,"1":q,"2":q}},payment:{selectedDiscount:{},bookletDetail:{},coupons:{availables:[],unavailables:[]},discountList:[]},activityVip:{selectedVipSku:{}}},component:{indexAside:{bannerList:[],userList:[],actionType:{FETCH_BANNER:"@\u002Fcomponent\u002Faside\u002FFETCH_BANNER",FETCH_USER:"@\u002Fcomponent\u002Faside\u002FFETCH_USER",CLOSE_BANNER:"@\u002Fcomponent\u002Faside\u002FCLOSE_BANNER"}}},ore:{oreCount:d},avatarMenuInfo:{},common:{theme:"light"},env:{ua:"Mozilla\u002F5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit\u002F537.36 (KHTML, like Gecko) Chrome\u002F110.0.0.0 Safari\u002F537.36",serverEnv:"production"},auth:{user:{id:"2894327269039357",self_description:void 0,followed:a,viewerIsFollowing:void 0,community:void 0,subscribedTagCount:12,wroteBookCount:d,boughtBookCount:d,isBindedPhone:g,level:d,user_id:"2894327269039357",user_name:"Leon0206",company:"网易云音乐",job_title:"iOS开发工程师",avatar_large:"https:\u002F\u002Fp6-passport.byteacctimg.com\u002Fimg\u002Fmosaic-legacy\u002F3795\u002F3044413937~300x300.image",power:d,phone:"17*****0590",email:e,allow_notification:a,rank_index:d,wallet_total_bill:d,description:e,blog_address:e,is_black:a,editor_type:e,register_time:1627475051,update_time:-62135596800,administrator:d,builder:d,favorable_author:d,book_author:d,phone_verified:g,wechat_verified:d,weibo_verified:d,github_verified:d,followee_count:4,follower_count:d,post_article_count:d,digg_article_count:g,view_article_count:113,subscribe_tag_count:12,got_digg_count:d,got_view_count:d,comment_count:d,collect_set_count:g,booklet_count:d,buy_booklet_count:d,post_shortmsg_count:d,comment_shortmsg_count:d,digg_shortmsg_count:d,ltime:d,isfollowed:a,forbidden_words:d,create_collect_set_count:g,follow_collect_set_count:d,weibo_nickname:e,wechat_nickname:e,github_nickname:e,apply_logout:d,is_logout:d,weibo_id:e,is_new:a,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,graduated_at:-62135596800,blog_move_priority:a,tech_team:{org_id:f,org_name:e,org_icon:e,role:d},job_count:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,digg_news_count:d,news_privilege:d,digg_toutiao_count:d,follow_column_cnt:g,can_tag_cnt:g,need_lead:d,follow_topic_count:d,badges:{wear_badges:c,obtain_badges:c,obtain_count:d,show_badge:a,link_url:e},is_collect_fast:a,user_growth_info:{user_id:2894327269039357,jpower:d,jscore:38.5,jpower_level:d,jscore_level:3,jscore_title:"新星掘友",author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:150,jscore_this_level_mini_score:30},is_vip:a,collection_set_article_count:d,juejinPower:d,jobTitle:"iOS开发工程师",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"Leon0206",blogAddress:e,selfDescription:e,beLikedCount:d,beReadCount:d,followerCount:d,followingCount:4,collectionCount:g,createdCollectionCount:g,followingCollectionCount:d,postedPostsCount:d,pinCount:d,likedArticleCount:g,likedPinCount:d,avatar:"https:\u002F\u002Fp6-passport.byteacctimg.com\u002Fimg\u002Fmosaic-legacy\u002F3795\u002F3044413937~300x300.image",latestLoginedInAt:c,createdAt:new Date(1627475051000),updatedAt:c,phoneNumber:"17*****0590",titleDescription:e,followeesCount:4,applyEventCount:d,followTopicCnt:d},clientId:e,token:e,qrCode:c,qrCodeStatus:c,qrCodeToken:c},tag:{subscribedTagList:[]},entry:{isLikeLoading:a},collection:{},comment:{},bookComment:{},repoComment:{},category:{list:[]},user:{subscribedTagList:[]},notification:{unreadCount:{user:d,system:d,total:d}},follow:{subscribedTagList:[]},error:{location:c,errorView:c,statusCode:200,needRiskModal:a,riskAppealUrl:e},abTest:{info:{}},suspensionPanel:{needSuspension:b},pinComment:{},pin:{deleteDialogVisible:a,reportDialogVisible:a,targetPin:c,isOnFocus:a},topic:{visible:a},activity:{"2020":{},offer:{is_show:d,start_time:d},voteData:{err_no:d,err_msg:"success",data:{face:{title:e,activity_id:"5",start_time:y,end_time:1675699200,status:l,image:"https:\u002F\u002Fp6-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fd9c6d6b34c8045e993f2f607a660dd43~tplv-k3u1fbpfcp-zoom-1.image",close_image:"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F882fc263e36347ffbf6d598de520870e~tplv-k3u1fbpfcp-image.image",url:"https:\u002F\u002Fjuejin.cn\u002Fpin\u002F7195849498253770808?utm_source=popup&utm_medium=jjapp&utm_campaign=xcyxj",is_show:d},top:{title:r,activity_id:j,start_time:s,end_time:t,status:g,image:"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F9563d620af3b48a791f77019c948f064~tplv-k3u1fbpfcp-zoom-1.image",close_image:"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Ff49fe994db7b4af7846259d97610bec0~tplv-k3u1fbpfcp-zoom-1.image",url:"https:\u002F\u002Fjuejin.cn\u002Fvip?utm_source=app_top",is_show:g},web_top:{title:r,activity_id:j,start_time:s,end_time:t,status:g,image:z,close_image:"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F19e7f58eecbd497c92397344e1d489a6~tplv-k3u1fbpfcp-zoom-1.image",url:"https:\u002F\u002Fjuejin.cn\u002Fvip?utm_source=web_nav",is_show:g},plugin_top:{title:r,activity_id:j,start_time:s,end_time:t,status:g,image:z,close_image:u,url:"https:\u002F\u002Fjuejin.cn\u002Fvip?utm_source=gold_browser_extension",is_show:g},search_top:{title:A,activity_id:j,start_time:B,end_time:1675612799,status:l,image:C,close_image:D,url:E,is_show:d},web_search:{title:A,activity_id:j,start_time:B,end_time:y,status:l,image:C,close_image:D,url:E,is_show:d},jcode_top:{title:"码上掘金编程挑战赛",activity_id:j,start_time:1670846400,end_time:1671983999,status:l,image:u,close_image:u,url:"https:\u002F\u002Fjuejin.cn\u002Fchallenge?utm_source=code_nav",is_show:d},offer:{title:e,activity_id:"2020",start_time:1617638400,end_time:1618934400,status:l,image:"https:\u002F\u002Fp9-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F2879410508de459c91ae8b7509ca75f8~tplv-k3u1fbpfcp-zoom-1.image",close_image:"https:\u002F\u002Fp9-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fa38d640009e14c87a7d29cd95dee27dd~tplv-k3u1fbpfcp-zoom-1.image",url:"https:\u002F\u002Fjuejin-activity.bytedance.net\u002Frank",is_show:d}}}},header:{leadStep:d,isPopupZlink:a},tcc:{tccConfig:c},route:{name:"column",path:v,hash:e,query:{},params:{id:w},fullPath:v,meta:{},from:{name:c,path:F,hash:e,query:{},params:{},fullPath:F,meta:{}}}},serverRendered:b,routePath:v,config:{API_HOST:"api.juejin.cn",CAPTCHA_HOST:"verify.snssdk.com",PLATFORM_APPID:{wechat:1277,weibo:1276,github:1045,wechatApp:1070},SCM_VERSION:"1.0.0.6544",http:{}},globalRefs:{}}}(false,true,null,0,"","0",1,20,"topic","2022","recommended",2,"hot","newest","following","popular",{},"掘金会员",1673020800,1680278400,"https:\u002F\u002Fp6-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F759e2aa805c0461b840e0f0f09ed05fa~tplv-k3u1fbpfcp-zoom-1.image?","\u002Fpost\u002F7087517164046909448","7087517164046909448",100,1675612800,"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F7482b3ad2cd14edda31f05399c2ae759~tplv-k3u1fbpfcp-zoom-1.image","开启我的2022年度报告",1672797600,"https:\u002F\u002Fp1-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F8a41831fce8b4c838f1807b2c86aea06~tplv-k3u1fbpfcp-zoom-1.image","https:\u002F\u002Fp9-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fe5199830276c4a85bc7c8cb8edecd54d~tplv-k3u1fbpfcp-image.image","https:\u002F\u002Fjuejin.cn\u002Freport2022\u002Fmobile?utm_source=search","\u002F"));</script><script src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/6ccc1bf.js" defer=""></script><script src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/c68ae6a.js" defer=""></script><script src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/607e9aa.js" defer=""></script><script src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/fe8610f.js" defer=""></script><script src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/37aab1f.js" defer=""></script><script src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/83d184c.js" defer=""></script><script src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/6a0af43.js" defer=""></script><script src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/6e787e2.js" defer=""></script>
  

<link href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/52.39cb9d6.css" rel="stylesheet" type="text/css"><link href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/4.4ebc7e8.css" rel="stylesheet" type="text/css"><link href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/default.c3d25dd.css" rel="stylesheet" type="text/css"><div data-v-47b82694="" data-v-1b688d7c="" data-transfer="true" class="collection-list-modal byte-modal v-transfer-dom"><div class="byte-modal__mask" style="z-index: 1000; display: none;"></div><div class="byte-modal__wrapper" style="z-index: 1000; display: none;"><div class="byte-modal__content" style="width: 520px;"><!----><div class="byte-modal__body"></div><!----></div></div></div><div data-v-47b82694="" data-v-fe76cb40="" data-transfer="true" class="collection-list-modal byte-modal v-transfer-dom"><div class="byte-modal__mask" style="z-index: 1001; display: none;"></div><div class="byte-modal__wrapper" style="z-index: 1001; display: none;"><div class="byte-modal__content" style="width: 520px;"><!----><div class="byte-modal__body"></div><!----></div></div></div><link href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/198.adcadde.css" rel="stylesheet" type="text/css"><div data-transfer="true" class="risk-modal byte-modal v-transfer-dom" align-center=""><div class="byte-modal__mask" style="z-index: 1002; display: none;"></div><div class="byte-modal__wrapper" style="z-index: 1002; display: none;"><div class="byte-modal__content" style="width: 350px;"><!----><div class="byte-modal__body"><div class="risk-modal-inner"><div class="risk-modal-title">温馨提示</div> <div>当前操作失败，如有疑问，可点击申诉</div> <div class="risk-modal-footer"><button type="button" class="cancel-button risk-button byte-btn byte-btn--default byte-btn--large"><!----><!----><span><span>前往申诉</span></span></button> <button type="button" class="risk-button byte-btn byte-btn--primary byte-btn--large"><!----><!----><span><span>我知道了</span></span></button></div></div></div><!----></div></div></div><link href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/139.9ccface.css" rel="stylesheet" type="text/css"><link href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/181.1b801b1.css" rel="stylesheet" type="text/css"><link href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/192.1dc0908.css" rel="stylesheet" type="text/css"><link href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/158.cb7fed2.css" rel="stylesheet" type="text/css"><div data-v-41eefe39="" data-transfer="true" class="lead byte-modal v-transfer-dom"><div class="byte-modal__mask" style="z-index: 1003; display: none;"></div><div class="byte-modal__wrapper" style="z-index: 1003; display: none;"><div class="byte-modal__content" style="width: 500px;"><div class="byte-modal__header"><img data-v-41eefe39="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/MaskGroup.13dfc4f.png" alt="" loading="lazy" class="header-bgc"> <span data-v-41eefe39="" class="header-title">选择你感兴趣的技术方向</span><span aria-label="Close" class="byte-modal__headerbtn"><i class="byte-icon byte-icon--close"><svg t="1561638608887" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="441911" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M512 448l288-288c6.4-6.4 19.2-6.4 32 0l25.6 32c6.4 6.4 6.4 19.2 0 32L569.6 505.6l288 288c6.4 6.4 6.4 19.2 0 32l-32 32c-6.4 6.4-19.2 6.4-32 0L512 569.6l-288 288c-6.4 6.4-19.2 6.4-32 0l-32-32c-6.4-6.4-6.4-19.2 0-32L448 505.6 160 224c-6.4-12.8-6.4-25.6 0-32l32-32c6.4-6.4 19.2-6.4 32 0L512 448z" p-id="441912"></path><path d="M512 448l288-288c6.4-6.4 19.2-6.4 32 0l25.6 32c6.4 6.4 6.4 19.2 0 32L569.6 505.6l288 288c6.4 6.4 6.4 19.2 0 32l-32 32c-6.4 6.4-19.2 6.4-32 0L512 569.6l-288 288c-6.4 6.4-19.2 6.4-32 0l-32-32c-6.4-6.4-6.4-19.2 0-32L448 505.6 160 224c-6.4-12.8-6.4-25.6 0-32l32-32c6.4-6.4 19.2-6.4 32 0L512 448z" p-id="441913"></path></svg></i></span></div><div class="byte-modal__body"> <div data-v-41eefe39="" class="classify-box"><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M2 2.5C1.44772 2.5 1 2.94772 1 3.5V11.5C1 12.0523 1.44772 12.5 2 12.5H14C14.5523 12.5 15 12.0523 15 11.5V3.5C15 2.94772 14.5523 2.5 14 2.5H2ZM4.5 7.5C4.22386 7.5 4 7.72386 4 8V10C4 10.2761 4.22386 10.5 4.5 10.5H5C5.27614 10.5 5.5 10.2761 5.5 10V8C5.5 7.72386 5.27614 7.5 5 7.5H4.5ZM7 5.5C7 5.22386 7.22386 5 7.5 5H8C8.27614 5 8.5 5.22386 8.5 5.5V10C8.5 10.2761 8.27614 10.5 8 10.5H7.5C7.22386 10.5 7 10.2761 7 10V5.5ZM10.5 6.5C10.2239 6.5 10 6.72386 10 7V10C10 10.2761 10.2239 10.5 10.5 10.5H11C11.2761 10.5 11.5 10.2761 11.5 10V7C11.5 6.72386 11.2761 6.5 11 6.5H10.5Z" fill="#86909C"></path><rect data-v-41eefe39="" id="Rectangle 282" x="3" y="13.5" width="10" height="1.3" rx="0.5" fill="#86909C"></rect></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              后端
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M2 2.5C1.44772 2.5 1 2.94772 1 3.5V6.5H15V3.5C15 2.94772 14.5523 2.5 14 2.5H2ZM15 7.8H1V13.5C1 14.0523 1.44772 14.5 2 14.5H14C14.5523 14.5 15 14.0523 15 13.5V7.8ZM8.65811 8.52566C8.92009 8.61298 9.06167 8.89614 8.97434 9.15811L7.97434 12.1581C7.88702 12.4201 7.60386 12.5617 7.34189 12.4743C7.07991 12.387 6.93833 12.1039 7.02566 11.8419L8.02566 8.84189C8.11298 8.57991 8.39614 8.43833 8.65811 8.52566ZM3.5 5.5C3.77614 5.5 4 5.27614 4 5C4 4.72386 3.77614 4.5 3.5 4.5C3.22386 4.5 3 4.72386 3 5C3 5.27614 3.22386 5.5 3.5 5.5ZM5.5 5C5.5 5.27614 5.27614 5.5 5 5.5C4.72386 5.5 4.5 5.27614 4.5 5C4.5 4.72386 4.72386 4.5 5 4.5C5.27614 4.5 5.5 4.72386 5.5 5ZM6.5 5.5C6.77614 5.5 7 5.27614 7 5C7 4.72386 6.77614 4.5 6.5 4.5C6.22386 4.5 6 4.72386 6 5C6 5.27614 6.22386 5.5 6.5 5.5ZM6.44721 9.27639C6.57071 9.52338 6.4706 9.82372 6.22361 9.94721L5.11803 10.5L6.22361 11.0528C6.4706 11.1763 6.57071 11.4766 6.44721 11.7236C6.32372 11.9706 6.02338 12.0707 5.77639 11.9472L3.77639 10.9472C3.607 10.8625 3.5 10.6894 3.5 10.5C3.5 10.3106 3.607 10.1375 3.77639 10.0528L5.77639 9.05279C6.02338 8.92929 6.32372 9.0294 6.44721 9.27639ZM9.77639 9.94721C9.5294 9.82372 9.42929 9.52338 9.55279 9.27639C9.67628 9.0294 9.97662 8.92929 10.2236 9.05279L12.2236 10.0528C12.393 10.1375 12.5 10.3106 12.5 10.5C12.5 10.6894 12.393 10.8625 12.2236 10.9472L10.2236 11.9472C9.97662 12.0707 9.67628 11.9706 9.55279 11.7236C9.42929 11.4766 9.5294 11.1763 9.77639 11.0528L10.882 10.5L9.77639 9.94721Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              前端
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><rect data-v-41eefe39="" id="Rectangle 287" x="5.7002" y="12.5" width="1.3" height="3" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 289" x="1" y="6.5" width="1.3" height="6" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 290" x="13.7002" y="6.5" width="1.3" height="6" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 288" x="9" y="12.5" width="1.3" height="3" rx="0.5" fill="#86909C"></rect><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M13 5.86364V12.5C13 13.0523 12.5523 13.5 12 13.5H4C3.44772 13.5 3 13.0523 3 12.5V5.86364V5.77273C3 5.74067 3.00151 5.70897 3.00446 5.67768C3.11608 3.35397 5.30996 1.5 8 1.5C10.69 1.5 12.8839 3.35397 12.9955 5.67768C12.9985 5.70897 13 5.74067 13 5.77273V5.86364ZM7 6.25C7 6.66421 6.66421 7 6.25 7C5.83579 7 5.5 6.66421 5.5 6.25C5.5 5.83579 5.83579 5.5 6.25 5.5C6.66421 5.5 7 5.83579 7 6.25ZM9.75 7C10.1642 7 10.5 6.66421 10.5 6.25C10.5 5.83579 10.1642 5.5 9.75 5.5C9.33579 5.5 9 5.83579 9 6.25C9 6.66421 9.33579 7 9.75 7Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              Android
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39=""><g data-v-41eefe39="" id="pingguo-2 1"><path data-v-41eefe39="" id="Vector" d="M11.821 8.9388C11.8035 7.16562 13.267 6.31556 13.3322 6.27312C12.5097 5.06956 11.2287 4.90506 10.7724 4.88581C9.6821 4.77556 8.64523 5.52763 8.09179 5.52763C7.5401 5.52763 6.6861 4.902 5.78179 4.91863C4.59354 4.93613 3.49761 5.60944 2.88598 6.67387C1.65136 8.8163 2.56967 11.9899 3.77323 13.7277C4.36123 14.5782 5.06254 15.5332 5.98304 15.4991C6.86942 15.4637 7.20498 14.9255 8.27642 14.9255C9.34785 14.9255 9.64929 15.4991 10.5877 15.4816C11.5415 15.4637 12.1461 14.6149 12.7302 13.7618C13.4052 12.7752 13.6835 11.8197 13.6997 11.7707C13.6787 11.7611 11.8394 11.0567 11.821 8.9388ZM10.0584 3.73563C10.547 3.14281 10.8769 2.32031 10.7868 1.5C10.0829 1.52888 9.22973 1.969 8.72485 2.56006C8.2716 3.08463 7.87523 3.922 7.98154 4.72613C8.76729 4.78737 9.56923 4.32669 10.0584 3.73563Z" fill="#86909C"></path></g></g><defs data-v-41eefe39=""></defs></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              iOS
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><rect data-v-41eefe39="" id="Rectangle 289" x="1" y="8.5" width="1.3" height="5" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 292" x="14" y="8.5" width="1.3" height="5" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 293" x="7.5" y="4.5" width="1" height="3" rx="0.5" fill="#86909C"></rect><circle data-v-41eefe39="" id="Ellipse 25" cx="8" cy="2.5" r="1" fill="#86909C"></circle><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M3 7.5C3 6.94772 3.44772 6.5 4 6.5H12C12.5523 6.5 13 6.94772 13 7.5V14.5C13 15.0523 12.5523 15.5 12 15.5H4C3.44772 15.5 3 15.0523 3 14.5V7.5ZM7 11.25C7 11.6642 6.66421 12 6.25 12C5.83579 12 5.5 11.6642 5.5 11.25C5.5 10.8358 5.83579 10.5 6.25 10.5C6.66421 10.5 7 10.8358 7 11.25ZM9.75 12C10.1642 12 10.5 11.6642 10.5 11.25C10.5 10.8358 10.1642 10.5 9.75 10.5C9.33579 10.5 9 10.8358 9 11.25C9 11.6642 9.33579 12 9.75 12Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              人工智能
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><g data-v-41eefe39="" id="kaifagongjuicon-hui 1"><path data-v-41eefe39="" id="Vector" d="M14.212 5.04986L13.497 5.76886C13.3158 5.95088 13.1005 6.09531 12.8633 6.19386C12.6261 6.29242 12.3718 6.34315 12.115 6.34315C11.8582 6.34315 11.6039 6.29242 11.3667 6.19386C11.1295 6.09531 10.9142 5.95088 10.733 5.76886C10.3664 5.39915 10.1606 4.89955 10.1606 4.37886C10.1606 3.85817 10.3664 3.35857 10.733 2.98886L11.448 2.26986C11.843 1.87286 11.579 1.40486 10.868 1.51686C10.028 1.64786 9.262 2.07586 8.709 2.72286C8.005 3.41786 7.682 4.66486 7.922 5.81786L1.927 11.8469C1.56096 12.2165 1.35562 12.7157 1.35562 13.2359C1.35562 13.7561 1.56096 14.2552 1.927 14.6249C2.10804 14.807 2.32329 14.9515 2.56038 15.0501C2.79747 15.1487 3.05172 15.1995 3.3085 15.1995C3.56528 15.1995 3.81953 15.1487 4.05662 15.0501C4.29371 14.9515 4.50896 14.807 4.69 14.6249L10.686 8.59486C11.2693 8.7189 11.8745 8.69473 12.446 8.52459C13.0176 8.35444 13.5375 8.04373 13.958 7.62086C14.5581 7.01861 14.9243 6.22244 14.991 5.37486C15.071 4.91886 14.607 4.65286 14.212 5.04986ZM3.768 13.6979C3.67659 13.7885 3.56041 13.85 3.4341 13.8747C3.30779 13.8994 3.17699 13.8861 3.05819 13.8366C2.93939 13.7871 2.8379 13.7036 2.76651 13.5965C2.69511 13.4894 2.65701 13.3636 2.657 13.2349C2.65647 13.0618 2.72462 12.8957 2.84649 12.7729C2.96836 12.6501 3.13399 12.5807 3.307 12.5799C3.487 12.5799 3.651 12.6529 3.768 12.7719C3.888 12.8889 3.96 13.0539 3.96 13.2349C3.9604 13.3209 3.94363 13.4062 3.91066 13.4857C3.87769 13.5652 3.82919 13.6373 3.768 13.6979ZM3.118 5.16786L5.377 7.43986L6.297 6.51286L4.04 4.24286L3.535 3.27086L1.92 2.11186L1 3.03986L2.151 4.66086L3.118 5.16786ZM10.672 9.98586C10.642 9.95526 10.6062 9.93095 10.5667 9.91436C10.5272 9.89776 10.4848 9.88921 10.442 9.88921C10.3992 9.88921 10.3568 9.89776 10.3173 9.91436C10.2778 9.93095 10.242 9.95526 10.212 9.98586L8.83 11.3759C8.79955 11.4062 8.7754 11.4423 8.75891 11.482C8.74243 11.5218 8.73395 11.5644 8.73395 11.6074C8.73395 11.6504 8.74243 11.693 8.75891 11.7327C8.7754 11.7724 8.79955 11.8085 8.83 11.8389L12.09 15.1169C12.2106 15.2383 12.3541 15.3348 12.5122 15.4006C12.6703 15.4663 12.8398 15.5002 13.011 15.5002C13.1822 15.5002 13.3517 15.4663 13.5098 15.4006C13.6679 15.3348 13.8114 15.2383 13.932 15.1169C14.442 14.6049 14.442 13.7769 13.932 13.2639L10.672 9.98586Z" fill="#86909C"></path></g></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              开发工具
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M1 2.5C1 1.94772 1.44772 1.5 2 1.5H14C14.5523 1.5 15 1.94772 15 2.5V14.5C15 15.0523 14.5523 15.5 14 15.5H2C1.44772 15.5 1 15.0523 1 14.5V2.5ZM3 5C3 4.72386 3.22386 4.5 3.5 4.5H12.5C12.7761 4.5 13 4.72386 13 5V5.3C13 5.57614 12.7761 5.8 12.5 5.8H3.5C3.22386 5.8 3 5.57614 3 5.3V5ZM3.5 7.5C3.22386 7.5 3 7.72386 3 8V8.3C3 8.57614 3.22386 8.8 3.5 8.8H4.5C4.77614 8.8 5 8.57614 5 8.3V8C5 7.72386 4.77614 7.5 4.5 7.5H3.5ZM7 8C7 7.72386 7.22386 7.5 7.5 7.5H8.5C8.77614 7.5 9 7.72386 9 8V8.3C9 8.57614 8.77614 8.8 8.5 8.8H7.5C7.22386 8.8 7 8.57614 7 8.3V8ZM11.5 7.5C11.2239 7.5 11 7.72386 11 8V8.3C11 8.57614 11.2239 8.8 11.5 8.8H12.5C12.7761 8.8 13 8.57614 13 8.3V8C13 7.72386 12.7761 7.5 12.5 7.5H11.5ZM3 11C3 10.7239 3.22386 10.5 3.5 10.5H7.5C7.77614 10.5 8 10.7239 8 11V11.3C8 11.5761 7.77614 11.8 7.5 11.8H3.5C3.22386 11.8 3 11.5761 3 11.3V11ZM10.5 10.5C10.2239 10.5 10 10.7239 10 11V11.3C10 11.5761 10.2239 11.8 10.5 11.8H12.5C12.7761 11.8 13 11.5761 13 11.3V11C13 10.7239 12.7761 10.5 12.5 10.5H10.5Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              代码人生
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M14.9187 7.03385C15.0999 7.26744 14.9466 7.7 14.651 7.7H6.32905V4.5H5.02905V7.7H3.6C2.16406 7.7 1 6.53594 1 5.1C1 3.66406 2.16406 2.5 3.6 2.5H14.651C14.9466 2.5 15.0999 2.93257 14.9188 3.16616C14.5064 3.69779 14.2602 4.36959 14.2602 5.10001C14.2602 5.83043 14.5064 6.50222 14.9187 7.03385Z" fill="#86909C"></path><path data-v-41eefe39="" id="Subtract_2" fill-rule="evenodd" clip-rule="evenodd" d="M1.34902 14.5008C1.0534 14.5008 0.900077 14.0682 1.08126 13.8346C1.49363 13.303 1.7398 12.6312 1.7398 11.9008C1.7398 11.1704 1.49362 10.4986 1.08125 9.96694C0.900064 9.73335 1.05339 9.30078 1.34901 9.30078H12.4C13.8359 9.30078 15 10.4648 15 11.9008C15 13.3367 13.8359 14.5008 12.4 14.5008H1.34902Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              阅读
            </span></div></div></div></div> <!----></div><div class="byte-modal__footer"><div data-v-41eefe39="" class="left">跳过</div> <div data-v-41eefe39="" class="mid" style="display: none;">上一步</div> <div data-v-41eefe39="" class="right">
      至少选择1个分类
    </div></div></div></div></div><div data-v-8bb78912="" data-transfer="true" class="upgrade-new-modal byte-modal v-transfer-dom"><div class="byte-modal__mask" style="z-index: 1004; display: none;"></div><div class="byte-modal__wrapper" style="z-index: 1004; display: none;"><div class="byte-modal__content" style="width: 311px;"><div class="byte-modal__header"><span class="byte-modal__title"></span><!----></div><div class="byte-modal__body"> <!----> <div data-v-8bb78912="" class="close-icon"><img data-v-8bb78912="" src="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/8867e249c23a7c0ea596c139befc04d7.svg" alt=""></div></div><!----></div></div></div><link href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/100.b5554a0.css" rel="stylesheet" type="text/css"><div class="byte-tooltip byte-tooltip--dark" style="display: none; position: absolute; max-width: none; will-change: transform; z-index: 1005; top: 0px; left: 0px; transform: translate3d(81px, 2087px, 0px);" x-placement="top">
        沉浸阅读
      <div x-arrow="" class="popper__arrow" style="left: 0px;"></div></div><link href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/155.cc4a86e.css" rel="stylesheet" type="text/css"><link href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/9.b3ecb8a.css" rel="stylesheet" type="text/css"><link href="./写点 Swift_ 为什么你需要使用泛型而不是 protocol - 掘金_files/88.9843b4c.css" rel="stylesheet" type="text/css"></body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration></html>