---
title: 03. The Self and self in Swift
date: 2023-11-07 16:50:00
categories: 
- [Swift, 00. Fundamental Concepts]
tags:
- Self
- self
---

<font color=gray size=2>*It will take about 1 minutes to finish reading this article.*</font>

I believe everyone knows the specific function of the keyword self. It is basically the same as self in OC. But for Self...(WTF, what is this)
When you use the wrong Self, the compiler will prompt like this:

```Swift
'Self' is only available in a protocol or as the result of a method in a class
```

If separated, it means two things.

1. Self can be used to limit related types in the protocol

2. Self can be used in a class to serve as the return value type of a method

For the first case, you can refer to the examples as follows:

```Swift
protocol Copyable {
    func copy() -> Self
    func clamp(intervalToClamp: Self) -> Self
}

```

Both methods in this protocol use Self to limit the type.

In the second case, you can refer to the following example:

```Swift
class A: Copyable {
    var num = 1
    
    required init() {
        
    }
    
    func copy() -> Self {
        let type = type(of: self)
        print(type)
        let result = type.init()
        result.num = num
        return result
    }
    
    func clamp(intervalToClamp: A) -> Self {
        let result = type(of: self).init()
        result.num = num
        return result
    }
    
    class func calssFunc() -> Self {
        let type = self
        print(type)
        let result = type.init()
        return result
    }
    
}

class B: A {
    func clamp(intervalToClamp: B) -> Self {
        let result = type(of: self).init()
        result.num = num
        return result
    }
}

let type = A.self
type.calssFunc()

let typeB = B.self
typeB.calssFunc()

let objectA = A()
objectA.num = 100

let newObjectA = objectA.copy()
objectA.num = 1

let objectB = B()
objectB.num = 100
let newB = objectB.copy()

```

In this example, there are two classes A and B. A implements two methods in the protocol and contains a class method. B is a subclass of A and also implements the protocol method.
It can be seen that for A
In the instance method of A, self represents the current instance, and type(of: self) is used to obtain the type of the current object.
In the class method of A, self represents the type of the current class, and Self can only be used to represent the type of the return value.
Comparing the methods of the protocols implemented by A and B, we can see that the parameter types received by the methods in the protocol must be replaced by the types of the respective classes, otherwise the error at the beginning of the article will be reported.

In summary, it can be seen that for Self, it only represents a specific type, and can only be used in protocols or as the return value type of a method of a certain class. Self refers to the current instance in instance methods, and in class methods Refers to the current class.